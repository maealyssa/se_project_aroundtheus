!function(){"use strict";var e={960:function(e,t,s){e.exports=s.p+"190142da37235e3079a8.jpg"},291:function(e,t,s){e.exports=s.p+"9aed7cb3f54c0faa1f9f.jpg"},822:function(e,t,s){e.exports=s.p+"0fb96793ab89da938a7d.jpg"},328:function(e,t,s){e.exports=s.p+"395d21149564d1293c88.jpg"},705:function(e,t,s){e.exports=s.p+"a22751dd8a0e22ceb5f6.jpg"},561:function(e,t,s){e.exports=s.p+"0df918d480d675e4708e.jpg"}},t={};function s(r){var n=t[r];if(void 0!==n)return n.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,s),i.exports}s.m=e,s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s.b=document.baseURI||self.location.href,function(){const e=[{name:"Lago di Braies",link:new URL(s(291),s.b)},{name:"Vanoise National Park",link:new URL(s(705),s.b)},{name:"Lake Louise",link:new URL(s(822),s.b)},{name:"Latemar",link:new URL(s(328),s.b)},{name:"Bald Mountains",link:new URL(s(960),s.b)},{name:"Yosemite Valley",link:new URL(s(561),s.b)}];var t=class{constructor(e,t,s,r,n){this._name=e.name,this._link=e.link,this._cardId=e._id,this._cardSelector=n,this._handleImageClick=t,this._handleLikeButton=s,this._handleDeleteLike=r}_setEventListeners(){this._likeButton=this._element.querySelector(".card__like-button"),this._likeButton.addEventListener("click",(()=>this._handleLikeButton(this._cardId))),this._element.querySelector(".card__trash-button").addEventListener("click",(()=>this._handleDelete(this._cardId))),this._imageModal=this._element.querySelector(".card__image"),this._imageModal.addEventListener("click",(()=>this._handleImageClick({link:this._link,name:this._name})))}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}handleLike=()=>{this._likeButton.classList.toggle("card__like-button_active")};_handleDelete(){this._element.remove(),this._element=null}generateCard(){this._element=this._getTemplate();const e=this._element.querySelector(".card__image");return e.src=this._link,e.alt=this._name,this._element.querySelector(".card__title").textContent=this._name,this._setEventListeners(),this._element}};class r{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=t,this._inputList=this._formElement.querySelectorAll(this._inputSelector)}_showInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_hasInvalidInput(){return!this._inputElements.every((e=>e.validity.valid))}disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}_enableButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_toggleButtonState(){this._hasInvalidInput()?this.disableButton():this._enableButton()}_setEventListeners(){this._inputElements=[...this._formElement.querySelectorAll(this._inputSelector)],this._submitButton=this._formElement.querySelector(this._submitButtonSelector),this._inputElements.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault(),this.disableButton()})),this._setEventListeners()}resetValidation(){this._toggleButtonState(),this._inputList.forEach((e=>{this._hideInputError(e)}))}}class n{constructor(e){let{popupSelector:t}=e;this._popup=document.querySelector(t),this._closeButton=this._popup.querySelector(".modal__close")}setEventListeners(){this._popup.addEventListener("click",(e=>{e.target===e.currentTarget&&this.close()})),this._closeButton.addEventListener("click",(()=>this.close()))}open(){this._popup.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popup.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose=e=>{"Escape"===e.key&&this.close()}}class i extends n{constructor(e,t){super({popupSelector:e}),this._form=this._popup.querySelector(".modal__form"),this._submitButton=this._popup.querySelector(".modal__button"),this._formInputs=this._popup.querySelectorAll("input"),this._handleAddCardFormSubmit=t}_getInputValues(){const e={};return this._formInputs.forEach((t=>{e[t.name]=t.value})),e}setEventListeners(){super.setEventListeners(),this._popup.addEventListener("submit",(e=>{this._handleAddCardFormSubmit(this._getInputValues()),e.preventDefault()}))}close(){this._form.reset(),super.close()}}const o=document.querySelector(".profile__edit-button"),a=document.querySelector(".profile__add-button"),l=document.forms["card-form"],c=document.forms["profile-form"],d=document.querySelector("#profile-input-name"),h=document.querySelector("#profile-input-description"),u={};var _;_={inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible",formSelector:"form"},Array.from(document.querySelectorAll(_.formSelector)).forEach((e=>{const t=new r(_,e),s=e.getAttribute("name");u[s]=t,t.enableValidation()}));const m=new class extends n{constructor(e){super({popupSelector:e}),this._modalName=this._popup.querySelector(".modal__name"),this._modalImage=this._popup.querySelector(".modal__image"),super.setEventListeners()}open(e){this._modalName.textContent=e.name,this._modalImage.alt=e.name,this._modalImage.src=e.link,super.open()}}("#image-modal");function p(e){return new t({data:e,handleImageClick:e=>{m.open(e)}},"#card-template").generateCard()}m.close();const f=new class{constructor(e,t){let{items:s,renderer:r}=e;this._items=s,this._renderer=r,this._cardSelector=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._cardSelector.prepend(e)}}({items:e,renderer:e=>{const t=p(e);f.addItem(t)}},".cards__list");f.renderItems(e);const b=new i("#add-modal",(e=>{const t=p({name:e.name,link:e.link});b.close(),f.addItem(t)}));a.addEventListener("click",(()=>{u[l.getAttribute("name")].resetValidation(),b.open()})),b.setEventListeners();const E=new class{constructor(e,t,s){this._nameEl=document.querySelector(e),this._descriptionEl=document.querySelector(t),this._link=s}getUserInfo(){return{name:this._nameEl.textContent,description:this._descriptionEl.textContent}}setUserInfo(e,t){this._nameEl.textContent=e,this._descriptionEl.textContent=t}setAvatarImage(e){this._link.src=e}}(".profile__title",".profile__description"),v=new i("#edit-modal",(e=>{E.setUserInfo(e.name,e.description),v.close()}));o.addEventListener("click",(()=>{const e=E.getUserInfo();d.value=e.name,h.value=e.description,u[c.getAttribute("name")].disableButton(),v.open()})),v.setEventListeners(),new class{constructor(e){this._baseUrl=e.baseUrl,this._headers=e.headers}_response=e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`);async getInitialCards(){const e=await fetch(`${this._baseUrl}/cards`,{headers:this._headers});return this._response(e)}async getUserInfo(){const e=await fetch(`${this._baseUrl}/users/me`,{headers:this._headers});return this._response(e)}async editProfile(e){let{name:t,about:s}=e;const r=await fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:s})});return this._response(r)}async editProfileAvatar(e){let{link:t}=e;const s=await fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:t})});return this._response(s)}async getAllCards(){const e=await fetch(`${this._baseUrl}/cards`,{headers:this._headers});return this._response(e)}async addNewCard(e){let{name:t,link:s}=e;const r=await fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:s})});return this._response(r)}async deleteCard(e){let{cardId:t}=e;const s=await fetch(`${this._baseUrl}/cards/${t}`,{method:"DELETE",headers:this._headers});return this._response(s)}async addLike(e){let{cardId:t}=e;const s=await fetch(`${this._baseUrl}/cards/likes/${t}`,{method:"PUT",headers:this._headers});return this._response(s)}async deleteLike(e){let{cardId:t}=e;const s=await fetch(`${this._baseUrl}/cards/${t}/likes`,{method:"DELETE",headers:this._headers});return this._response(s)}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"174196d6-45bd-490a-bc0e-39b0754c7da9","Content-Type":"application/json"}}).getInitialCards().then((e=>e.json())).then((e=>console.log(e))).catch((e=>{console.error(e)}))}()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUsySSxpQkFBa0IsQ0FDOUNlLE9BQVEsT0FDUlosUUFBUzlJLEtBQUs2SSxTQUNkYyxLQUFNQyxLQUFLQyxVQUFVLENBQUV0SyxPQUFNQyxXQUVqQyxPQUFPUSxLQUFLK0ksVUFBVUMsRUFDMUIsQ0FFQSxnQkFBTW1CLENBQVVDLEdBQWEsSUFBWixPQUFFQyxHQUFRRCxFQUN2QixNQUFNcEIsUUFBWU8sTUFBTSxHQUFHdkosS0FBSzJJLGtCQUFrQjBCLElBQVUsQ0FDeERYLE9BQVEsU0FDUlosUUFBUzlJLEtBQUs2SSxXQUVsQixPQUFPN0ksS0FBSytJLFVBQVVDLEVBQzFCLENBRUEsYUFBTXNCLENBQU9DLEdBQWEsSUFBWixPQUFFRixHQUFRRSxFQUNwQixNQUFNdkIsUUFBWU8sTUFBTSxHQUFHdkosS0FBSzJJLHdCQUF3QjBCLElBQVUsQ0FDOURYLE9BQVEsTUFDUlosUUFBUzlJLEtBQUs2SSxXQUVsQixPQUFPN0ksS0FBSytJLFVBQVVDLEVBQzFCLENBRUEsZ0JBQU13QixDQUFVQyxHQUFhLElBQVosT0FBRUosR0FBUUksRUFDdkIsTUFBTXpCLFFBQVlPLE1BQU0sR0FBR3ZKLEtBQUsySSxrQkFBa0IwQixVQUFnQixDQUM5RFgsT0FBUSxTQUNSWixRQUFTOUksS0FBSzZJLFdBRWxCLE9BQU83SSxLQUFLK0ksVUFBVUMsRUFDMUIsR0pvQmdCLENBQ2hCSixRQUFTLGtEQUNURSxRQUFTLENBQ1A0QixjQUFlLHVDQUNmLGVBQWdCLHNCQUlsQnBCLGtCQUNDcUIsTUFBTTNCLEdBQWdCQSxFQUFJRSxTQUMxQnlCLE1BQUszQixHQUFPNEIsUUFBUUMsSUFBSTdCLEtBQ3hCOEIsT0FBT0MsSUFDSkgsUUFBUUksTUFBTUQsRUFBSSxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdHJpcGxldGVuL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3RyaXBsZXRlbi93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3RyaXBsZXRlbi93ZWJwYWNrL3J1bnRpbWUvcHVibGljUGF0aCIsIndlYnBhY2s6Ly90cmlwbGV0ZW4vd2VicGFjay9ydW50aW1lL2pzb25wIGNodW5rIGxvYWRpbmciLCJ3ZWJwYWNrOi8vdHJpcGxldGVuLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly90cmlwbGV0ZW4vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3RyaXBsZXRlbi8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vdHJpcGxldGVuLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vdHJpcGxldGVuLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly90cmlwbGV0ZW4vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdHJpcGxldGVuLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vdHJpcGxldGVuLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly90cmlwbGV0ZW4vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly90cmlwbGV0ZW4vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbi8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBfX3dlYnBhY2tfbW9kdWxlc19fO1xuXG4iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmosIHByb3ApIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApOyB9IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmIgPSBkb2N1bWVudC5iYXNlVVJJIHx8IHNlbGYubG9jYXRpb24uaHJlZjtcblxuLy8gb2JqZWN0IHRvIHN0b3JlIGxvYWRlZCBhbmQgbG9hZGluZyBjaHVua3Ncbi8vIHVuZGVmaW5lZCA9IGNodW5rIG5vdCBsb2FkZWQsIG51bGwgPSBjaHVuayBwcmVsb2FkZWQvcHJlZmV0Y2hlZFxuLy8gW3Jlc29sdmUsIHJlamVjdCwgUHJvbWlzZV0gPSBjaHVuayBsb2FkaW5nLCAwID0gY2h1bmsgbG9hZGVkXG52YXIgaW5zdGFsbGVkQ2h1bmtzID0ge1xuXHQxNzk6IDBcbn07XG5cbi8vIG5vIGNodW5rIG9uIGRlbWFuZCBsb2FkaW5nXG5cbi8vIG5vIHByZWZldGNoaW5nXG5cbi8vIG5vIHByZWxvYWRlZFxuXG4vLyBubyBITVJcblxuLy8gbm8gSE1SIG1hbmlmZXN0XG5cbi8vIG5vIG9uIGNodW5rcyBsb2FkZWRcblxuLy8gbm8ganNvbnAgZnVuY3Rpb24iLCJjb25zdCBsYWdvRGlCcmFpZXNJbWFnZSA9IG5ldyBVUkwoXCIuLi9pbWFnZXMvbGFnby5qcGdcIiwgaW1wb3J0Lm1ldGEudXJsKTtcbmNvbnN0IHZhbm9pc2VOYXRpb25hbFBhcmtJbWFnZSA9IG5ldyBVUkwoXCIuLi9pbWFnZXMvdmFub2lzZS5qcGdcIiwgaW1wb3J0Lm1ldGEudXJsKTtcbmNvbnN0IGxha2VMb3Vpc2VJbWFnZSA9IG5ldyBVUkwoXCIuLi9pbWFnZXMvbGFrZS1sb3Vpc2UuanBnXCIsIGltcG9ydC5tZXRhLnVybCk7XG5jb25zdCBsYXRlbWFySW1hZ2UgPSBuZXcgVVJMKFwiLi4vaW1hZ2VzL2xhdGVtYXIuanBnXCIsIGltcG9ydC5tZXRhLnVybCk7XG5jb25zdCBiYWxkTW91bnRhaW5zSW1hZ2UgPSBuZXcgVVJMKFwiLi4vaW1hZ2VzL2JhbGQtbW91bnRhaW5zLmpwZ1wiLCBpbXBvcnQubWV0YS51cmwpO1xuY29uc3QgeW9zZW1pdGVWYWxsZXlJbWFnZSA9IG5ldyBVUkwoXCIuLi9pbWFnZXMveW9zZW1pdGUuanBnXCIsIGltcG9ydC5tZXRhLnVybCk7XG5cbmV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gICAge1xuICAgICAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXG4gICAgICAgIGxpbms6IGxhZ29EaUJyYWllc0ltYWdlXG4gICAgfSxcbiAgICB7XG4gICAgICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXG4gICAgICAgIGxpbms6IHZhbm9pc2VOYXRpb25hbFBhcmtJbWFnZVxuICAgIH0sXG4gICAge1xuICAgICAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXG4gICAgICAgIGxpbms6IGxha2VMb3Vpc2VJbWFnZVxuICAgIH0sXG4gICAge1xuICAgICAgICBuYW1lOiBcIkxhdGVtYXJcIixcbiAgICAgICAgbGluazogbGF0ZW1hckltYWdlXG4gICAgfSxcbiAgICB7XG4gICAgICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcbiAgICAgICAgbGluazogYmFsZE1vdW50YWluc0ltYWdlXG4gICAgfSxcbiAgICB7XG4gICAgICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXG4gICAgICAgIGxpbms6IHlvc2VtaXRlVmFsbGV5SW1hZ2VcbiAgICB9XG5dO1xuXG5leHBvcnQgY29uc3QgZm9ybVZhbGlkYXRpb25Db25maWcgPSB7XG4gICAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXG4gICAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19idXR0b25cIixcbiAgICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25fZGlzYWJsZWRcIixcbiAgICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X3R5cGVfZXJyb3JcIixcbiAgICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvcl92aXNpYmxlXCIsXG4gICAgZm9ybVNlbGVjdG9yOiBcImZvcm1cIixcbn07XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RvcnMgPSB7XG4gICAgY2FyZHNMaXN0OiAnLmNhcmRzX19saXN0JyxcbiAgICBjYXJkVGVtcGxhdGU6ICcjY2FyZC10ZW1wbGF0ZScsXG4gICAgcHJldmlld1BvcHVwOiAnI2ltYWdlLW1vZGFsJyxcbiAgICBlZGl0Rm9ybVBvcHVwOiAnI2VkaXQtbW9kYWwnLFxuICAgIGFkZEZvcm1Qb3B1cDogJyNhZGQtbW9kYWwnLFxuICAgIHByb2ZpbGVUaXRsZTogJy5wcm9maWxlX190aXRsZScsXG4gICAgcHJvZmlsZURlc2NyaXB0aW9uOiAnLnByb2ZpbGVfX2Rlc2NyaXB0aW9uJyxcbiAgICBmb3JtTW9kYWxDb250YWluZXI6ICcubW9kYWxfX2NvbnRhaW5lcicsXG4gICAgaW1hZ2VNb2RhbENvbnRhaW5lcjogJy5tb2RhbF9fY29udGFpbmVyLWltYWdlJyxcbiAgICBmb3JtSW5wdXROYW1lOiAnI3Byb2ZpbGUtaW5wdXQtbmFtZScsXG4gICAgZm9ybUlucHV0RGVzY3JpcHRpb246ICcjcHJvZmlsZS1pbnB1dC1kZXNjcmlwdGlvbicsXG59OyIsImNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihkYXRhLCBoYW5kbGVJbWFnZUNsaWNrLCBoYW5kbGVMaWtlQnV0dG9uLCBoYW5kbGVEZWxldGVMaWtlLCBjYXJkU2VsZWN0b3IpIHtcbiAgICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XG4gICAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xuICAgICAgdGhpcy5fY2FyZElkID0gZGF0YS5faWQ7XG5cbiAgICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcbiAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xuICAgICAgdGhpcy5faGFuZGxlTGlrZUJ1dHRvbiA9IGhhbmRsZUxpa2VCdXR0b247XG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGVMaWtlID0gaGFuZGxlRGVsZXRlTGlrZTtcbiAgICB9XG4gICAgXG4gICAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuXG4gICAgICAvL2xpa2UgYnV0dG9uXG4gICAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpO1xuICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuX2hhbmRsZUxpa2VCdXR0b24odGhpcy5fY2FyZElkKSk7XG5cbiAgICAgIC8vdHJhc2ggYnV0dG9uXG4gICAgICBjb25zdCB0cmFzaEJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX3RyYXNoLWJ1dHRvbicpO1xuICAgICAgdHJhc2hCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLl9oYW5kbGVEZWxldGUodGhpcy5fY2FyZElkKSk7XG5cbiAgICAgIC8vaW1hZ2UgbW9kYWwgY2xpY2tcbiAgICAgIHRoaXMuX2ltYWdlTW9kYWwgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19pbWFnZScpO1xuICAgICAgdGhpcy5faW1hZ2VNb2RhbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuX2hhbmRsZUltYWdlQ2xpY2soe2xpbms6IHRoaXMuX2xpbmssIG5hbWU6IHRoaXMuX25hbWV9KSk7XG4gICAgfVxuXG4gICAgX2dldFRlbXBsYXRlKCkge1xuICAgICAgcmV0dXJuIGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgfVxuXG4gICAgaGFuZGxlTGlrZSA9ICgpID0+IHtcbiAgICAgIHRoaXMuX2xpa2VCdXR0b25cbiAgICAgICAgLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XG4gICAgfVxuXG4gICAgX2hhbmRsZURlbGV0ZSgpIHtcbiAgICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XG4gICAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcbiAgICB9XG5cbiAgICBnZW5lcmF0ZUNhcmQoKSB7XG4gICAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcblxuICAgICAgY29uc3QgY2FyZEltYWdlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xuICAgICAgY2FyZEltYWdlLnNyYyA9IHRoaXMuX2xpbms7XG4gICAgICBjYXJkSW1hZ2UuYWx0ID0gdGhpcy5fbmFtZTtcblxuICAgICAgY29uc3QgY2FyZFRpdGxlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xuICAgICAgY2FyZFRpdGxlLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcblxuICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XG4gICAgfVxuICB9XG5cbmV4cG9ydCBkZWZhdWx0IENhcmQ7IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gICAgY29uc3RydWN0b3IoY29uZmlnLCBmb3JtRWxlbWVudCkge1xuICAgICAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gY29uZmlnLmlucHV0U2VsZWN0b3I7XG4gICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuICAgICAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3M7XG4gICAgICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IGNvbmZpZy5pbnB1dEVycm9yQ2xhc3M7XG4gICAgICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBjb25maWcuZXJyb3JDbGFzcztcblxuICAgICAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xuICAgICAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpO1xuICAgIH1cblxuICAgIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKVxuICAgICAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgICAgICBlcnJvck1lc3NhZ2VFbGVtZW50LnRleHRDb250ZW50ID0gaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlO1xuICAgICAgICBlcnJvck1lc3NhZ2VFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XG4gICAgfVxuXG4gICAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2VFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApXG4gICAgICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgICAgIGVycm9yTWVzc2FnZUVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xuICAgICAgICBlcnJvck1lc3NhZ2VFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XG4gICAgfVxuXG4gICAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcbiAgICAgICAgaWYoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9oYXNJbnZhbGlkSW5wdXQoKSB7XG4gICAgICAgIHJldHVybiAhdGhpcy5faW5wdXRFbGVtZW50cy5ldmVyeSgoaW5wdXRFbGVtZW50KSA9PiBpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpO1xuICAgIH1cblxuICAgIGRpc2FibGVCdXR0b24oKSB7XG4gICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIF9lbmFibGVCdXR0b24oKSB7XG4gICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XG4gICAgICAgIGlmKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XG4gICAgICAgICAgICB0aGlzLmRpc2FibGVCdXR0b24oKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2VuYWJsZUJ1dHRvbigpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICB0aGlzLl9pbnB1dEVsZW1lbnRzID0gWy4uLnRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcildO1xuICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcblxuICAgICAgICB0aGlzLl9pbnB1dEVsZW1lbnRzLmZvckVhY2goaW5wdXRFbGVtZW50ID0+IHtcbiAgICAgICAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgICAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZSkgPT4ge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdGhpcy5kaXNhYmxlQnV0dG9uKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKClcbiAgICB9XG5cbiAgICByZXNldFZhbGlkYXRpb24oKSB7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG5cbiAgICAgICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KVxuICAgICAgICB9KTtcbiAgICB9XG5cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IgfSkge1xuICAgICAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gICAgICAgIHRoaXMuX2Nsb3NlQnV0dG9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLm1vZGFsX19jbG9zZScpO1xuICAgIH1cblxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQpID0+IHtcbiAgICAgICAgICAgIGlmIChldnQudGFyZ2V0ID09PSBldnQuY3VycmVudFRhcmdldCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5fY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmNsb3NlKCkpO1xuICAgIH1cblxuICAgIG9wZW4oKSB7XG4gICAgICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoJ21vZGFsX29wZW5lZCcpO1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICAgIH1cblxuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKCdtb2RhbF9vcGVuZWQnKTtcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgICB9XG5cbiAgICBfaGFuZGxlRXNjQ2xvc2UgPSAoZXZ0KSA9PiB7XG4gICAgICAgIGlmKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfVxuICAgIH1cbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVBZGRDYXJkRm9ybVN1Ym1pdCkge1xuICAgICAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XG4gICAgICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2Zvcm0nKTtcbiAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLm1vZGFsX19idXR0b24nKTtcbiAgICAgICAgdGhpcy5fZm9ybUlucHV0cyA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0Jyk7XG4gICAgICAgIHRoaXMuX2hhbmRsZUFkZENhcmRGb3JtU3VibWl0ID0gaGFuZGxlQWRkQ2FyZEZvcm1TdWJtaXQ7XG4gICAgfVxuXG4gICAgX2dldElucHV0VmFsdWVzKCkge1xuICAgICAgICBjb25zdCBpbnB1dE9iamVjdCA9IHt9O1xuXG4gICAgICAgIHRoaXMuX2Zvcm1JbnB1dHMuZm9yRWFjaChpbnB1dCA9PiB7XG4gICAgICAgICAgICBpbnB1dE9iamVjdFtpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgICAgICB9KVxuXG4gICAgICAgIHJldHVybiBpbnB1dE9iamVjdDtcbiAgICB9XG5cbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgICAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9oYW5kbGVBZGRDYXJkRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy5fZm9ybS5yZXNldCgpXG4gICAgICAgIHN1cGVyLmNsb3NlKCk7ICAgICAgICBcbiAgICB9XG59IiwiaW1wb3J0IHsgZm9ybVZhbGlkYXRpb25Db25maWcsIGluaXRpYWxDYXJkcywgc2VsZWN0b3JzIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuaW1wb3J0IFN0eWxlcyBmcm9tIFwiLi9pbmRleC5jc3NcIjtcblxuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcbmltcG9ydCBBcGkgZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpLmpzXCI7XG5cbmNvbnN0IGVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fZWRpdC1idXR0b24nKTtcbmNvbnN0IGFkZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hZGQtYnV0dG9uJyk7XG5cbmNvbnN0IGFkZE5ld0NhcmRGb3JtID0gZG9jdW1lbnQuZm9ybXNbJ2NhcmQtZm9ybSddO1xuY29uc3QgcHJvZmlsZUVkaXRGb3JtID0gZG9jdW1lbnQuZm9ybXNbJ3Byb2ZpbGUtZm9ybSddO1xuXG5jb25zdCBwcm9maWxlTmFtZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Byb2ZpbGUtaW5wdXQtbmFtZScpO1xuY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcHJvZmlsZS1pbnB1dC1kZXNjcmlwdGlvbicpO1xuXG4vLyB2YWxpZGF0aW9uXG5jb25zdCBmb3JtVmFsaWRhdG9ycyA9IHt9O1xuXG5jb25zdCBlbmFibGVWYWxpZGF0aW9uID0gKGZvcm1WYWxpZGF0aW9uQ29uZmlnKSA9PiB7XG4gICAgY29uc3QgZm9ybUxpc3QgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoZm9ybVZhbGlkYXRpb25Db25maWcuZm9ybVNlbGVjdG9yKSk7XG5cbiAgICBmb3JtTGlzdC5mb3JFYWNoKChmb3JtRWxlbWVudCkgPT4ge1xuICAgICAgIGNvbnN0IHZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGZvcm1WYWxpZGF0aW9uQ29uZmlnLCBmb3JtRWxlbWVudCk7XG4gICAgICAgY29uc3QgZm9ybU5hbWUgPSBmb3JtRWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpOyBcblxuICAgICAgIGZvcm1WYWxpZGF0b3JzW2Zvcm1OYW1lXSA9IHZhbGlkYXRvcjtcbiAgICAgICB2YWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuICAgIH0pO1xufVxuXG5lbmFibGVWYWxpZGF0aW9uKGZvcm1WYWxpZGF0aW9uQ29uZmlnKTtcblxuLy9Qb3B1cFdpdGhJbWFnZVxuY29uc3QgcG9wdXBJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZShzZWxlY3RvcnMucHJldmlld1BvcHVwKTtcbnBvcHVwSW1hZ2UuY2xvc2UoKTtcblxuLy8gLy9yZW5kZXJpbmcgY2FyZFxuZnVuY3Rpb24gcmVuZGVyQ2FyZChkYXRhKSB7XG4gICAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKHsgZGF0YSwgaGFuZGxlSW1hZ2VDbGljazogKGltYWdlRGF0YSkgPT4ge1xuICAgICAgICBwb3B1cEltYWdlLm9wZW4oaW1hZ2VEYXRhKTtcbiAgICB9fSwgc2VsZWN0b3JzLmNhcmRUZW1wbGF0ZSk7XG5cbiAgICByZXR1cm4gY2FyZC5nZW5lcmF0ZUNhcmQoKTtcbn07XG5cbmNvbnN0IGNhcmRTZWN0aW9uID0gbmV3IFNlY3Rpb24oXG4gICAge1xuICAgICAgICBpdGVtczogaW5pdGlhbENhcmRzLFxuICAgICAgICByZW5kZXJlcjogKGRhdGEpID0+IHtcbiAgICAgICAgICAgY29uc3QgY2FyZEVsID0gcmVuZGVyQ2FyZChkYXRhKTtcbiAgICAgICAgICAgY2FyZFNlY3Rpb24uYWRkSXRlbShjYXJkRWwpO1xuICAgICAgICB9LFxuICAgIH0sXG4gICAgc2VsZWN0b3JzLmNhcmRzTGlzdFxuKTtcblxuY2FyZFNlY3Rpb24ucmVuZGVySXRlbXMoaW5pdGlhbENhcmRzKTtcblxuLy8gQWRkaW5nIE5ldyBDYXJkIEZvcm1cbmNvbnN0IGFkZENhcmRGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0oc2VsZWN0b3JzLmFkZEZvcm1Qb3B1cCwgKGRhdGEpID0+IHtcbiAgICBjb25zdCBuZXdDYXJkRGF0YSA9IHtcbiAgICAgICAgbmFtZTogZGF0YS5uYW1lLFxuICAgICAgICBsaW5rOiBkYXRhLmxpbmssXG4gICAgfVxuICAgIGNvbnN0IG5ld0NhcmQgPSByZW5kZXJDYXJkKG5ld0NhcmREYXRhKTtcbiAgICBhZGRDYXJkRm9ybS5jbG9zZSgpO1xuICAgIGNhcmRTZWN0aW9uLmFkZEl0ZW0obmV3Q2FyZCk7XG59KTtcblxuYWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIGZvcm1WYWxpZGF0b3JzW2FkZE5ld0NhcmRGb3JtLmdldEF0dHJpYnV0ZSgnbmFtZScpXS5yZXNldFZhbGlkYXRpb24oKTtcbiAgICBhZGRDYXJkRm9ybS5vcGVuKCk7XG59KVxuXG5hZGRDYXJkRm9ybS5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vL1VzZXJJbmZvXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyhzZWxlY3RvcnMucHJvZmlsZVRpdGxlLCBzZWxlY3RvcnMucHJvZmlsZURlc2NyaXB0aW9uKTtcblxuY29uc3QgZWRpdEZvcm1Qb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHNlbGVjdG9ycy5lZGl0Rm9ybVBvcHVwLCAoaW5wdXQpID0+IHtcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyhpbnB1dC5uYW1lLCBpbnB1dC5kZXNjcmlwdGlvbilcbiAgICBlZGl0Rm9ybVBvcHVwLmNsb3NlKCk7XG59KTtcblxuLy9FZGl0IFByb2ZpbGUgRm9ybVxuZWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBjb25zdCBwcm9maWxlSW5mbyA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XG5cbiAgICBwcm9maWxlTmFtZUlucHV0LnZhbHVlID0gcHJvZmlsZUluZm8ubmFtZTtcbiAgICBwcm9maWxlRGVzY3JpcHRpb25JbnB1dC52YWx1ZSA9IHByb2ZpbGVJbmZvLmRlc2NyaXB0aW9uO1xuXG4gICAgZm9ybVZhbGlkYXRvcnNbcHJvZmlsZUVkaXRGb3JtLmdldEF0dHJpYnV0ZSgnbmFtZScpXS5kaXNhYmxlQnV0dG9uKCk7XG4gICAgICAgICAgICBcbiAgICBlZGl0Rm9ybVBvcHVwLm9wZW4oKTtcbn0pXG5cbmVkaXRGb3JtUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy9BUEkgXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcbiAgICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxXCIsXG4gICAgaGVhZGVyczoge1xuICAgICAgYXV0aG9yaXphdGlvbjogXCIxNzQxOTZkNi00NWJkLTQ5MGEtYmMwZS0zOWIwNzU0YzdkYTlcIixcbiAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgfVxufSk7XG5cbmFwaS5nZXRJbml0aWFsQ2FyZHMoKVxuICAgIC50aGVuKChyZXMpID0+IHtyZXR1cm4gcmVzLmpzb24oKX0pXG4gICAgLnRoZW4ocmVzID0+IGNvbnNvbGUubG9nKHJlcykpXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIpOyAvLyBsb2cgdGhlIGVycm9yIHRvIHRoZSBjb25zb2xlXG4gICAgfSk7XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgICAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XG4gICAgICAgIHRoaXMuX21vZGFsTmFtZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9fbmFtZScpO1xuICAgICAgICB0aGlzLl9tb2RhbEltYWdlID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLm1vZGFsX19pbWFnZScpO1xuXG4gICAgICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgfVxuXG4gICAgb3BlbihpbWFnZURhdGEpIHtcbiAgICAgICAgdGhpcy5fbW9kYWxOYW1lLnRleHRDb250ZW50ID0gaW1hZ2VEYXRhLm5hbWU7XG4gICAgICAgIHRoaXMuX21vZGFsSW1hZ2UuYWx0ID0gaW1hZ2VEYXRhLm5hbWU7XG4gICAgICAgIHRoaXMuX21vZGFsSW1hZ2Uuc3JjID0gaW1hZ2VEYXRhLmxpbms7XG5cbiAgICAgICAgc3VwZXIub3BlbigpO1xuICAgIH1cbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjYXJkU2VsZWN0b3IpIHtcbiAgICAgICAgdGhpcy5faXRlbXMgPSBpdGVtcztcbiAgICAgICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICAgICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihjYXJkU2VsZWN0b3IpO1xuICAgIH1cblxuICAgIHJlbmRlckl0ZW1zKCkge1xuICAgICAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgICAgIHRoaXMuX2NhcmRTZWxlY3Rvci5wcmVwZW5kKGVsZW1lbnQpO1xuICAgIH1cbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gICAgY29uc3RydWN0b3IobmFtZUVsLCBkZXNjcmlwdGlvbkVsLCBhdmF0YXIpIHtcbiAgICAgICAgdGhpcy5fbmFtZUVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lRWwpO1xuICAgICAgICB0aGlzLl9kZXNjcmlwdGlvbkVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihkZXNjcmlwdGlvbkVsKTtcbiAgICAgICAgdGhpcy5fbGluayA9IGF2YXRhcjtcbiAgICB9XG5cbiAgICBnZXRVc2VySW5mbygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG5hbWU6IHRoaXMuX25hbWVFbC50ZXh0Q29udGVudCxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLl9kZXNjcmlwdGlvbkVsLnRleHRDb250ZW50LFxuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2V0VXNlckluZm8obmFtZSwgZGVzY3JpcHRpb24pIHtcbiAgICAgICAgdGhpcy5fbmFtZUVsLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICAgICAgdGhpcy5fZGVzY3JpcHRpb25FbC50ZXh0Q29udGVudCA9IGRlc2NyaXB0aW9uO1xuICAgIH1cblxuICAgIHNldEF2YXRhckltYWdlKGxpbmspIHtcbiAgICAgICAgdGhpcy5fbGluay5zcmMgPSBsaW5rO1xuICAgIH1cbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5fYmFzZVVybCA9IG9wdGlvbnMuYmFzZVVybDtcbiAgICAgICAgdGhpcy5faGVhZGVycyA9IG9wdGlvbnMuaGVhZGVycztcbiAgICB9XG4gIFxuICAgIF9yZXNwb25zZSA9IChyZXMpID0+IHtcbiAgICAgICAgaWYocmVzLm9rKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICB9XG5cbiAgICBhc3luYyBnZXRJbml0aWFsQ2FyZHMoKSB7XG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICByZXR1cm4gdGhpcy5fcmVzcG9uc2UocmVzKTtcbiAgICB9XG4gICAgICBcbiAgICBhc3luYyBnZXRVc2VySW5mbygpIHtcbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Jlc3BvbnNlKHJlcyk7XG4gICAgfVxuXG4gICAgYXN5bmMgZWRpdFByb2ZpbGUoeyBuYW1lLCBhYm91dCB9KSB7XG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBuYW1lLCBhYm91dCB9KSxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZXNwb25zZShyZXMpO1xuICAgIH1cblxuICAgIGFzeW5jIGVkaXRQcm9maWxlQXZhdGFyKHsgbGluayB9KSB7XG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgYXZhdGFyOiBsaW5rIH0pLFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Jlc3BvbnNlKHJlcyk7XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0QWxsQ2FyZHMoKSB7XG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZXNwb25zZShyZXMpO1xuICAgIH1cblxuICAgIGFzeW5jIGFkZE5ld0NhcmQoeyBuYW1lLCBsaW5rIH0pIHtcbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgbmFtZSwgbGluayB9KSxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZXNwb25zZShyZXMpO1xuICAgIH1cblxuICAgIGFzeW5jIGRlbGV0ZUNhcmQoeyBjYXJkSWQgfSkge1xuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH1gLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Jlc3BvbnNlKHJlcyk7XG4gICAgfVxuXG4gICAgYXN5bmMgYWRkTGlrZSh7IGNhcmRJZCB9KSB7XG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzL2xpa2VzLyR7Y2FyZElkfWAsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVzcG9uc2UocmVzKTtcbiAgICB9XG5cbiAgICBhc3luYyBkZWxldGVMaWtlKHsgY2FyZElkIH0pIHtcbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZXNwb25zZShyZXMpO1xuICAgIH1cbiAgfSJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJ1bmRlZmluZWQiLCJleHBvcnRzIiwibW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsIm0iLCJvIiwib2JqIiwicHJvcCIsIk9iamVjdCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsInAiLCJiIiwiZG9jdW1lbnQiLCJiYXNlVVJJIiwic2VsZiIsImxvY2F0aW9uIiwiaHJlZiIsImluaXRpYWxDYXJkcyIsIm5hbWUiLCJsaW5rIiwiVVJMIiwiY29uc3RydWN0b3IiLCJkYXRhIiwiaGFuZGxlSW1hZ2VDbGljayIsImhhbmRsZUxpa2VCdXR0b24iLCJoYW5kbGVEZWxldGVMaWtlIiwiY2FyZFNlbGVjdG9yIiwidGhpcyIsIl9uYW1lIiwiX2xpbmsiLCJfY2FyZElkIiwiX2lkIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX2hhbmRsZUxpa2VCdXR0b24iLCJfaGFuZGxlRGVsZXRlTGlrZSIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9saWtlQnV0dG9uIiwiX2VsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVEZWxldGUiLCJfaW1hZ2VNb2RhbCIsIl9nZXRUZW1wbGF0ZSIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJoYW5kbGVMaWtlIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwicmVtb3ZlIiwiZ2VuZXJhdGVDYXJkIiwiY2FyZEltYWdlIiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJGb3JtVmFsaWRhdG9yIiwiY29uZmlnIiwiZm9ybUVsZW1lbnQiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfZm9ybUVsZW1lbnQiLCJfaW5wdXRMaXN0IiwicXVlcnlTZWxlY3RvckFsbCIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWxlbWVudCIsImVycm9yTWVzc2FnZUVsZW1lbnQiLCJpZCIsImFkZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hpZGVJbnB1dEVycm9yIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGFzSW52YWxpZElucHV0IiwiX2lucHV0RWxlbWVudHMiLCJldmVyeSIsImRpc2FibGVCdXR0b24iLCJfc3VibWl0QnV0dG9uIiwiZGlzYWJsZWQiLCJfZW5hYmxlQnV0dG9uIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiZm9yRWFjaCIsImVuYWJsZVZhbGlkYXRpb24iLCJlIiwicHJldmVudERlZmF1bHQiLCJyZXNldFZhbGlkYXRpb24iLCJQb3B1cCIsIl9yZWYiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwIiwiX2Nsb3NlQnV0dG9uIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJldnQiLCJ0YXJnZXQiLCJjdXJyZW50VGFyZ2V0IiwiY2xvc2UiLCJvcGVuIiwiX2hhbmRsZUVzY0Nsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImtleSIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVBZGRDYXJkRm9ybVN1Ym1pdCIsInN1cGVyIiwiX2Zvcm0iLCJfZm9ybUlucHV0cyIsIl9oYW5kbGVBZGRDYXJkRm9ybVN1Ym1pdCIsIl9nZXRJbnB1dFZhbHVlcyIsImlucHV0T2JqZWN0IiwiaW5wdXQiLCJ2YWx1ZSIsInJlc2V0IiwiZWRpdEJ1dHRvbiIsImFkZEJ1dHRvbiIsImFkZE5ld0NhcmRGb3JtIiwiZm9ybXMiLCJwcm9maWxlRWRpdEZvcm0iLCJwcm9maWxlTmFtZUlucHV0IiwicHJvZmlsZURlc2NyaXB0aW9uSW5wdXQiLCJmb3JtVmFsaWRhdG9ycyIsImZvcm1WYWxpZGF0aW9uQ29uZmlnIiwiZm9ybVNlbGVjdG9yIiwiQXJyYXkiLCJmcm9tIiwidmFsaWRhdG9yIiwiZm9ybU5hbWUiLCJnZXRBdHRyaWJ1dGUiLCJwb3B1cEltYWdlIiwiX21vZGFsTmFtZSIsIl9tb2RhbEltYWdlIiwiaW1hZ2VEYXRhIiwicmVuZGVyQ2FyZCIsIkNhcmQiLCJjYXJkU2VjdGlvbiIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJyZW5kZXJJdGVtcyIsIml0ZW0iLCJhZGRJdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJjYXJkRWwiLCJhZGRDYXJkRm9ybSIsIm5ld0NhcmQiLCJ1c2VySW5mbyIsIm5hbWVFbCIsImRlc2NyaXB0aW9uRWwiLCJhdmF0YXIiLCJfbmFtZUVsIiwiX2Rlc2NyaXB0aW9uRWwiLCJnZXRVc2VySW5mbyIsImRlc2NyaXB0aW9uIiwic2V0VXNlckluZm8iLCJzZXRBdmF0YXJJbWFnZSIsImVkaXRGb3JtUG9wdXAiLCJwcm9maWxlSW5mbyIsIm9wdGlvbnMiLCJfYmFzZVVybCIsImJhc2VVcmwiLCJfaGVhZGVycyIsImhlYWRlcnMiLCJfcmVzcG9uc2UiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiZ2V0SW5pdGlhbENhcmRzIiwiZmV0Y2giLCJlZGl0UHJvZmlsZSIsImFib3V0IiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJlZGl0UHJvZmlsZUF2YXRhciIsIl9yZWYyIiwiZ2V0QWxsQ2FyZHMiLCJhZGROZXdDYXJkIiwiX3JlZjMiLCJkZWxldGVDYXJkIiwiX3JlZjQiLCJjYXJkSWQiLCJhZGRMaWtlIiwiX3JlZjUiLCJkZWxldGVMaWtlIiwiX3JlZjYiLCJhdXRob3JpemF0aW9uIiwidGhlbiIsImNvbnNvbGUiLCJsb2ciLCJjYXRjaCIsImVyciIsImVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==