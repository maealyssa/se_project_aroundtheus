!function(){"use strict";var e={960:function(e,t,s){e.exports=s.p+"190142da37235e3079a8.jpg"},291:function(e,t,s){e.exports=s.p+"9aed7cb3f54c0faa1f9f.jpg"},822:function(e,t,s){e.exports=s.p+"0fb96793ab89da938a7d.jpg"},328:function(e,t,s){e.exports=s.p+"395d21149564d1293c88.jpg"},705:function(e,t,s){e.exports=s.p+"a22751dd8a0e22ceb5f6.jpg"},561:function(e,t,s){e.exports=s.p+"0df918d480d675e4708e.jpg"}},t={};function s(i){var n=t[i];if(void 0!==n)return n.exports;var r=t[i]={exports:{}};return e[i](r,r.exports,s),r.exports}s.m=e,s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s.b=document.baseURI||self.location.href,function(){new URL(s(291),s.b),new URL(s(705),s.b),new URL(s(822),s.b),new URL(s(328),s.b),new URL(s(960),s.b),new URL(s(561),s.b);var e=class{constructor(e,t,s,i,n){this._name=e.name,this._link=e.link,this._cardId=e._id,this._isLiked=e.isLiked,this._cardSelector=i,this._handleImageClick=t,this._handleDelete=s,this._setIsLiked=n}_setEventListeners(){this._likeButton=this._element.querySelector(".card__like-button"),this._likeButton.addEventListener("click",(()=>this._setIsLiked(this))),this._element.querySelector(".card__trash-button").addEventListener("click",(()=>this._handleDelete)),this._imageModal=this._element.querySelector(".card__image"),this._imageModal.addEventListener("click",(()=>this._handleImageClick({link:this._link,name:this._name})))}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}_handleLike(){this._isLiked?this._likeButton.classList.add("card__like-button_active"):this._likeButton.classList.remove("card__like-button_active")}isLiked(){return this._isLiked}deleteCard(){this._element.remove(),this._element=null}generateCard(){this._element=this._getTemplate();const e=this._element.querySelector(".card__image");return e.src=this._link,e.alt=this._name,this._element.querySelector(".card__title").textContent=this._name,this._setEventListeners(),this._handleLike(),this._element}getCardId(){return this._cardId}};class t{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=t,this._inputList=this._formElement.querySelectorAll(this._inputSelector)}_showInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_hasInvalidInput(){return!this._inputElements.every((e=>e.validity.valid))}disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}_enableButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_toggleButtonState(){this._hasInvalidInput()?this.disableButton():this._enableButton()}_setEventListeners(){this._inputElements=[...this._formElement.querySelectorAll(this._inputSelector)],this._submitButton=this._formElement.querySelector(this._submitButtonSelector),this._inputElements.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault(),this.disableButton()})),this._setEventListeners()}resetValidation(){this._toggleButtonState(),this._inputList.forEach((e=>{this._hideInputError(e)}))}}class i{constructor(e){let{popupSelector:t}=e;this._popup=document.querySelector(t),this._closeButton=this._popup.querySelector(".modal__close")}setEventListeners(){this._popup.addEventListener("click",(e=>{e.target===e.currentTarget&&this.close()})),this._closeButton.addEventListener("click",(()=>this.close()))}open(){this._popup.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popup.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose=e=>{"Escape"===e.key&&this.close()}}class n extends i{constructor(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Saving...";super({popupSelector:e}),this._form=this._popup.querySelector(".modal__form"),this._submitButton=this._popup.querySelector(".modal__button"),this._formInputs=this._popup.querySelectorAll("input"),this._handleFormSubmit=t,this._buttonText=this._submitButton.textContent,this._loadingText=s}showLoading(){this._buttonText=this._loadingText}hideLoading(){this._buttonText=this._buttonText}_getInputValues(){const e={};return this._formInputs.forEach((t=>{e[t.name]=t.value})),e}setEventListeners(){super.setEventListeners(),this._popup.addEventListener("submit",(e=>{this._handleFormSubmit(this._getInputValues()),e.preventDefault()}))}close(){this._form.reset(),super.close()}}class r{constructor(e,t){let{items:s,renderer:i}=e;this._items=s,this._renderer=i,this._cardSelector=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this.addItem(this._renderer(e))}))}addItem(e){this._cardSelector.prepend(e)}}const o=document.querySelector(".profile__edit-button"),a=document.querySelector(".profile__add-button"),l=document.forms["card-form"],d=document.forms["profile-form"],h=document.querySelector("#profile-input-name"),c=document.querySelector("#profile-input-description"),u=new class{constructor(e){let{baseUrl:t,headers:s}=e;this._url=t,this._headers=s,this._authorization=s.authorization}_checkResponse(e){return e.ok?e.json():Promise.reject(`Error ${e.status}`)}getInitialCards(){return fetch(`${this._url}/cards`,{headers:this._headers}).then(this._checkResponse)}fetchUserInfo(){return fetch(`${this._url}/users/me`,{headers:this._headers}).then(this._checkResponse)}editProfile(e){let{name:t,description:s}=e;return fetch(`${this._url}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:s})}).then(this._checkResponse)}editProfileAvatar(e){let{link:t}=e;return fetch(`${this._url}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:t})}).then(this._checkResponse)}addNewCard(e){let{cardName:t,cardLink:s}=e;return fetch(`${this._url}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:s})}).then(this._checkResponse)}deleteCard(e){return fetch(`${this._url}/cards/${e}`,{method:"DELETE",headers:this._headers}).then(this._checkResponse)}addLike(e){return fetch(`${this._url}/cards/likes/${e}`,{method:"PUT",headers:this._headers}).then(this._checkResponse)}deleteLike(e){return fetch(`${this._url}/cards/${e}/likes`,{method:"DELETE",headers:this._headers}).then(this._checkResponse)}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"174196d6-45bd-490a-bc0e-39b0754c7da9","Content-Type":"application/json"}});let _;Promise.all([u.fetchUserInfo(),u.getInitialCards()]).then((e=>{let[t,s]=e;L.setUserInfo(t.name,t.about),L.setAvatarImage(t.avatar),_=new r({items:s,renderer:b},".cards__list"),_.renderItems()})).catch((e=>{console.log(e)}));const m=e=>{y.open(e)},p=e=>{e.isLiked()?u.deleteLike(e.getCardId()).then((t=>{e.setIsLiked(!1)})).catch((e=>{console.error(e)})):u.addLike(e.getCardId()).then((t=>{e.setIsLiked(!0)})).catch((e=>{console.error(e)}))},f=e=>{v.open((()=>{v.showLoading(),u.deleteCard(e.getCardId()).then((()=>{e.deleteCard(),v.close()})).catch((e=>{console.err(e)})).finally((()=>{v.hideLoading()}))}))},v=new class extends i{constructor(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Deleting...";super({popupSelector:e}),this._handleDelete=t,this._submitButton=this._popup.querySelector(".modal__button"),this._loadingButtonText=s}setEventListeners(){super.setEventListeners(),this._submitButton.addEventListener("click",(e=>{e.preventDefault(),this._handleDeleteCallback&&this._handleDeleteCallback()}))}open(e){this._handleDeleteCallback=e,super.open()}showLoading(){this._submitButton.textContent=this._loadingButtonText}hideLoading(){this._submitButton.textContent=this._submitButton.textContent}}("#confirm-delete-modal",(e=>{f(e)}));v.setEventListeners();const b=t=>new e(t,m,f,"#card-template",p).generateCard(),L=new class{constructor(e,t,s,i){this._nameEl=document.querySelector(e),this._descriptionEl=document.querySelector(t),this._link=document.querySelector(s),this.userId=i}getUserInfo(){return{name:this._nameEl.textContent,description:this._descriptionEl.textContent,avatar:this._link.src}}setUserInfo(e,t){this._nameEl.textContent=e,this._descriptionEl.textContent=t}setAvatarImage(e){this._link.src=e}setUserId(e){return this.userId=e,this.userId}}(".profile__title",".profile__description",".profile__avatar"),g={};var E;E={inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible",formSelector:"form"},Array.from(document.querySelectorAll(E.formSelector)).forEach((e=>{const s=new t(E,e),i=e.getAttribute("name");g[i]=s,s.enableValidation()}));const k=new n("#add-modal",(e=>{k.showLoading();const{name:t,link:s}=e;return u.addNewCard(t,s).then((e=>{const t=b(e);_.addItem(t),k.close()})).catch((e=>{console.log(e)})).finally((()=>{k.hideLoading()}))}));a.addEventListener("click",(()=>{g[l.getAttribute("name")].resetValidation(),k.open()}));const S=new n("#edit-modal",(e=>{let{title:t,description:s}=e;return S.showLoading(),u.editProfile(t,s).then((()=>{L.setUserInfo({name:t,description:s}),S.close()})).catch((e=>{console.error(e)})).finally((()=>{S.hideLoading()}))}));S.setEventListeners(),o.addEventListener("click",(()=>{const{name:e,description:t}=L.getUserInfo();h.value=e,c.value=t,g[d.getAttribute("name")].disableButton(),S.open()}));const y=new class extends i{constructor(e){super({popupSelector:e}),this._modalName=this._popup.querySelector(".modal__name"),this._modalImage=this._popup.querySelector(".modal__image"),super.setEventListeners()}open(e){this._modalName.textContent=e.name,this._modalImage.alt=e.name,this._modalImage.src=e.link,super.open()}}("#image-modal");y.close();const C=new n("#change-avatar-modal",(e=>{let{link:t}=e;return C.showLoading(),u.updateAvatar(t).then((e=>{L.setAvatarImage(e.avatar),C.close(),C.reset()})).catch((e=>{console.error(e)})).finally((()=>{C.hideLoading()}))}));C.setEventListeners()}()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFBaUJ6SCxvQkFFakJxQyxFQUFXaEcsaUJBQWlCLFNBQVMsS0FDakMsTUFBTSxLQUFFZixFQUFJLFlBQUUwSSxHQUFnQm9CLEVBQVN5QixjQUN2Q25FLEVBQWlCakIsTUFBUW5HLEVBQ3pCcUgsRUFBd0JsQixNQUFRdUMsRUFDaEMrQyxFQUFldEUsRUFBZ0I2RSxhQUFhLFNBQVNySSxnQkFDckR3SSxFQUFpQnBILE1BQU0sSUFJM0IsTUFBTXdGLEVBQWEsSUkvS0osY0FBNkJsRyxFQUN4QzdFLFdBQUFBLENBQVkrRSxHQUNSaUIsTUFBTSxDQUFFakIsa0JBQ1J6RSxLQUFLdU0sV0FBYXZNLEtBQUswRSxPQUFPMUQsY0FBYyxnQkFDNUNoQixLQUFLd00sWUFBY3hNLEtBQUswRSxPQUFPMUQsY0FBYyxpQkFFN0MwRSxNQUFNZCxtQkFDVixDQUVBSyxJQUFBQSxDQUFLdUYsR0FDRHhLLEtBQUt1TSxXQUFXeEssWUFBY3lJLEVBQVV0SyxLQUN4Q0YsS0FBS3dNLFlBQVkxSyxJQUFNMEksRUFBVXRLLEtBQ2pDRixLQUFLd00sWUFBWTNLLElBQU0ySSxFQUFVcEssS0FFakNzRixNQUFNVCxNQUNWLEdWNkJjLGdCTW9JbEJ3RixFQUFXekYsUUFHWCxNQWdCTXlILEVBQW9CLElBQUlwSCxFTjdJUCx3Qk02SEk4RCxJQUFjLElBQWIsS0FBRS9JLEdBQU0rSSxFQUVoQyxPQURBc0QsRUFBa0J6RyxjQUNYd0IsRUFBSWtGLGFBQWF0TSxHQUNuQm9JLE1BQU03SSxJQUNIcUssRUFBU0UsZUFBZXZLLEVBQUt5SixRQUM3QnFELEVBQWtCekgsUUFDbEJ5SCxFQUFrQm5HLE9BQU8sSUFFNUI4RCxPQUFPQyxJQUNKQyxRQUFRSyxNQUFNTixFQUFJLElBRXJCUSxTQUFRLEtBQ0w0QixFQUFrQnhHLGFBQWEsR0FDakMsSUFJVndHLEVBQWtCN0gsbUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90cmlwbGV0ZW4vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vdHJpcGxldGVuL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vdHJpcGxldGVuL3dlYnBhY2svcnVudGltZS9wdWJsaWNQYXRoIiwid2VicGFjazovL3RyaXBsZXRlbi93ZWJwYWNrL3J1bnRpbWUvanNvbnAgY2h1bmsgbG9hZGluZyIsIndlYnBhY2s6Ly90cmlwbGV0ZW4vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3RyaXBsZXRlbi8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vdHJpcGxldGVuLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly90cmlwbGV0ZW4vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly90cmlwbGV0ZW4vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3RyaXBsZXRlbi8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vdHJpcGxldGVuLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3RyaXBsZXRlbi8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly90cmlwbGV0ZW4vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtLmpzIiwid2VicGFjazovL3RyaXBsZXRlbi8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3RyaXBsZXRlbi8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4vLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuX193ZWJwYWNrX3JlcXVpcmVfXy5tID0gX193ZWJwYWNrX21vZHVsZXNfXztcblxuIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqLCBwcm9wKSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKTsgfSIsIl9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5iID0gZG9jdW1lbnQuYmFzZVVSSSB8fCBzZWxmLmxvY2F0aW9uLmhyZWY7XG5cbi8vIG9iamVjdCB0byBzdG9yZSBsb2FkZWQgYW5kIGxvYWRpbmcgY2h1bmtzXG4vLyB1bmRlZmluZWQgPSBjaHVuayBub3QgbG9hZGVkLCBudWxsID0gY2h1bmsgcHJlbG9hZGVkL3ByZWZldGNoZWRcbi8vIFtyZXNvbHZlLCByZWplY3QsIFByb21pc2VdID0gY2h1bmsgbG9hZGluZywgMCA9IGNodW5rIGxvYWRlZFxudmFyIGluc3RhbGxlZENodW5rcyA9IHtcblx0MTc5OiAwXG59O1xuXG4vLyBubyBjaHVuayBvbiBkZW1hbmQgbG9hZGluZ1xuXG4vLyBubyBwcmVmZXRjaGluZ1xuXG4vLyBubyBwcmVsb2FkZWRcblxuLy8gbm8gSE1SXG5cbi8vIG5vIEhNUiBtYW5pZmVzdFxuXG4vLyBubyBvbiBjaHVua3MgbG9hZGVkXG5cbi8vIG5vIGpzb25wIGZ1bmN0aW9uIiwiY29uc3QgbGFnb0RpQnJhaWVzSW1hZ2UgPSBuZXcgVVJMKFwiLi4vaW1hZ2VzL2xhZ28uanBnXCIsIGltcG9ydC5tZXRhLnVybCk7XG5jb25zdCB2YW5vaXNlTmF0aW9uYWxQYXJrSW1hZ2UgPSBuZXcgVVJMKFwiLi4vaW1hZ2VzL3Zhbm9pc2UuanBnXCIsIGltcG9ydC5tZXRhLnVybCk7XG5jb25zdCBsYWtlTG91aXNlSW1hZ2UgPSBuZXcgVVJMKFwiLi4vaW1hZ2VzL2xha2UtbG91aXNlLmpwZ1wiLCBpbXBvcnQubWV0YS51cmwpO1xuY29uc3QgbGF0ZW1hckltYWdlID0gbmV3IFVSTChcIi4uL2ltYWdlcy9sYXRlbWFyLmpwZ1wiLCBpbXBvcnQubWV0YS51cmwpO1xuY29uc3QgYmFsZE1vdW50YWluc0ltYWdlID0gbmV3IFVSTChcIi4uL2ltYWdlcy9iYWxkLW1vdW50YWlucy5qcGdcIiwgaW1wb3J0Lm1ldGEudXJsKTtcbmNvbnN0IHlvc2VtaXRlVmFsbGV5SW1hZ2UgPSBuZXcgVVJMKFwiLi4vaW1hZ2VzL3lvc2VtaXRlLmpwZ1wiLCBpbXBvcnQubWV0YS51cmwpO1xuXG5leHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xuICAgIHtcbiAgICAgICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxuICAgICAgICBsaW5rOiBsYWdvRGlCcmFpZXNJbWFnZVxuICAgIH0sXG4gICAge1xuICAgICAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxuICAgICAgICBsaW5rOiB2YW5vaXNlTmF0aW9uYWxQYXJrSW1hZ2VcbiAgICB9LFxuICAgIHtcbiAgICAgICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxuICAgICAgICBsaW5rOiBsYWtlTG91aXNlSW1hZ2VcbiAgICB9LFxuICAgIHtcbiAgICAgICAgbmFtZTogXCJMYXRlbWFyXCIsXG4gICAgICAgIGxpbms6IGxhdGVtYXJJbWFnZVxuICAgIH0sXG4gICAge1xuICAgICAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXG4gICAgICAgIGxpbms6IGJhbGRNb3VudGFpbnNJbWFnZVxuICAgIH0sXG4gICAge1xuICAgICAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxuICAgICAgICBsaW5rOiB5b3NlbWl0ZVZhbGxleUltYWdlXG4gICAgfVxuXTtcblxuZXhwb3J0IGNvbnN0IGZvcm1WYWxpZGF0aW9uQ29uZmlnID0ge1xuICAgIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxuICAgIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fYnV0dG9uXCIsXG4gICAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fYnV0dG9uX2Rpc2FibGVkXCIsXG4gICAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gICAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiLFxuICAgIGZvcm1TZWxlY3RvcjogXCJmb3JtXCIsXG59O1xuXG5leHBvcnQgY29uc3Qgc2VsZWN0b3JzID0ge1xuICAgIGNhcmRzTGlzdDogJy5jYXJkc19fbGlzdCcsXG4gICAgY2FyZFRlbXBsYXRlOiAnI2NhcmQtdGVtcGxhdGUnLFxuICAgIHByZXZpZXdQb3B1cDogJyNpbWFnZS1tb2RhbCcsXG4gICAgZWRpdEZvcm1Qb3B1cDogJyNlZGl0LW1vZGFsJyxcbiAgICBhZGRGb3JtUG9wdXA6ICcjYWRkLW1vZGFsJyxcbiAgICBwcm9maWxlVGl0bGU6ICcucHJvZmlsZV9fdGl0bGUnLFxuICAgIHByb2ZpbGVEZXNjcmlwdGlvbjogJy5wcm9maWxlX19kZXNjcmlwdGlvbicsXG4gICAgcHJvZmlsZUF2YXRhcjogJy5wcm9maWxlX19hdmF0YXInLFxuICAgIGZvcm1Nb2RhbENvbnRhaW5lcjogJy5tb2RhbF9fY29udGFpbmVyJyxcbiAgICBpbWFnZU1vZGFsQ29udGFpbmVyOiAnLm1vZGFsX19jb250YWluZXItaW1hZ2UnLFxuICAgIGZvcm1JbnB1dE5hbWU6ICcjcHJvZmlsZS1pbnB1dC1uYW1lJyxcbiAgICBmb3JtSW5wdXREZXNjcmlwdGlvbjogJyNwcm9maWxlLWlucHV0LWRlc2NyaXB0aW9uJyxcbiAgICBjaGFuZ2VBdmF0YXJQb3B1cDogXCIjY2hhbmdlLWF2YXRhci1tb2RhbFwiLFxuICAgIGF2YXRhckZvcm06IFwiI2F2YXRhci1mb3JtXCIsXG4gICAgdXBkYXRlQXZhdGFyQnV0dG9uOiBcIiNtb2RhbC1hdmF0YXItYnV0dG9uXCIsXG4gICAgY29uZmlybURlbGV0ZU1vZGFsOiBcIiNjb25maXJtLWRlbGV0ZS1tb2RhbFwiLFxufTtcbiIsImNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihkYXRhLCBoYW5kbGVJbWFnZUNsaWNrLCBoYW5kbGVEZWxldGUsIGNhcmRTZWxlY3Rvciwgc2V0SXNMaWtlZCkge1xuICAgICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcbiAgICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XG4gICAgICB0aGlzLl9jYXJkSWQgPSBkYXRhLl9pZDtcbiAgICAgIHRoaXMuX2lzTGlrZWQgPSBkYXRhLmlzTGlrZWQ7XG5cbiAgICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcbiAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xuICAgICAgdGhpcy5faGFuZGxlRGVsZXRlID0gaGFuZGxlRGVsZXRlO1xuICAgICAgdGhpcy5fc2V0SXNMaWtlZCA9IHNldElzTGlrZWQ7XG4gICAgfVxuICAgIFxuICAgIF9zZXRFdmVudExpc3RlbmVycygpIHtcblxuICAgICAgLy9saWtlIGJ1dHRvblxuICAgICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKTtcbiAgICAgIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLl9zZXRJc0xpa2VkKHRoaXMpKTtcblxuICAgICAgLy90cmFzaCBidXR0b25cbiAgICAgIGNvbnN0IHRyYXNoQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fdHJhc2gtYnV0dG9uJyk7XG4gICAgICB0cmFzaEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuX2hhbmRsZURlbGV0ZSk7XG5cbiAgICAgIC8vaW1hZ2UgbW9kYWwgY2xpY2tcbiAgICAgIHRoaXMuX2ltYWdlTW9kYWwgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19pbWFnZScpO1xuICAgICAgdGhpcy5faW1hZ2VNb2RhbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuX2hhbmRsZUltYWdlQ2xpY2soe2xpbms6IHRoaXMuX2xpbmssIG5hbWU6IHRoaXMuX25hbWV9KSk7XG4gICAgfVxuXG4gICAgX2dldFRlbXBsYXRlKCkge1xuICAgICAgcmV0dXJuIGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgfVxuXG4gICAgX2hhbmRsZUxpa2UoKSB7XG4gICAgICB0aGlzLl9pc0xpa2VkIFxuICAgICAgICA/IHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LmFkZChcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKSBcbiAgICAgICAgOiB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIilcbiAgICB9XG5cbiAgICBpc0xpa2VkKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2lzTGlrZWQ7XG4gICAgfVxuXG4gICAgZGVsZXRlQ2FyZCgpIHtcbiAgICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XG4gICAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcbiAgICB9XG5cbiAgICBnZW5lcmF0ZUNhcmQoKSB7XG4gICAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcblxuICAgICAgY29uc3QgY2FyZEltYWdlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xuICAgICAgY2FyZEltYWdlLnNyYyA9IHRoaXMuX2xpbms7XG4gICAgICBjYXJkSW1hZ2UuYWx0ID0gdGhpcy5fbmFtZTtcblxuICAgICAgY29uc3QgY2FyZFRpdGxlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xuICAgICAgY2FyZFRpdGxlLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcblxuICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICAgIHRoaXMuX2hhbmRsZUxpa2UoKTtcblxuICAgICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XG4gICAgfVxuXG4gICAgZ2V0Q2FyZElkKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2NhcmRJZDtcbiAgICB9XG4gIH1cblxuZXhwb3J0IGRlZmF1bHQgQ2FyZDsiLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgICBjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm1FbGVtZW50KSB7XG4gICAgICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBjb25maWcuaW5wdXRTZWxlY3RvcjtcbiAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBjb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3I7XG4gICAgICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICAgICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gY29uZmlnLmlucHV0RXJyb3JDbGFzcztcbiAgICAgICAgdGhpcy5fZXJyb3JDbGFzcyA9IGNvbmZpZy5lcnJvckNsYXNzO1xuXG4gICAgICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XG4gICAgICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3Rvcik7XG4gICAgfVxuXG4gICAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2VFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApXG4gICAgICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgICAgIGVycm9yTWVzc2FnZUVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgICAgIGVycm9yTWVzc2FnZUVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcbiAgICB9XG5cbiAgICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYClcbiAgICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICAgICAgZXJyb3JNZXNzYWdlRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgICAgIGVycm9yTWVzc2FnZUVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcbiAgICB9XG5cbiAgICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xuICAgICAgICBpZighaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICAgICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgX2hhc0ludmFsaWRJbnB1dCgpIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLl9pbnB1dEVsZW1lbnRzLmV2ZXJ5KChpbnB1dEVsZW1lbnQpID0+IGlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCk7XG4gICAgfVxuXG4gICAgZGlzYWJsZUJ1dHRvbigpIHtcbiAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgfVxuXG4gICAgX2VuYWJsZUJ1dHRvbigpIHtcbiAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIH1cblxuICAgIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcbiAgICAgICAgaWYodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcbiAgICAgICAgICAgIHRoaXMuZGlzYWJsZUJ1dHRvbigpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fZW5hYmxlQnV0dG9uKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHRoaXMuX2lucHV0RWxlbWVudHMgPSBbLi4udGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKV07XG4gICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuXG4gICAgICAgIHRoaXMuX2lucHV0RWxlbWVudHMuZm9yRWFjaChpbnB1dEVsZW1lbnQgPT4ge1xuICAgICAgICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChlKSA9PiB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB0aGlzLmRpc2FibGVCdXR0b24oKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKVxuICAgIH1cblxuICAgIHJlc2V0VmFsaWRhdGlvbigpIHtcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcblxuICAgICAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpXG4gICAgICAgIH0pO1xuICAgIH1cblxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICAgIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciB9KSB7XG4gICAgICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgICAgICAgdGhpcy5fY2xvc2VCdXR0b24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2Nsb3NlJyk7XG4gICAgfVxuXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2dCkgPT4ge1xuICAgICAgICAgICAgaWYgKGV2dC50YXJnZXQgPT09IGV2dC5jdXJyZW50VGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLl9jbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuY2xvc2UoKSk7XG4gICAgfVxuXG4gICAgb3BlbigpIHtcbiAgICAgICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZCgnbW9kYWxfb3BlbmVkJyk7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gICAgfVxuXG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ21vZGFsX29wZW5lZCcpO1xuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICAgIH1cblxuICAgIF9oYW5kbGVFc2NDbG9zZSA9IChldnQpID0+IHtcbiAgICAgICAgaWYoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgfVxufSIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQsIGxvYWRpbmdUZXh0ID0gXCJTYXZpbmcuLi5cIikge1xuICAgICAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XG4gICAgICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2Zvcm0nKTtcbiAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLm1vZGFsX19idXR0b24nKTtcbiAgICAgICAgdGhpcy5fZm9ybUlucHV0cyA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0Jyk7XG4gICAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xuICAgICAgICB0aGlzLl9idXR0b25UZXh0ID0gdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50O1xuICAgICAgICB0aGlzLl9sb2FkaW5nVGV4dCA9IGxvYWRpbmdUZXh0O1xuICAgIH1cblxuICAgIHNob3dMb2FkaW5nKCkge1xuICAgICAgICB0aGlzLl9idXR0b25UZXh0ID0gdGhpcy5fbG9hZGluZ1RleHQ7XG4gICAgfVxuXG4gICAgaGlkZUxvYWRpbmcoKSB7XG4gICAgICAgIHRoaXMuX2J1dHRvblRleHQgPSB0aGlzLl9idXR0b25UZXh0O1xuICAgIH1cblxuICAgIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICAgICAgY29uc3QgaW5wdXRPYmplY3QgPSB7fTtcblxuICAgICAgICB0aGlzLl9mb3JtSW5wdXRzLmZvckVhY2goaW5wdXQgPT4ge1xuICAgICAgICAgICAgaW5wdXRPYmplY3RbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIGlucHV0T2JqZWN0O1xuICAgIH1cblxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuXG4gICAgICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XG4gICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHRoaXMuX2Zvcm0ucmVzZXQoKVxuICAgICAgICBzdXBlci5jbG9zZSgpOyAgICAgICAgXG4gICAgfVxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xuICAgIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNhcmRTZWxlY3Rvcikge1xuICAgICAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xuICAgICAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgICAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNhcmRTZWxlY3Rvcik7XG4gICAgfVxuXG4gICAgcmVuZGVySXRlbXMoKSB7XG4gICAgICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgICAgICAgIHRoaXMuYWRkSXRlbSh0aGlzLl9yZW5kZXJlcihpdGVtKSk7XG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgICAgIHRoaXMuX2NhcmRTZWxlY3Rvci5wcmVwZW5kKGVsZW1lbnQpO1xuICAgIH1cbn0iLCJpbXBvcnQgeyBmb3JtVmFsaWRhdGlvbkNvbmZpZywgaW5pdGlhbENhcmRzLCBzZWxlY3RvcnMgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgU3R5bGVzIGZyb20gXCIuL2luZGV4LmNzc1wiO1xuXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhDb25maXJtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm0uanNcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGkuanNcIjtcblxuY29uc3QgZWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19lZGl0LWJ1dHRvbicpO1xuY29uc3QgYWRkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2FkZC1idXR0b24nKTtcblxuY29uc3QgYWRkTmV3Q2FyZEZvcm0gPSBkb2N1bWVudC5mb3Jtc1snY2FyZC1mb3JtJ107XG5jb25zdCBwcm9maWxlRWRpdEZvcm0gPSBkb2N1bWVudC5mb3Jtc1sncHJvZmlsZS1mb3JtJ107XG5cbmNvbnN0IHByb2ZpbGVOYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcHJvZmlsZS1pbnB1dC1uYW1lJyk7XG5jb25zdCBwcm9maWxlRGVzY3JpcHRpb25JbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwcm9maWxlLWlucHV0LWRlc2NyaXB0aW9uJyk7XG5cbi8vQVBJIFxuY29uc3QgYXBpID0gbmV3IEFwaSh7XG4gICAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MVwiLFxuICAgIGhlYWRlcnM6IHtcbiAgICAgIGF1dGhvcml6YXRpb246IFwiMTc0MTk2ZDYtNDViZC00OTBhLWJjMGUtMzliMDc1NGM3ZGE5XCIsXG4gICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICB9LFxufSk7XG5cbmxldCBzZWN0aW9uO1xuXG5Qcm9taXNlLmFsbChbYXBpLmZldGNoVXNlckluZm8oKSwgYXBpLmdldEluaXRpYWxDYXJkcygpXSlcbiAgICAudGhlbigoW3VzZXJEYXRhLCBjYXJkc10pID0+IHtcbiAgICAgICAgdXNlckluZm8uc2V0VXNlckluZm8odXNlckRhdGEubmFtZSwgdXNlckRhdGEuYWJvdXQpO1xuICAgICAgICB1c2VySW5mby5zZXRBdmF0YXJJbWFnZSh1c2VyRGF0YS5hdmF0YXIpO1xuICAgICAgICBzZWN0aW9uID0gbmV3IFNlY3Rpb24oXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaXRlbXM6IGNhcmRzLFxuICAgICAgICAgICAgICAgIHJlbmRlcmVyOiByZW5kZXJDYXJkXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2VsZWN0b3JzLmNhcmRzTGlzdFxuICAgICAgICApO1xuICAgICAgICBzZWN0aW9uLnJlbmRlckl0ZW1zKCk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgIH0pO1xuXG4vL3JlbmRlcmluZyBjYXJkXG5jb25zdCBoYW5kbGVJbWFnZUNsaWNrID0gKGltYWdlRGF0YSkgPT4ge1xuICAgIHBvcHVwSW1hZ2Uub3BlbihpbWFnZURhdGEpXG59XG5cbmNvbnN0IHNldElzTGlrZWQgPSAoY2FyZCkgPT4ge1xuICAgIGNhcmQuaXNMaWtlZCgpXG4gICAgICAgID8gYXBpLmRlbGV0ZUxpa2UoY2FyZC5nZXRDYXJkSWQoKSlcbiAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgICAgICAgICBjYXJkLnNldElzTGlrZWQoZmFsc2UpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgOiBhcGkuYWRkTGlrZShjYXJkLmdldENhcmRJZCgpKVxuICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICAgICAgICAgIGNhcmQuc2V0SXNMaWtlZCh0cnVlKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgICAgICAgIH0pXG59XG5cbmNvbnN0IGhhbmRsZURlbGV0ZSA9IChjYXJkKSA9PiB7XG4gICAgY29uZmlybURlbGV0ZU1vZGFsLm9wZW4oKCkgPT4ge1xuICAgICAgICBjb25maXJtRGVsZXRlTW9kYWwuc2hvd0xvYWRpbmcoKTtcbiAgICAgICAgYXBpLmRlbGV0ZUNhcmQoY2FyZC5nZXRDYXJkSWQoKSlcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICBjYXJkLmRlbGV0ZUNhcmQoKTtcbiAgICAgICAgICAgICAgICBjb25maXJtRGVsZXRlTW9kYWwuY2xvc2UoKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyKGVycik7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbmZpcm1EZWxldGVNb2RhbC5oaWRlTG9hZGluZygpO1xuICAgICAgICAgICAgfSlcbiAgICB9KVxufVxuXG5jb25zdCBjb25maXJtRGVsZXRlTW9kYWwgPSBuZXcgUG9wdXBXaXRoQ29uZmlybShzZWxlY3RvcnMuY29uZmlybURlbGV0ZU1vZGFsLCBcbiAgICAoY2FyZCkgPT4ge2hhbmRsZURlbGV0ZShjYXJkKX0pO1xuXG5jb25maXJtRGVsZXRlTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgcmVuZGVyQ2FyZCA9IChkYXRhKSA9PiB7XG4gICAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKGRhdGEsIGhhbmRsZUltYWdlQ2xpY2ssIGhhbmRsZURlbGV0ZSwgc2VsZWN0b3JzLmNhcmRUZW1wbGF0ZSwgc2V0SXNMaWtlZCk7XG5cbiAgICByZXR1cm4gY2FyZC5nZW5lcmF0ZUNhcmQoKTtcbn07XG5cbi8vVXNlckluZm9cbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKFxuICAgIHNlbGVjdG9ycy5wcm9maWxlVGl0bGUsIFxuICAgIHNlbGVjdG9ycy5wcm9maWxlRGVzY3JpcHRpb24sIFxuICAgIHNlbGVjdG9ycy5wcm9maWxlQXZhdGFyLFxuKTtcblxuLy8gdmFsaWRhdGlvblxuY29uc3QgZm9ybVZhbGlkYXRvcnMgPSB7fTtcblxuY29uc3QgZW5hYmxlVmFsaWRhdGlvbiA9IChmb3JtVmFsaWRhdGlvbkNvbmZpZykgPT4ge1xuICAgIGNvbnN0IGZvcm1MaXN0ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGZvcm1WYWxpZGF0aW9uQ29uZmlnLmZvcm1TZWxlY3RvcikpO1xuXG4gICAgZm9ybUxpc3QuZm9yRWFjaCgoZm9ybUVsZW1lbnQpID0+IHtcbiAgICAgICBjb25zdCB2YWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihmb3JtVmFsaWRhdGlvbkNvbmZpZywgZm9ybUVsZW1lbnQpO1xuICAgICAgIGNvbnN0IGZvcm1OYW1lID0gZm9ybUVsZW1lbnQuZ2V0QXR0cmlidXRlKFwibmFtZVwiKTsgXG5cbiAgICAgICBmb3JtVmFsaWRhdG9yc1tmb3JtTmFtZV0gPSB2YWxpZGF0b3I7XG4gICAgICAgdmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbiAgICB9KTtcbn1cblxuZW5hYmxlVmFsaWRhdGlvbihmb3JtVmFsaWRhdGlvbkNvbmZpZyk7XG5cbi8vIEFkZGluZyBOZXcgQ2FyZCBGb3JtXG5jb25zdCBoYW5kbGVBZGRDYXJkU3VibWl0ID0gKGRhdGEpID0+IHtcbiAgICBhZGRDYXJkRm9ybS5zaG93TG9hZGluZygpO1xuICAgIGNvbnN0IHsgbmFtZSwgbGluayB9ID0gZGF0YTtcbiAgICByZXR1cm4gYXBpLmFkZE5ld0NhcmQobmFtZSwgbGluaylcbiAgICAgICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNhcmRFbCA9IHJlbmRlckNhcmQoZGF0YSk7XG4gICAgICAgICAgICBzZWN0aW9uLmFkZEl0ZW0oY2FyZEVsKTtcbiAgICAgICAgICAgIGFkZENhcmRGb3JtLmNsb3NlKCk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpXG4gICAgICAgIH0pXG4gICAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgICAgIGFkZENhcmRGb3JtLmhpZGVMb2FkaW5nKCk7XG4gICAgICAgIH0pO1xufVxuXG5jb25zdCBhZGRDYXJkRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKHNlbGVjdG9ycy5hZGRGb3JtUG9wdXAsIGhhbmRsZUFkZENhcmRTdWJtaXQpO1xuXG5hZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgZm9ybVZhbGlkYXRvcnNbYWRkTmV3Q2FyZEZvcm0uZ2V0QXR0cmlidXRlKCduYW1lJyldLnJlc2V0VmFsaWRhdGlvbigpO1xuICAgIGFkZENhcmRGb3JtLm9wZW4oKTtcbn0pXG5cbi8vRWRpdCBQcm9maWxlIEZvcm1cbmNvbnN0IGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0ID0gKHsgdGl0bGUsIGRlc2NyaXB0aW9uIH0pID0+IHtcbiAgICBlZGl0UHJvZmlsZU1vZGFsLnNob3dMb2FkaW5nKCk7XG4gICAgcmV0dXJuIGFwaS5lZGl0UHJvZmlsZSh0aXRsZSwgZGVzY3JpcHRpb24pXG4gICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHsgbmFtZTogdGl0bGUsIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbiB9KTtcbiAgICAgICAgICAgIGVkaXRQcm9maWxlTW9kYWwuY2xvc2UoKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICAgICAgZWRpdFByb2ZpbGVNb2RhbC5oaWRlTG9hZGluZygpO1xuICAgICAgICB9KTtcbn1cblxuY29uc3QgZWRpdFByb2ZpbGVNb2RhbCA9IG5ldyBQb3B1cFdpdGhGb3JtKHNlbGVjdG9ycy5lZGl0Rm9ybVBvcHVwLCBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdCk7XG5lZGl0UHJvZmlsZU1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgY29uc3QgeyBuYW1lLCBkZXNjcmlwdGlvbiB9ID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcbiAgICBwcm9maWxlTmFtZUlucHV0LnZhbHVlID0gbmFtZTtcbiAgICBwcm9maWxlRGVzY3JpcHRpb25JbnB1dC52YWx1ZSA9IGRlc2NyaXB0aW9uO1xuICAgIGZvcm1WYWxpZGF0b3JzW3Byb2ZpbGVFZGl0Rm9ybS5nZXRBdHRyaWJ1dGUoJ25hbWUnKV0uZGlzYWJsZUJ1dHRvbigpO1xuICAgIGVkaXRQcm9maWxlTW9kYWwub3BlbigpO1xufSlcblxuLy9Qb3B1cFdpdGhJbWFnZVxuY29uc3QgcG9wdXBJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZShzZWxlY3RvcnMucHJldmlld1BvcHVwKTtcbnBvcHVwSW1hZ2UuY2xvc2UoKTtcblxuLy9DaGFuZ2luZyBhdmF0YXJcbmNvbnN0IGhhbmRsZVVwZGF0ZUF2YXRhciA9ICh7IGxpbmsgfSkgPT4ge1xuICAgIHVwZGF0ZUF2YXRhck1vZGFsLnNob3dMb2FkaW5nKCk7XG4gICAgcmV0dXJuIGFwaS51cGRhdGVBdmF0YXIobGluaylcbiAgICAgICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgICAgIHVzZXJJbmZvLnNldEF2YXRhckltYWdlKGRhdGEuYXZhdGFyKTtcbiAgICAgICAgICAgIHVwZGF0ZUF2YXRhck1vZGFsLmNsb3NlKCk7XG4gICAgICAgICAgICB1cGRhdGVBdmF0YXJNb2RhbC5yZXNldCgpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgICB9KVxuICAgICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgICAgICB1cGRhdGVBdmF0YXJNb2RhbC5oaWRlTG9hZGluZygpO1xuICAgICAgICB9KVxufVxuXG5jb25zdCB1cGRhdGVBdmF0YXJNb2RhbCA9IG5ldyBQb3B1cFdpdGhGb3JtKHNlbGVjdG9ycy5jaGFuZ2VBdmF0YXJQb3B1cCwgaGFuZGxlVXBkYXRlQXZhdGFyKTtcbnVwZGF0ZUF2YXRhck1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4vLyBzZWxlY3RvcnMudXBkYXRlQXZhdGFyQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuLy8gICAgIGZvcm1WYWxpZGF0b3JzW3NlbGVjdG9ycy5hdmF0YXJGb3JtLmdldEF0dHJpYnV0ZSgnbmFtZScpXS5yZXNldFZhbGlkYXRpb24oKTtcbi8vICAgICB1cGRhdGVBdmF0YXJNb2RhbC5vcGVuKCk7XG4vLyB9KTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XG4gICAgY29uc3RydWN0b3IoeyBiYXNlVXJsLCBoZWFkZXJzIH0pIHtcbiAgICAgICAgdGhpcy5fdXJsID0gYmFzZVVybDtcbiAgICAgICAgdGhpcy5faGVhZGVycyA9IGhlYWRlcnM7XG4gICAgICAgIHRoaXMuX2F1dGhvcml6YXRpb24gPSBoZWFkZXJzLmF1dGhvcml6YXRpb247XG4gICAgfVxuXG4gICAgX2NoZWNrUmVzcG9uc2UocmVzKSB7XG4gICAgICAgIGlmKHJlcy5vaykge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvciAke3Jlcy5zdGF0dXN9YCk7XG4gICAgfVxuXG4gICAgZ2V0SW5pdGlhbENhcmRzKCkge1xuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkc2AsIHtcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XG4gICAgfVxuICAgICAgXG4gICAgZmV0Y2hVc2VySW5mbygpIHtcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vdXNlcnMvbWVgLCB7XG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgICB9KVxuICAgICAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgICB9XG5cbiAgICBlZGl0UHJvZmlsZSh7IG5hbWUsIGRlc2NyaXB0aW9uIH0pIHtcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vdXNlcnMvbWVgLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IFxuICAgICAgICAgICAgICAgIG5hbWU6IG5hbWUsIFxuICAgICAgICAgICAgICAgIGFib3V0OiBkZXNjcmlwdGlvbiwgXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XG4gICAgfVxuXG4gICAgZWRpdFByb2ZpbGVBdmF0YXIoeyBsaW5rIH0pIHtcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBcbiAgICAgICAgICAgICAgICBhdmF0YXI6IGxpbmssXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XG4gICAgfVxuXG4gICAgYWRkTmV3Q2FyZCh7IGNhcmROYW1lLCBjYXJkTGluayB9KSB7XG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzYCwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IFxuICAgICAgICAgICAgICAgIG5hbWU6IGNhcmROYW1lLCBcbiAgICAgICAgICAgICAgICBsaW5rOiBjYXJkTGluayxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICB9KVxuICAgICAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgICB9XG5cbiAgICBkZWxldGVDYXJkKGNhcmRJZCkge1xuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkcy8ke2NhcmRJZH1gLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgICB9KVxuICAgICAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgICB9XG5cbiAgICBhZGRMaWtlKGNhcmRJZCkge1xuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkcy9saWtlcy8ke2NhcmRJZH1gLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiUFVUXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgICB9KVxuICAgICAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgICB9XG5cbiAgICBkZWxldGVMaWtlKGNhcmRJZCkge1xuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgICB9KVxuICAgICAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgICB9XG4gIH0iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoQ29uZmlybSBleHRlbmRzIFBvcHVwIHtcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVEZWxldGUsIGxvYWRpbmdCdXR0b25UZXh0ID0gXCJEZWxldGluZy4uLlwiKSB7XG4gICAgICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcbiAgICAgICAgdGhpcy5faGFuZGxlRGVsZXRlID0gaGFuZGxlRGVsZXRlO1xuICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19idXR0b25cIik7XG4gICAgICAgIHRoaXMuX2xvYWRpbmdCdXR0b25UZXh0ID0gbG9hZGluZ0J1dHRvblRleHQ7XG4gICAgfVxuXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2dCkgPT4ge1xuICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBpZiAodGhpcy5faGFuZGxlRGVsZXRlQ2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9oYW5kbGVEZWxldGVDYWxsYmFjaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBvcGVuKGhhbmRsZURlbGV0ZUNhbGxiYWNrKSB7XG4gICAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNhbGxiYWNrID0gaGFuZGxlRGVsZXRlQ2FsbGJhY2s7XG4gICAgICAgIHN1cGVyLm9wZW4oKTtcbiAgICB9XG5cbiAgICBzaG93TG9hZGluZygpIHtcbiAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gdGhpcy5fbG9hZGluZ0J1dHRvblRleHQ7XG4gICAgICB9XG4gICAgXG4gICAgaGlkZUxvYWRpbmcoKSB7XG4gICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudDtcbiAgICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gICAgY29uc3RydWN0b3IobmFtZUVsLCBkZXNjcmlwdGlvbkVsLCBhdmF0YXJFbCwgdXNlcklkKSB7XG4gICAgICAgIHRoaXMuX25hbWVFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZUVsKTtcbiAgICAgICAgdGhpcy5fZGVzY3JpcHRpb25FbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZGVzY3JpcHRpb25FbCk7XG4gICAgICAgIHRoaXMuX2xpbmsgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGF2YXRhckVsKTtcbiAgICAgICAgdGhpcy51c2VySWQgPSB1c2VySWQ7XG4gICAgfVxuXG4gICAgZ2V0VXNlckluZm8oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBuYW1lOiB0aGlzLl9uYW1lRWwudGV4dENvbnRlbnQsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogdGhpcy5fZGVzY3JpcHRpb25FbC50ZXh0Q29udGVudCxcbiAgICAgICAgICAgIGF2YXRhcjogdGhpcy5fbGluay5zcmMsXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzZXRVc2VySW5mbyhuYW1lLCBkZXNjcmlwdGlvbikge1xuICAgICAgICB0aGlzLl9uYW1lRWwudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgICAgICB0aGlzLl9kZXNjcmlwdGlvbkVsLnRleHRDb250ZW50ID0gZGVzY3JpcHRpb247XG4gICAgfVxuXG4gICAgc2V0QXZhdGFySW1hZ2UobGluaykge1xuICAgICAgICB0aGlzLl9saW5rLnNyYyA9IGxpbms7XG4gICAgfVxuXG4gICAgc2V0VXNlcklkKHVzZXJJZCkge1xuICAgICAgICB0aGlzLnVzZXJJZCA9IHVzZXJJZDtcbiAgICAgICAgcmV0dXJuIHRoaXMudXNlcklkO1xuICAgIH1cbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgICAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XG4gICAgICAgIHRoaXMuX21vZGFsTmFtZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9fbmFtZScpO1xuICAgICAgICB0aGlzLl9tb2RhbEltYWdlID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLm1vZGFsX19pbWFnZScpO1xuXG4gICAgICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgfVxuXG4gICAgb3BlbihpbWFnZURhdGEpIHtcbiAgICAgICAgdGhpcy5fbW9kYWxOYW1lLnRleHRDb250ZW50ID0gaW1hZ2VEYXRhLm5hbWU7XG4gICAgICAgIHRoaXMuX21vZGFsSW1hZ2UuYWx0ID0gaW1hZ2VEYXRhLm5hbWU7XG4gICAgICAgIHRoaXMuX21vZGFsSW1hZ2Uuc3JjID0gaW1hZ2VEYXRhLmxpbms7XG5cbiAgICAgICAgc3VwZXIub3BlbigpO1xuICAgIH1cbn0iXSwibmFtZXMiOlsiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJtIiwibyIsIm9iaiIsInByb3AiLCJPYmplY3QiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJwIiwiYiIsImRvY3VtZW50IiwiYmFzZVVSSSIsInNlbGYiLCJsb2NhdGlvbiIsImhyZWYiLCJVUkwiLCJjb25zdHJ1Y3RvciIsImRhdGEiLCJoYW5kbGVJbWFnZUNsaWNrIiwiaGFuZGxlRGVsZXRlIiwiY2FyZFNlbGVjdG9yIiwic2V0SXNMaWtlZCIsInRoaXMiLCJfbmFtZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJfY2FyZElkIiwiX2lkIiwiX2lzTGlrZWQiLCJpc0xpa2VkIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX2hhbmRsZURlbGV0ZSIsIl9zZXRJc0xpa2VkIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2xpa2VCdXR0b24iLCJfZWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJhZGRFdmVudExpc3RlbmVyIiwiX2ltYWdlTW9kYWwiLCJfZ2V0VGVtcGxhdGUiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2hhbmRsZUxpa2UiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJkZWxldGVDYXJkIiwiZ2VuZXJhdGVDYXJkIiwiY2FyZEltYWdlIiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJnZXRDYXJkSWQiLCJGb3JtVmFsaWRhdG9yIiwiY29uZmlnIiwiZm9ybUVsZW1lbnQiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfZm9ybUVsZW1lbnQiLCJfaW5wdXRMaXN0IiwicXVlcnlTZWxlY3RvckFsbCIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWxlbWVudCIsImVycm9yTWVzc2FnZUVsZW1lbnQiLCJpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hpZGVJbnB1dEVycm9yIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGFzSW52YWxpZElucHV0IiwiX2lucHV0RWxlbWVudHMiLCJldmVyeSIsImRpc2FibGVCdXR0b24iLCJfc3VibWl0QnV0dG9uIiwiZGlzYWJsZWQiLCJfZW5hYmxlQnV0dG9uIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiZm9yRWFjaCIsImVuYWJsZVZhbGlkYXRpb24iLCJlIiwicHJldmVudERlZmF1bHQiLCJyZXNldFZhbGlkYXRpb24iLCJQb3B1cCIsIl9yZWYiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwIiwiX2Nsb3NlQnV0dG9uIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJldnQiLCJ0YXJnZXQiLCJjdXJyZW50VGFyZ2V0IiwiY2xvc2UiLCJvcGVuIiwiX2hhbmRsZUVzY0Nsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImtleSIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0IiwibG9hZGluZ1RleHQiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJzdXBlciIsIl9mb3JtIiwiX2Zvcm1JbnB1dHMiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9idXR0b25UZXh0IiwiX2xvYWRpbmdUZXh0Iiwic2hvd0xvYWRpbmciLCJoaWRlTG9hZGluZyIsIl9nZXRJbnB1dFZhbHVlcyIsImlucHV0T2JqZWN0IiwiaW5wdXQiLCJ2YWx1ZSIsInJlc2V0IiwiU2VjdGlvbiIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJyZW5kZXJJdGVtcyIsIml0ZW0iLCJhZGRJdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJlZGl0QnV0dG9uIiwiYWRkQnV0dG9uIiwiYWRkTmV3Q2FyZEZvcm0iLCJmb3JtcyIsInByb2ZpbGVFZGl0Rm9ybSIsInByb2ZpbGVOYW1lSW5wdXQiLCJwcm9maWxlRGVzY3JpcHRpb25JbnB1dCIsImFwaSIsImJhc2VVcmwiLCJoZWFkZXJzIiwiX3VybCIsIl9oZWFkZXJzIiwiX2F1dGhvcml6YXRpb24iLCJhdXRob3JpemF0aW9uIiwiX2NoZWNrUmVzcG9uc2UiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiZ2V0SW5pdGlhbENhcmRzIiwiZmV0Y2giLCJ0aGVuIiwiZmV0Y2hVc2VySW5mbyIsImVkaXRQcm9maWxlIiwiX3JlZjIiLCJkZXNjcmlwdGlvbiIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiYWJvdXQiLCJlZGl0UHJvZmlsZUF2YXRhciIsIl9yZWYzIiwiYXZhdGFyIiwiYWRkTmV3Q2FyZCIsIl9yZWY0IiwiY2FyZE5hbWUiLCJjYXJkTGluayIsImNhcmRJZCIsImFkZExpa2UiLCJkZWxldGVMaWtlIiwic2VjdGlvbiIsImFsbCIsInVzZXJEYXRhIiwiY2FyZHMiLCJ1c2VySW5mbyIsInNldFVzZXJJbmZvIiwic2V0QXZhdGFySW1hZ2UiLCJyZW5kZXJDYXJkIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwibG9nIiwiaW1hZ2VEYXRhIiwicG9wdXBJbWFnZSIsImNhcmQiLCJlcnJvciIsImNvbmZpcm1EZWxldGVNb2RhbCIsImZpbmFsbHkiLCJsb2FkaW5nQnV0dG9uVGV4dCIsIl9sb2FkaW5nQnV0dG9uVGV4dCIsIl9oYW5kbGVEZWxldGVDYWxsYmFjayIsImhhbmRsZURlbGV0ZUNhbGxiYWNrIiwiQ2FyZCIsIm5hbWVFbCIsImRlc2NyaXB0aW9uRWwiLCJhdmF0YXJFbCIsInVzZXJJZCIsIl9uYW1lRWwiLCJfZGVzY3JpcHRpb25FbCIsImdldFVzZXJJbmZvIiwic2V0VXNlcklkIiwiZm9ybVZhbGlkYXRvcnMiLCJmb3JtVmFsaWRhdGlvbkNvbmZpZyIsImZvcm1TZWxlY3RvciIsIkFycmF5IiwiZnJvbSIsInZhbGlkYXRvciIsImZvcm1OYW1lIiwiZ2V0QXR0cmlidXRlIiwiYWRkQ2FyZEZvcm0iLCJjYXJkRWwiLCJlZGl0UHJvZmlsZU1vZGFsIiwidGl0bGUiLCJfbW9kYWxOYW1lIiwiX21vZGFsSW1hZ2UiLCJ1cGRhdGVBdmF0YXJNb2RhbCIsInVwZGF0ZUF2YXRhciJdLCJzb3VyY2VSb290IjoiIn0=