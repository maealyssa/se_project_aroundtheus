!function(){"use strict";var e={960:function(e,t,s){e.exports=s.p+"190142da37235e3079a8.jpg"},291:function(e,t,s){e.exports=s.p+"9aed7cb3f54c0faa1f9f.jpg"},822:function(e,t,s){e.exports=s.p+"0fb96793ab89da938a7d.jpg"},328:function(e,t,s){e.exports=s.p+"395d21149564d1293c88.jpg"},705:function(e,t,s){e.exports=s.p+"a22751dd8a0e22ceb5f6.jpg"},561:function(e,t,s){e.exports=s.p+"0df918d480d675e4708e.jpg"}},t={};function s(i){var r=t[i];if(void 0!==r)return r.exports;var n=t[i]={exports:{}};return e[i](n,n.exports,s),n.exports}s.m=e,s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s.b=document.baseURI||self.location.href,function(){new URL(s(291),s.b),new URL(s(705),s.b),new URL(s(822),s.b),new URL(s(328),s.b),new URL(s(960),s.b),new URL(s(561),s.b);const e={cardsList:".cards__list",cardTemplate:"#card-template",previewPopup:"#image-modal",editFormPopup:"#edit-modal",addFormPopup:"#add-modal",profileTitle:".profile__title",profileDescription:".profile__description",profileAvatar:".profile__avatar",formModalContainer:".modal__container",imageModalContainer:".modal__container-image",formInputName:"#profile-input-name",formInputDescription:"#profile-input-description",changeAvatarPopup:"#change-avatar-modal",avatarForm:"#avatar-form",updateAvatarButton:"#modal-avatar-button",confirmDeleteModal:"#confirm-delete-modal"};var t=class{constructor(e,t,s,i,r){this._name=e.name,this._link=e.link,this._cardId=e._id,this._isLiked=e.isLiked,this._cardSelector=i,this._handleImageClick=t,this._handleDelete=s,this._setIsLiked=r}_setEventListeners(){this._likeButton=this._element.querySelector(".card__like-button"),this._likeButton.addEventListener("click",(()=>this._setIsLiked(this))),this._element.querySelector(".card__trash-button").addEventListener("click",(()=>this._handleDelete)),this._imageModal=this._element.querySelector(".card__image"),this._imageModal.addEventListener("click",(()=>this._handleImageClick({link:this._link,name:this._name})))}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}_handleLike(){this._isLiked?this._likeButton.classList.add("card__like-button_active"):this._likeButton.classList.remove("card__like-button_active")}isLiked(){return this._isLiked}deleteCard(){this._element.remove(),this._element=null}generateCard(){this._element=this._getTemplate();const e=this._element.querySelector(".card__image");return e.src=this._link,e.alt=this._name,this._element.querySelector(".card__title").textContent=this._name,this._setEventListeners(),this._handleLike(),this._element}getCardId(){return this._cardId}};class i{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=t,this._inputList=this._formElement.querySelectorAll(this._inputSelector)}_showInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_hasInvalidInput(){return!this._inputElements.every((e=>e.validity.valid))}disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}_enableButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_toggleButtonState(){this._hasInvalidInput()?this.disableButton():this._enableButton()}_setEventListeners(){this._inputElements=[...this._formElement.querySelectorAll(this._inputSelector)],this._submitButton=this._formElement.querySelector(this._submitButtonSelector),this._inputElements.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault(),this.disableButton()})),this._setEventListeners()}resetValidation(){this._toggleButtonState(),this._inputList.forEach((e=>{this._hideInputError(e)}))}}class r{constructor(e){let{popupSelector:t}=e;this._popup=document.querySelector(t),this._closeButton=this._popup.querySelector(".modal__close")}setEventListeners(){this._popup.addEventListener("click",(e=>{e.target===e.currentTarget&&this.close()})),this._closeButton.addEventListener("click",(()=>this.close()))}open(){this._popup.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popup.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose=e=>{"Escape"===e.key&&this.close()}}class n extends r{constructor(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Saving...";super({popupSelector:e}),this._form=this._popup.querySelector(".modal__form"),this._submitButton=this._popup.querySelector(".modal__button"),this._formInputs=this._popup.querySelectorAll("input"),this._handleFormSubmit=t,this._buttonText=this._submitButton.textContent,this._loadingText=s}showLoading(){this._buttonText=this._loadingText}hideLoading(){this._buttonText=this._buttonText}_getInputValues(){const e={};return this._formInputs.forEach((t=>{e[t.name]=t.value})),e}setEventListeners(){super.setEventListeners(),this._popup.addEventListener("submit",(e=>{this._handleFormSubmit(this._getInputValues()),e.preventDefault()}))}close(){this._form.reset(),super.close()}}class o{constructor(e,t){let{items:s,renderer:i}=e;this._items=s,this._renderer=i,this._cardSelector=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._cardSelector.prepend(e)}}const a=document.querySelector(".profile__edit-button"),l=document.querySelector(".profile__add-button"),d=document.forms["card-form"],c=document.forms["profile-form"],h=document.querySelector("#profile-input-name"),u=document.querySelector("#profile-input-description"),_=new class{constructor(e){let{baseUrl:t,headers:s}=e;this._url=t,this._headers=s,this._authorization=s.authorization}_checkResponse(e){return e.ok?e.json():Promise.reject(`Error ${e.status}`)}getInitialCards(){return fetch(`${this._url}/cards`,{headers:this._headers}).then(this._checkResponse)}fetchUserInfo(){return fetch(`${this._url}/users/me`,{headers:this._headers}).then(this._checkResponse)}editProfile(e){let{name:t,description:s}=e;return fetch(`${this._url}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:s})}).then(this._checkResponse)}editProfileAvatar(e){let{link:t}=e;return fetch(`${this._url}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:t})}).then(this._checkResponse)}addNewCard(e){let{cardName:t,cardLink:s}=e;return fetch(`${this._url}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:s})}).then(this._checkResponse)}deleteCard(e){return fetch(`${this._url}/cards/${e}`,{method:"DELETE",headers:this._headers}).then(this._checkResponse)}addLike(e){return fetch(`${this._url}/cards/likes/${e}`,{method:"PUT",headers:this._headers}).then(this._checkResponse)}deleteLike(e){return fetch(`${this._url}/cards/${e}/likes`,{method:"DELETE",headers:this._headers}).then(this._checkResponse)}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"174196d6-45bd-490a-bc0e-39b0754c7da9","Content-Type":"application/json"}});let p;Promise.all([_.fetchUserInfo(),_.getInitialCards()]).then((t=>{let[s,i]=t;console.log(s),g.setUserInfo(s.name,s.about),g.setAvatarImage(s.avatar),p=new o({items:i,renderer:e=>{const t=m(e);cardSection.addItem(t)}},e.cardsList),p.renderItems()})).catch((e=>{console.log(e)}));const m=s=>new t(s,f,B,e.cardTemplate,v).generateCard(),f=e=>{S.open(e)},v=e=>{e.isLiked()?_.deleteLike(e.getCardId()).then((t=>{e.setIsLiked(!1)})).catch((e=>{console.error(e)})):_.addLike(e.getCardId()).then((t=>{e.setIsLiked(!0)})).catch((e=>{console.error(e)}))},g=new class{constructor(e,t,s){this._nameEl=document.querySelector(e),this._descriptionEl=document.querySelector(t),this._link=document.querySelector(s)}getUserInfo(){return{name:this._nameEl.textContent,description:this._descriptionEl.textContent,avatar:this._link.src}}setUserInfo(e,t){this._nameEl.textContent=e,this._descriptionEl.textContent=t}setAvatarImage(e){this._link.src=e}}(e.profileTitle,e.profileDescription,e.profileAvatar),L={};var b;b={inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible",formSelector:"form"},Array.from(document.querySelectorAll(b.formSelector)).forEach((e=>{const t=new i(b,e),s=e.getAttribute("name");L[s]=t,t.enableValidation()}));const E=new n(e.addFormPopup,(e=>{E.showLoading();const{name:t,link:s}=e;return _.addNewCard(t,s).then((e=>{const t=m(e);p.addItem(t),E.close()})).catch((e=>{console.log(e)})).finally((()=>{E.hideLoading()}))}));l.addEventListener("click",(()=>{L[d.getAttribute("name")].resetValidation(),E.open()}));const k=new n(e.editFormPopup,(e=>{let{title:t,description:s}=e;return k.showLoading(),_.editProfile(t,s).then((()=>{g.setUserInfo({name:t,description:s}),k.close()})).catch((e=>{console.error(e)})).finally((()=>{k.hideLoading()}))}));k.setEventListeners(),a.addEventListener("click",(()=>{const{name:e,description:t}=g.getUserInfo();h.value=e,u.value=t,L[c.getAttribute("name")].disableButton(),k.open()}));const S=new class extends r{constructor(e){super({popupSelector:e}),this._modalName=this._popup.querySelector(".modal__name"),this._modalImage=this._popup.querySelector(".modal__image"),super.setEventListeners()}open(e){this._modalName.textContent=e.name,this._modalImage.alt=e.name,this._modalImage.src=e.link,super.open()}}(e.previewPopup);S.close();const C=new n(e.changeAvatarPopup,y);C.setEventListeners();const y=e=>{let{link:t}=e;return C.showLoading(),_.updateAvatar(t).then((e=>{g.setAvatarImage(e.avatar),C.close(),C.reset()})).catch((e=>{console.error(e)})).finally((()=>{C.hideLoading()}))};e.updateAvatarButton.addEventListener("click",(()=>{L[e.avatarForm.getAttribute("name")].resetValidation(),C.open()}));const I=new class extends r{constructor(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Deleting...";super({popupSelector:e}),this._handleDelete=t,this._submitButton=this._popup.querySelector(".modal__button"),this._loadingButtonText=s}setEventListeners(){super.setEventListeners(),this._submitButton.addEventListener("click",(e=>{e.preventDefault(),this._handleDeleteCallback&&this._handleDeleteCallback()}))}open(e){this._handleDeleteCallback=e,super.open()}showLoading(){this._submitButton.textContent=this._loadingButtonText}hideLoading(){this._submitButton.textContent=this._submitButton.textContent}}(e.confirmDeleteModal,(e=>{B(e)}));I.setEventListeners();const B=e=>{I.open((()=>{I.showLoading(),_.deleteCard(e.getCardId()).then((()=>{e.deleteCard(),I.close()})).catch((e=>{console.err(e)})).finally((()=>{I.hideLoading()}))}))}}()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoicVpBQ0lBLEVBQTJCLENBQUMsRUFHaEMsU0FBU0MsRUFBb0JDLEdBRTVCLElBQUlDLEVBQWVILEVBQXlCRSxHQUM1QyxRQUFxQkUsSUFBakJELEVBQ0gsT0FBT0EsRUFBYUUsUUFHckIsSUFBSUMsRUFBU04sRUFBeUJFLEdBQVksQ0FHakRHLFFBQVMsQ0FBQyxHQU9YLE9BSEFFLEVBQW9CTCxHQUFVSSxFQUFRQSxFQUFPRCxRQUFTSixHQUcvQ0ssRUFBT0QsT0FDZixDQUdBSixFQUFvQk8sRUFBSUQsRUN6QnhCTixFQUFvQlEsRUFBSSxTQUFTQyxFQUFLQyxHQUFRLE9BQU9DLE9BQU9DLFVBQVVDLGVBQWVDLEtBQUtMLEVBQUtDLEVBQU8sRUNBdEdWLEVBQW9CZSxFQUFJLEdDQXhCZixFQUFvQmdCLEVBQUlDLFNBQVNDLFNBQVdDLEtBQUtDLFNBQVNDLEssV0NBaEMsSUFBSUMsSUFBSSxZQUNELElBQUlBLElBQUksWUFDakIsSUFBSUEsSUFBSSxZQUNYLElBQUlBLElBQUksWUFDRixJQUFJQSxJQUFJLFlBQ1AsSUFBSUEsSUFBSSxZQUxwQyxNQTJDYUMsRUFBWSxDQUNyQkMsVUFBVyxlQUNYQyxhQUFjLGlCQUNkQyxhQUFjLGVBQ2RDLGNBQWUsY0FDZkMsYUFBYyxhQUNkQyxhQUFjLGtCQUNkQyxtQkFBb0Isd0JBQ3BCQyxjQUFlLG1CQUNmQyxtQkFBb0Isb0JBQ3BCQyxvQkFBcUIsMEJBQ3JCQyxjQUFlLHNCQUNmQyxxQkFBc0IsNkJBQ3RCQyxrQkFBbUIsdUJBQ25CQyxXQUFZLGVBQ1pDLG1CQUFvQix1QkFDcEJDLG1CQUFvQix5QkNZeEIsTUF2RUEsTUFDRUMsV0FBQUEsQ0FBWUMsRUFBTUMsRUFBa0JDLEVBQWNDLEVBQWNDLEdBQzVEQyxLQUFLQyxNQUFRTixFQUFLTyxLQUNsQkYsS0FBS0csTUFBUVIsRUFBS1MsS0FDbEJKLEtBQUtLLFFBQVVWLEVBQUtXLElBQ3BCTixLQUFLTyxTQUFXWixFQUFLYSxRQUVyQlIsS0FBS1MsY0FBZ0JYLEVBQ3JCRSxLQUFLVSxrQkFBb0JkLEVBQ3pCSSxLQUFLVyxjQUFnQmQsRUFDckJHLEtBQUtZLFlBQWNiLENBQ3JCLENBRUFjLGtCQUFBQSxHQUdFYixLQUFLYyxZQUFjZCxLQUFLZSxTQUFTQyxjQUFjLHNCQUMvQ2hCLEtBQUtjLFlBQVlHLGlCQUFpQixTQUFTLElBQU1qQixLQUFLWSxZQUFZWixRQUc5Q0EsS0FBS2UsU0FBU0MsY0FBYyx1QkFDcENDLGlCQUFpQixTQUFTLElBQU1qQixLQUFLVyxnQkFHakRYLEtBQUtrQixZQUFjbEIsS0FBS2UsU0FBU0MsY0FBYyxnQkFDL0NoQixLQUFLa0IsWUFBWUQsaUJBQWlCLFNBQVMsSUFBTWpCLEtBQUtVLGtCQUFrQixDQUFDTixLQUFNSixLQUFLRyxNQUFPRCxLQUFNRixLQUFLQyxTQUN4RyxDQUVBa0IsWUFBQUEsR0FDRSxPQUFPaEQsU0FDTjZDLGNBQWNoQixLQUFLUyxlQUNuQlcsUUFBUUosY0FBYyxTQUN0QkssV0FBVSxFQUNiLENBRUFDLFdBQUFBLEdBQ0V0QixLQUFLTyxTQUNEUCxLQUFLYyxZQUFZUyxVQUFVQyxJQUFJLDRCQUMvQnhCLEtBQUtjLFlBQVlTLFVBQVVFLE9BQU8sMkJBQ3hDLENBRUFqQixPQUFBQSxHQUNFLE9BQU9SLEtBQUtPLFFBQ2QsQ0FFQW1CLFVBQUFBLEdBQ0UxQixLQUFLZSxTQUFTVSxTQUNkekIsS0FBS2UsU0FBVyxJQUNsQixDQUVBWSxZQUFBQSxHQUNFM0IsS0FBS2UsU0FBV2YsS0FBS21CLGVBRXJCLE1BQU1TLEVBQVk1QixLQUFLZSxTQUFTQyxjQUFjLGdCQVU5QyxPQVRBWSxFQUFVQyxJQUFNN0IsS0FBS0csTUFDckJ5QixFQUFVRSxJQUFNOUIsS0FBS0MsTUFFSEQsS0FBS2UsU0FBU0MsY0FBYyxnQkFDcENlLFlBQWMvQixLQUFLQyxNQUU3QkQsS0FBS2EscUJBQ0xiLEtBQUtzQixjQUVFdEIsS0FBS2UsUUFDZCxDQUVBaUIsU0FBQUEsR0FDRSxPQUFPaEMsS0FBS0ssT0FDZCxHQ3BFVyxNQUFNNEIsRUFDakJ2QyxXQUFBQSxDQUFZd0MsRUFBUUMsR0FDaEJuQyxLQUFLb0MsZUFBaUJGLEVBQU9HLGNBQzdCckMsS0FBS3NDLHNCQUF3QkosRUFBT0sscUJBQ3BDdkMsS0FBS3dDLHFCQUF1Qk4sRUFBT08sb0JBQ25DekMsS0FBSzBDLGlCQUFtQlIsRUFBT1MsZ0JBQy9CM0MsS0FBSzRDLFlBQWNWLEVBQU9XLFdBRTFCN0MsS0FBSzhDLGFBQWVYLEVBQ3BCbkMsS0FBSytDLFdBQWEvQyxLQUFLOEMsYUFBYUUsaUJBQWlCaEQsS0FBS29DLGVBQzlELENBRUFhLGVBQUFBLENBQWdCQyxHQUNaLE1BQU1DLEVBQXNCbkQsS0FBSzhDLGFBQWE5QixjQUFjLElBQUlrQyxFQUFhRSxZQUM3RUYsRUFBYTNCLFVBQVVDLElBQUl4QixLQUFLMEMsa0JBQ2hDUyxFQUFvQnBCLFlBQWNtQixFQUFhRyxrQkFDL0NGLEVBQW9CNUIsVUFBVUMsSUFBSXhCLEtBQUs0QyxZQUMzQyxDQUVBVSxlQUFBQSxDQUFnQkosR0FDWixNQUFNQyxFQUFzQm5ELEtBQUs4QyxhQUFhOUIsY0FBYyxJQUFJa0MsRUFBYUUsWUFDN0VGLEVBQWEzQixVQUFVRSxPQUFPekIsS0FBSzBDLGtCQUNuQ1MsRUFBb0JwQixZQUFjLEdBQ2xDb0IsRUFBb0I1QixVQUFVRSxPQUFPekIsS0FBSzRDLFlBQzlDLENBRUFXLG1CQUFBQSxDQUFvQkwsR0FDWkEsRUFBYU0sU0FBU0MsTUFHdEJ6RCxLQUFLc0QsZ0JBQWdCSixHQUZyQmxELEtBQUtpRCxnQkFBZ0JDLEVBSTdCLENBRUFRLGdCQUFBQSxHQUNJLE9BQVExRCxLQUFLMkQsZUFBZUMsT0FBT1YsR0FBaUJBLEVBQWFNLFNBQVNDLE9BQzlFLENBRUFJLGFBQUFBLEdBQ0k3RCxLQUFLOEQsY0FBY3ZDLFVBQVVDLElBQUl4QixLQUFLd0Msc0JBQ3RDeEMsS0FBSzhELGNBQWNDLFVBQVcsQ0FDbEMsQ0FFQUMsYUFBQUEsR0FDSWhFLEtBQUs4RCxjQUFjdkMsVUFBVUUsT0FBT3pCLEtBQUt3QyxzQkFDekN4QyxLQUFLOEQsY0FBY0MsVUFBVyxDQUNsQyxDQUVBRSxrQkFBQUEsR0FDT2pFLEtBQUswRCxtQkFDSjFELEtBQUs2RCxnQkFFTDdELEtBQUtnRSxlQUViLENBRUFuRCxrQkFBQUEsR0FDSWIsS0FBSzJELGVBQWlCLElBQUkzRCxLQUFLOEMsYUFBYUUsaUJBQWlCaEQsS0FBS29DLGlCQUNsRXBDLEtBQUs4RCxjQUFnQjlELEtBQUs4QyxhQUFhOUIsY0FBY2hCLEtBQUtzQyx1QkFFMUR0QyxLQUFLMkQsZUFBZU8sU0FBUWhCLElBQ3hCQSxFQUFhakMsaUJBQWlCLFNBQVMsS0FDbkNqQixLQUFLdUQsb0JBQW9CTCxHQUN6QmxELEtBQUtpRSxvQkFBb0IsR0FDM0IsR0FFVixDQUVBRSxnQkFBQUEsR0FDSW5FLEtBQUs4QyxhQUFhN0IsaUJBQWlCLFVBQVdtRCxJQUMxQ0EsRUFBRUMsaUJBQ0ZyRSxLQUFLNkQsZUFBZSxJQUd4QjdELEtBQUthLG9CQUNULENBRUF5RCxlQUFBQSxHQUNJdEUsS0FBS2lFLHFCQUVMakUsS0FBSytDLFdBQVdtQixTQUFTaEIsSUFDckJsRCxLQUFLc0QsZ0JBQWdCSixFQUFhLEdBRTFDLEVDbkZXLE1BQU1xQixFQUNqQjdFLFdBQUFBLENBQVc4RSxHQUFvQixJQUFuQixjQUFFQyxHQUFlRCxFQUN6QnhFLEtBQUswRSxPQUFTdkcsU0FBUzZDLGNBQWN5RCxHQUNyQ3pFLEtBQUsyRSxhQUFlM0UsS0FBSzBFLE9BQU8xRCxjQUFjLGdCQUNsRCxDQUVBNEQsaUJBQUFBLEdBQ0k1RSxLQUFLMEUsT0FBT3pELGlCQUFpQixTQUFVNEQsSUFDL0JBLEVBQUlDLFNBQVdELEVBQUlFLGVBQ25CL0UsS0FBS2dGLE9BQ1QsSUFHSmhGLEtBQUsyRSxhQUFhMUQsaUJBQWlCLFNBQVMsSUFBTWpCLEtBQUtnRixTQUMzRCxDQUVBQyxJQUFBQSxHQUNJakYsS0FBSzBFLE9BQU9uRCxVQUFVQyxJQUFJLGdCQUMxQnJELFNBQVM4QyxpQkFBaUIsVUFBV2pCLEtBQUtrRixnQkFDOUMsQ0FFQUYsS0FBQUEsR0FDSWhGLEtBQUswRSxPQUFPbkQsVUFBVUUsT0FBTyxnQkFDN0J0RCxTQUFTZ0gsb0JBQW9CLFVBQVduRixLQUFLa0YsZ0JBQ2pELENBRUFBLGdCQUFtQkwsSUFDQSxXQUFaQSxFQUFJTyxLQUNIcEYsS0FBS2dGLE9BQ1QsRUMzQk8sTUFBTUssVUFBc0JkLEVBQ3ZDN0UsV0FBQUEsQ0FBWStFLEVBQWVhLEdBQTZDLElBQTNCQyxFQUFXQyxVQUFBQyxPQUFBLFFBQUFwSSxJQUFBbUksVUFBQSxHQUFBQSxVQUFBLEdBQUcsWUFDdkRFLE1BQU0sQ0FBRWpCLGtCQUNSekUsS0FBSzJGLE1BQVEzRixLQUFLMEUsT0FBTzFELGNBQWMsZ0JBQ3ZDaEIsS0FBSzhELGNBQWdCOUQsS0FBSzBFLE9BQU8xRCxjQUFjLGtCQUMvQ2hCLEtBQUs0RixZQUFjNUYsS0FBSzBFLE9BQU8xQixpQkFBaUIsU0FDaERoRCxLQUFLNkYsa0JBQW9CUCxFQUN6QnRGLEtBQUs4RixZQUFjOUYsS0FBSzhELGNBQWMvQixZQUN0Qy9CLEtBQUsrRixhQUFlUixDQUN4QixDQUVBUyxXQUFBQSxHQUNJaEcsS0FBSzhGLFlBQWM5RixLQUFLK0YsWUFDNUIsQ0FFQUUsV0FBQUEsR0FDSWpHLEtBQUs4RixZQUFjOUYsS0FBSzhGLFdBQzVCLENBRUFJLGVBQUFBLEdBQ0ksTUFBTUMsRUFBYyxDQUFDLEVBTXJCLE9BSkFuRyxLQUFLNEYsWUFBWTFCLFNBQVFrQyxJQUNyQkQsRUFBWUMsRUFBTWxHLE1BQVFrRyxFQUFNQyxLQUFLLElBR2xDRixDQUNYLENBRUF2QixpQkFBQUEsR0FDSWMsTUFBTWQsb0JBRU41RSxLQUFLMEUsT0FBT3pELGlCQUFpQixVQUFXNEQsSUFDcEM3RSxLQUFLNkYsa0JBQWtCN0YsS0FBS2tHLG1CQUM1QnJCLEVBQUlSLGdCQUFnQixHQUU1QixDQUVBVyxLQUFBQSxHQUNJaEYsS0FBSzJGLE1BQU1XLFFBQ1haLE1BQU1WLE9BQ1YsRUMzQ1csTUFBTXVCLEVBQ2pCN0csV0FBQUEsQ0FBVzhFLEVBQXNCMUUsR0FBYyxJQUFuQyxNQUFFMEcsRUFBSyxTQUFFQyxHQUFVakMsRUFDM0J4RSxLQUFLMEcsT0FBU0YsRUFDZHhHLEtBQUsyRyxVQUFZRixFQUNqQnpHLEtBQUtTLGNBQWdCdEMsU0FBUzZDLGNBQWNsQixFQUNoRCxDQUVBOEcsV0FBQUEsR0FDSTVHLEtBQUswRyxPQUFPeEMsU0FBUTJDLElBQ2hCN0csS0FBSzJHLFVBQVVFLEVBQUssR0FFNUIsQ0FFQUMsT0FBQUEsQ0FBUUMsR0FDSi9HLEtBQUtTLGNBQWN1RyxRQUFRRCxFQUMvQixFQ0hKLE1BQU1FLEVBQWE5SSxTQUFTNkMsY0FBYyx5QkFDcENrRyxFQUFZL0ksU0FBUzZDLGNBQWMsd0JBRW5DbUcsRUFBaUJoSixTQUFTaUosTUFBTSxhQUNoQ0MsRUFBa0JsSixTQUFTaUosTUFBTSxnQkFFakNFLEVBQW1CbkosU0FBUzZDLGNBQWMsdUJBQzFDdUcsRUFBMEJwSixTQUFTNkMsY0FBYyw4QkFHakR3RyxFQUFNLElDdEJHLE1BQ1g5SCxXQUFBQSxDQUFXOEUsR0FBdUIsSUFBdEIsUUFBRWlELEVBQU8sUUFBRUMsR0FBU2xELEVBQzVCeEUsS0FBSzJILEtBQU9GLEVBQ1p6SCxLQUFLNEgsU0FBV0YsRUFDaEIxSCxLQUFLNkgsZUFBaUJILEVBQVFJLGFBQ2xDLENBRUFDLGNBQUFBLENBQWVDLEdBQ1gsT0FBR0EsRUFBSUMsR0FDSUQsRUFBSUUsT0FFUkMsUUFBUUMsT0FBTyxTQUFTSixFQUFJSyxTQUN2QyxDQUVBQyxlQUFBQSxHQUNJLE9BQU9DLE1BQU0sR0FBR3ZJLEtBQUsySCxhQUFjLENBQy9CRCxRQUFTMUgsS0FBSzRILFdBRWJZLEtBQUt4SSxLQUFLK0gsZUFDbkIsQ0FFQVUsYUFBQUEsR0FDSSxPQUFPRixNQUFNLEdBQUd2SSxLQUFLMkgsZ0JBQWlCLENBQ2xDRCxRQUFTMUgsS0FBSzRILFdBRWpCWSxLQUFLeEksS0FBSytILGVBQ2YsQ0FFQVcsV0FBQUEsQ0FBV0MsR0FBd0IsSUFBdkIsS0FBRXpJLEVBQUksWUFBRTBJLEdBQWFELEVBQzdCLE9BQU9KLE1BQU0sR0FBR3ZJLEtBQUsySCxnQkFBaUIsQ0FDbENrQixPQUFRLFFBQ1JuQixRQUFTMUgsS0FBSzRILFNBQ2RrQixLQUFNQyxLQUFLQyxVQUFVLENBQ2pCOUksS0FBTUEsRUFDTitJLE1BQU9MLE1BR2RKLEtBQUt4SSxLQUFLK0gsZUFDZixDQUVBbUIsaUJBQUFBLENBQWlCQyxHQUFXLElBQVYsS0FBRS9JLEdBQU0rSSxFQUN0QixPQUFPWixNQUFNLEdBQUd2SSxLQUFLMkgsdUJBQXdCLENBQ3pDa0IsT0FBUSxRQUNSbkIsUUFBUzFILEtBQUs0SCxTQUNka0IsS0FBTUMsS0FBS0MsVUFBVSxDQUNqQkksT0FBUWhKLE1BR2ZvSSxLQUFLeEksS0FBSytILGVBQ2YsQ0FFQXNCLFVBQUFBLENBQVVDLEdBQXlCLElBQXhCLFNBQUVDLEVBQVEsU0FBRUMsR0FBVUYsRUFDN0IsT0FBT2YsTUFBTSxHQUFHdkksS0FBSzJILGFBQWMsQ0FDL0JrQixPQUFRLE9BQ1JuQixRQUFTMUgsS0FBSzRILFNBQ2RrQixLQUFNQyxLQUFLQyxVQUFVLENBQ2pCOUksS0FBTXFKLEVBQ05uSixLQUFNb0osTUFHYmhCLEtBQUt4SSxLQUFLK0gsZUFDZixDQUVBckcsVUFBQUEsQ0FBVytILEdBQ1AsT0FBT2xCLE1BQU0sR0FBR3ZJLEtBQUsySCxjQUFjOEIsSUFBVSxDQUN6Q1osT0FBUSxTQUNSbkIsUUFBUzFILEtBQUs0SCxXQUVqQlksS0FBS3hJLEtBQUsrSCxlQUNmLENBRUEyQixPQUFBQSxDQUFRRCxHQUNKLE9BQU9sQixNQUFNLEdBQUd2SSxLQUFLMkgsb0JBQW9COEIsSUFBVSxDQUMvQ1osT0FBUSxNQUNSbkIsUUFBUzFILEtBQUs0SCxXQUVqQlksS0FBS3hJLEtBQUsrSCxlQUNmLENBRUE0QixVQUFBQSxDQUFXRixHQUNQLE9BQU9sQixNQUFNLEdBQUd2SSxLQUFLMkgsY0FBYzhCLFVBQWdCLENBQy9DWixPQUFRLFNBQ1JuQixRQUFTMUgsS0FBSzRILFdBRWpCWSxLQUFLeEksS0FBSytILGVBQ2YsR0QvRGdCLENBQ2hCTixRQUFTLGtEQUNUQyxRQUFTLENBQ1BJLGNBQWUsdUNBQ2YsZUFBZ0Isc0JBSXRCLElBQUk4QixFQUVKekIsUUFBUTBCLElBQUksQ0FBQ3JDLEVBQUlpQixnQkFBaUJqQixFQUFJYyxvQkFDakNFLE1BQUtoRSxJQUF1QixJQUFyQnNGLEVBQVVDLEdBQU12RixFQUNwQndGLFFBQVFDLElBQUlILEdBQ1pJLEVBQVNDLFlBQVlMLEVBQVM1SixLQUFNNEosRUFBU2IsT0FDN0NpQixFQUFTRSxlQUFlTixFQUFTVixRQUNqQ1EsRUFBVSxJQUFJckQsRUFDVixDQUNJQyxNQUFPdUQsRUFDUHRELFNBQVc5RyxJQUNQLE1BQU0wSyxFQUFTQyxFQUFXM0ssR0FDMUI0SyxZQUFZekQsUUFBUXVELEVBQU8sR0FHbkM1TCxFQUFVQyxXQUVka0wsRUFBUWhELGFBQWEsSUFFeEI0RCxPQUFPQyxJQUNKVCxRQUFRQyxJQUFJUSxFQUFJLElBSXhCLE1BQU1ILEVBQWMzSyxHQUNILElBQUkrSyxFQUFLL0ssRUFBTUMsRUFBa0JDLEVBQWNwQixFQUFVRSxhQUFjb0IsR0FFeEU0QixlQUdWL0IsRUFBb0IrSyxJQUN0QkMsRUFBVzNGLEtBQUswRixFQUFVLEVBR3hCNUssRUFBYzhLLElBQ2hCQSxFQUFLckssVUFDQ2dILEVBQUltQyxXQUFXa0IsRUFBSzdJLGFBQ2pCd0csTUFBTVIsSUFDSDZDLEVBQUs5SyxZQUFXLEVBQU0sSUFFekJ5SyxPQUFPQyxJQUNKVCxRQUFRYyxNQUFNTCxFQUFJLElBRXhCakQsRUFBSWtDLFFBQVFtQixFQUFLN0ksYUFDZHdHLE1BQU1SLElBQ0g2QyxFQUFLOUssWUFBVyxFQUFLLElBRXhCeUssT0FBT0MsSUFDSlQsUUFBUWMsTUFBTUwsRUFBSSxHQUNwQixFQUlSUCxFQUFXLElFbkZGLE1BQ1h4SyxXQUFBQSxDQUFZcUwsRUFBUUMsRUFBZUMsR0FDL0JqTCxLQUFLa0wsUUFBVS9NLFNBQVM2QyxjQUFjK0osR0FDdEMvSyxLQUFLbUwsZUFBaUJoTixTQUFTNkMsY0FBY2dLLEdBQzdDaEwsS0FBS0csTUFBUWhDLFNBQVM2QyxjQUFjaUssRUFDeEMsQ0FFQUcsV0FBQUEsR0FDSSxNQUFPLENBQ0hsTCxLQUFNRixLQUFLa0wsUUFBUW5KLFlBQ25CNkcsWUFBYTVJLEtBQUttTCxlQUFlcEosWUFDakNxSCxPQUFRcEosS0FBS0csTUFBTTBCLElBRTNCLENBRUFzSSxXQUFBQSxDQUFZakssRUFBTTBJLEdBQ2Q1SSxLQUFLa0wsUUFBUW5KLFlBQWM3QixFQUMzQkYsS0FBS21MLGVBQWVwSixZQUFjNkcsQ0FDdEMsQ0FFQXdCLGNBQUFBLENBQWVoSyxHQUNYSixLQUFLRyxNQUFNMEIsSUFBTXpCLENBQ3JCLEdGOERBM0IsRUFBVU0sYUFDVk4sRUFBVU8sbUJBQ1ZQLEVBQVVRLGVBSVJvTSxFQUFpQixDQUFDLEVBRUVDLFFOMURVLENBQ2hDakosY0FBZSxnQkFDZkUscUJBQXNCLGlCQUN0QkUsb0JBQXFCLHlCQUNyQkUsZ0JBQWlCLDBCQUNqQkUsV0FBWSx1QkFDWjBJLGFBQWMsUU1xREdDLE1BQU1DLEtBQUt0TixTQUFTNkUsaUJBQWlCc0ksRUFBcUJDLGVBRWxFckgsU0FBUy9CLElBQ2YsTUFBTXVKLEVBQVksSUFBSXpKLEVBQWNxSixFQUFzQm5KLEdBQ3BEd0osRUFBV3hKLEVBQVl5SixhQUFhLFFBRTFDUCxFQUFlTSxHQUFZRCxFQUMzQkEsRUFBVXZILGtCQUFrQixJQU9uQyxNQWlCTTBILEVBQWMsSUFBSXhHLEVBQWM1RyxFQUFVSyxjQWpCbkJhLElBQ3pCa00sRUFBWTdGLGNBQ1osTUFBTSxLQUFFOUYsRUFBSSxLQUFFRSxHQUFTVCxFQUN2QixPQUFPNkgsRUFBSTZCLFdBQVduSixFQUFNRSxHQUN2Qm9JLE1BQU03SSxJQUNILE1BQU0wSyxFQUFTQyxFQUFXM0ssR0FDMUJpSyxFQUFROUMsUUFBUXVELEdBQ2hCd0IsRUFBWTdHLE9BQU8sSUFFdEJ3RixPQUFPQyxJQUNKVCxRQUFRQyxJQUFJUSxFQUFJLElBRW5CcUIsU0FBUSxLQUNMRCxFQUFZNUYsYUFBYSxHQUMzQixJQUtWaUIsRUFBVWpHLGlCQUFpQixTQUFTLEtBQ2hDb0ssRUFBZWxFLEVBQWV5RSxhQUFhLFNBQVN0SCxrQkFDcER1SCxFQUFZNUcsTUFBTSxJQUl0QixNQWVNOEcsRUFBbUIsSUFBSTFHLEVBQWM1RyxFQUFVSSxlQWZyQjhKLElBQTRCLElBQTNCLE1BQUVxRCxFQUFLLFlBQUVwRCxHQUFhRCxFQUVuRCxPQURBb0QsRUFBaUIvRixjQUNWd0IsRUFBSWtCLFlBQVlzRCxFQUFPcEQsR0FDekJKLE1BQUssS0FDRjBCLEVBQVNDLFlBQVksQ0FBRWpLLEtBQU04TCxFQUFPcEQsWUFBYUEsSUFDakRtRCxFQUFpQi9HLE9BQU8sSUFFM0J3RixPQUFPQyxJQUNKVCxRQUFRYyxNQUFNTCxFQUFJLElBRXJCcUIsU0FBUSxLQUNMQyxFQUFpQjlGLGFBQWEsR0FDaEMsSUFJVjhGLEVBQWlCbkgsb0JBRWpCcUMsRUFBV2hHLGlCQUFpQixTQUFTLEtBQ2pDLE1BQU0sS0FBRWYsRUFBSSxZQUFFMEksR0FBZ0JzQixFQUFTa0IsY0FDdkM5RCxFQUFpQmpCLE1BQVFuRyxFQUN6QnFILEVBQXdCbEIsTUFBUXVDLEVBQ2hDeUMsRUFBZWhFLEVBQWdCdUUsYUFBYSxTQUFTL0gsZ0JBQ3JEa0ksRUFBaUI5RyxNQUFNLElBSTNCLE1BQU0yRixFQUFhLElHN0pKLGNBQTZCckcsRUFDeEM3RSxXQUFBQSxDQUFZK0UsR0FDUmlCLE1BQU0sQ0FBRWpCLGtCQUNSekUsS0FBS2lNLFdBQWFqTSxLQUFLMEUsT0FBTzFELGNBQWMsZ0JBQzVDaEIsS0FBS2tNLFlBQWNsTSxLQUFLMEUsT0FBTzFELGNBQWMsaUJBRTdDMEUsTUFBTWQsbUJBQ1YsQ0FFQUssSUFBQUEsQ0FBSzBGLEdBQ0QzSyxLQUFLaU0sV0FBV2xLLFlBQWM0SSxFQUFVekssS0FDeENGLEtBQUtrTSxZQUFZcEssSUFBTTZJLEVBQVV6SyxLQUNqQ0YsS0FBS2tNLFlBQVlySyxJQUFNOEksRUFBVXZLLEtBRWpDc0YsTUFBTVQsTUFDVixHSDhJa0N4RyxFQUFVRyxjQUNoRGdNLEVBQVc1RixRQUlYLE1BQU1tSCxFQUFvQixJQUFJOUcsRUFBYzVHLEVBQVVhLGtCQUFtQjhNLEdBQ3pFRCxFQUFrQnZILG9CQUVsQixNQUFNd0gsRUFBcUJqRCxJQUFjLElBQWIsS0FBRS9JLEdBQU0rSSxFQUVoQyxPQURBZ0QsRUFBa0JuRyxjQUNYd0IsRUFBSTZFLGFBQWFqTSxHQUNuQm9JLE1BQU03SSxJQUNIdUssRUFBU0UsZUFBZXpLLEVBQUt5SixRQUM3QitDLEVBQWtCbkgsUUFDbEJtSCxFQUFrQjdGLE9BQU8sSUFFNUJrRSxPQUFPQyxJQUNKVCxRQUFRYyxNQUFNTCxFQUFJLElBRXJCcUIsU0FBUSxLQUNMSyxFQUFrQmxHLGFBQWEsR0FDakMsRUFHVnhILEVBQVVlLG1CQUFtQnlCLGlCQUFpQixTQUFTLEtBQ25Eb0ssRUFBZTVNLEVBQVVjLFdBQVdxTSxhQUFhLFNBQVN0SCxrQkFDMUQ2SCxFQUFrQmxILE1BQU0sSUFLNUIsTUFBTXhGLEVBQXFCLElJNUxaLGNBQStCOEUsRUFDMUM3RSxXQUFBQSxDQUFZK0UsRUFBZTVFLEdBQWlELElBQW5DeU0sRUFBaUI5RyxVQUFBQyxPQUFBLFFBQUFwSSxJQUFBbUksVUFBQSxHQUFBQSxVQUFBLEdBQUcsY0FDekRFLE1BQU0sQ0FBRWpCLGtCQUNSekUsS0FBS1csY0FBZ0JkLEVBQ3JCRyxLQUFLOEQsY0FBZ0I5RCxLQUFLMEUsT0FBTzFELGNBQWMsa0JBQy9DaEIsS0FBS3VNLG1CQUFxQkQsQ0FDOUIsQ0FFQTFILGlCQUFBQSxHQUNJYyxNQUFNZCxvQkFFTjVFLEtBQUs4RCxjQUFjN0MsaUJBQWlCLFNBQVU0RCxJQUMxQ0EsRUFBSVIsaUJBQ0FyRSxLQUFLd00sdUJBQ0x4TSxLQUFLd00sdUJBQ1QsR0FFUixDQUVBdkgsSUFBQUEsQ0FBS3dILEdBQ0R6TSxLQUFLd00sc0JBQXdCQyxFQUM3Qi9HLE1BQU1ULE1BQ1YsQ0FFQWUsV0FBQUEsR0FDSWhHLEtBQUs4RCxjQUFjL0IsWUFBYy9CLEtBQUt1TSxrQkFDeEMsQ0FFRnRHLFdBQUFBLEdBQ0lqRyxLQUFLOEQsY0FBYy9CLFlBQWMvQixLQUFLOEQsY0FBYy9CLFdBQ3hELEdKOEo0Q3RELEVBQVVnQixvQkFDckRvTCxJQUFVaEwsRUFBYWdMLEVBQUssSUFFakNwTCxFQUFtQm1GLG9CQUVuQixNQUFNL0UsRUFBZ0JnTCxJQUNsQnBMLEVBQW1Cd0YsTUFBSyxLQUNwQnhGLEVBQW1CdUcsY0FDbkJ3QixFQUFJOUYsV0FBV21KLEVBQUs3SSxhQUNmd0csTUFBSyxLQUNGcUMsRUFBS25KLGFBQ0xqQyxFQUFtQnVGLE9BQU8sSUFFN0J3RixPQUFPQyxJQUNKVCxRQUFRUyxJQUFJQSxFQUFJLElBRW5CcUIsU0FBUSxLQUNMck0sRUFBbUJ3RyxhQUFhLEdBQ2xDLEdBQ1IsQyIsInNvdXJjZXMiOlsid2VicGFjazovL3RyaXBsZXRlbi93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly90cmlwbGV0ZW4vd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly90cmlwbGV0ZW4vd2VicGFjay9ydW50aW1lL3B1YmxpY1BhdGgiLCJ3ZWJwYWNrOi8vdHJpcGxldGVuL3dlYnBhY2svcnVudGltZS9qc29ucCBjaHVuayBsb2FkaW5nIiwid2VicGFjazovL3RyaXBsZXRlbi8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vdHJpcGxldGVuLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly90cmlwbGV0ZW4vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3RyaXBsZXRlbi8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3RyaXBsZXRlbi8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vdHJpcGxldGVuLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly90cmlwbGV0ZW4vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdHJpcGxldGVuLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL3RyaXBsZXRlbi8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3RyaXBsZXRlbi8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3RyaXBsZXRlbi8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm0uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbi8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBfX3dlYnBhY2tfbW9kdWxlc19fO1xuXG4iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmosIHByb3ApIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApOyB9IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmIgPSBkb2N1bWVudC5iYXNlVVJJIHx8IHNlbGYubG9jYXRpb24uaHJlZjtcblxuLy8gb2JqZWN0IHRvIHN0b3JlIGxvYWRlZCBhbmQgbG9hZGluZyBjaHVua3Ncbi8vIHVuZGVmaW5lZCA9IGNodW5rIG5vdCBsb2FkZWQsIG51bGwgPSBjaHVuayBwcmVsb2FkZWQvcHJlZmV0Y2hlZFxuLy8gW3Jlc29sdmUsIHJlamVjdCwgUHJvbWlzZV0gPSBjaHVuayBsb2FkaW5nLCAwID0gY2h1bmsgbG9hZGVkXG52YXIgaW5zdGFsbGVkQ2h1bmtzID0ge1xuXHQxNzk6IDBcbn07XG5cbi8vIG5vIGNodW5rIG9uIGRlbWFuZCBsb2FkaW5nXG5cbi8vIG5vIHByZWZldGNoaW5nXG5cbi8vIG5vIHByZWxvYWRlZFxuXG4vLyBubyBITVJcblxuLy8gbm8gSE1SIG1hbmlmZXN0XG5cbi8vIG5vIG9uIGNodW5rcyBsb2FkZWRcblxuLy8gbm8ganNvbnAgZnVuY3Rpb24iLCJjb25zdCBsYWdvRGlCcmFpZXNJbWFnZSA9IG5ldyBVUkwoXCIuLi9pbWFnZXMvbGFnby5qcGdcIiwgaW1wb3J0Lm1ldGEudXJsKTtcbmNvbnN0IHZhbm9pc2VOYXRpb25hbFBhcmtJbWFnZSA9IG5ldyBVUkwoXCIuLi9pbWFnZXMvdmFub2lzZS5qcGdcIiwgaW1wb3J0Lm1ldGEudXJsKTtcbmNvbnN0IGxha2VMb3Vpc2VJbWFnZSA9IG5ldyBVUkwoXCIuLi9pbWFnZXMvbGFrZS1sb3Vpc2UuanBnXCIsIGltcG9ydC5tZXRhLnVybCk7XG5jb25zdCBsYXRlbWFySW1hZ2UgPSBuZXcgVVJMKFwiLi4vaW1hZ2VzL2xhdGVtYXIuanBnXCIsIGltcG9ydC5tZXRhLnVybCk7XG5jb25zdCBiYWxkTW91bnRhaW5zSW1hZ2UgPSBuZXcgVVJMKFwiLi4vaW1hZ2VzL2JhbGQtbW91bnRhaW5zLmpwZ1wiLCBpbXBvcnQubWV0YS51cmwpO1xuY29uc3QgeW9zZW1pdGVWYWxsZXlJbWFnZSA9IG5ldyBVUkwoXCIuLi9pbWFnZXMveW9zZW1pdGUuanBnXCIsIGltcG9ydC5tZXRhLnVybCk7XG5cbmV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gICAge1xuICAgICAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXG4gICAgICAgIGxpbms6IGxhZ29EaUJyYWllc0ltYWdlXG4gICAgfSxcbiAgICB7XG4gICAgICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXG4gICAgICAgIGxpbms6IHZhbm9pc2VOYXRpb25hbFBhcmtJbWFnZVxuICAgIH0sXG4gICAge1xuICAgICAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXG4gICAgICAgIGxpbms6IGxha2VMb3Vpc2VJbWFnZVxuICAgIH0sXG4gICAge1xuICAgICAgICBuYW1lOiBcIkxhdGVtYXJcIixcbiAgICAgICAgbGluazogbGF0ZW1hckltYWdlXG4gICAgfSxcbiAgICB7XG4gICAgICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcbiAgICAgICAgbGluazogYmFsZE1vdW50YWluc0ltYWdlXG4gICAgfSxcbiAgICB7XG4gICAgICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXG4gICAgICAgIGxpbms6IHlvc2VtaXRlVmFsbGV5SW1hZ2VcbiAgICB9XG5dO1xuXG5leHBvcnQgY29uc3QgZm9ybVZhbGlkYXRpb25Db25maWcgPSB7XG4gICAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXG4gICAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19idXR0b25cIixcbiAgICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25fZGlzYWJsZWRcIixcbiAgICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X3R5cGVfZXJyb3JcIixcbiAgICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvcl92aXNpYmxlXCIsXG4gICAgZm9ybVNlbGVjdG9yOiBcImZvcm1cIixcbn07XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RvcnMgPSB7XG4gICAgY2FyZHNMaXN0OiAnLmNhcmRzX19saXN0JyxcbiAgICBjYXJkVGVtcGxhdGU6ICcjY2FyZC10ZW1wbGF0ZScsXG4gICAgcHJldmlld1BvcHVwOiAnI2ltYWdlLW1vZGFsJyxcbiAgICBlZGl0Rm9ybVBvcHVwOiAnI2VkaXQtbW9kYWwnLFxuICAgIGFkZEZvcm1Qb3B1cDogJyNhZGQtbW9kYWwnLFxuICAgIHByb2ZpbGVUaXRsZTogJy5wcm9maWxlX190aXRsZScsXG4gICAgcHJvZmlsZURlc2NyaXB0aW9uOiAnLnByb2ZpbGVfX2Rlc2NyaXB0aW9uJyxcbiAgICBwcm9maWxlQXZhdGFyOiAnLnByb2ZpbGVfX2F2YXRhcicsXG4gICAgZm9ybU1vZGFsQ29udGFpbmVyOiAnLm1vZGFsX19jb250YWluZXInLFxuICAgIGltYWdlTW9kYWxDb250YWluZXI6ICcubW9kYWxfX2NvbnRhaW5lci1pbWFnZScsXG4gICAgZm9ybUlucHV0TmFtZTogJyNwcm9maWxlLWlucHV0LW5hbWUnLFxuICAgIGZvcm1JbnB1dERlc2NyaXB0aW9uOiAnI3Byb2ZpbGUtaW5wdXQtZGVzY3JpcHRpb24nLFxuICAgIGNoYW5nZUF2YXRhclBvcHVwOiBcIiNjaGFuZ2UtYXZhdGFyLW1vZGFsXCIsXG4gICAgYXZhdGFyRm9ybTogXCIjYXZhdGFyLWZvcm1cIixcbiAgICB1cGRhdGVBdmF0YXJCdXR0b246IFwiI21vZGFsLWF2YXRhci1idXR0b25cIixcbiAgICBjb25maXJtRGVsZXRlTW9kYWw6IFwiI2NvbmZpcm0tZGVsZXRlLW1vZGFsXCIsXG59O1xuIiwiY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKGRhdGEsIGhhbmRsZUltYWdlQ2xpY2ssIGhhbmRsZURlbGV0ZSwgY2FyZFNlbGVjdG9yLCBzZXRJc0xpa2VkKSB7XG4gICAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xuICAgICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcbiAgICAgIHRoaXMuX2NhcmRJZCA9IGRhdGEuX2lkO1xuICAgICAgdGhpcy5faXNMaWtlZCA9IGRhdGEuaXNMaWtlZDtcblxuICAgICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xuICAgICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayA9IGhhbmRsZUltYWdlQ2xpY2s7XG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGUgPSBoYW5kbGVEZWxldGU7XG4gICAgICB0aGlzLl9zZXRJc0xpa2VkID0gc2V0SXNMaWtlZDtcbiAgICB9XG4gICAgXG4gICAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuXG4gICAgICAvL2xpa2UgYnV0dG9uXG4gICAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpO1xuICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuX3NldElzTGlrZWQodGhpcykpO1xuXG4gICAgICAvL3RyYXNoIGJ1dHRvblxuICAgICAgY29uc3QgdHJhc2hCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX190cmFzaC1idXR0b24nKTtcbiAgICAgIHRyYXNoQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5faGFuZGxlRGVsZXRlKTtcblxuICAgICAgLy9pbWFnZSBtb2RhbCBjbGlja1xuICAgICAgdGhpcy5faW1hZ2VNb2RhbCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2ltYWdlJyk7XG4gICAgICB0aGlzLl9pbWFnZU1vZGFsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5faGFuZGxlSW1hZ2VDbGljayh7bGluazogdGhpcy5fbGluaywgbmFtZTogdGhpcy5fbmFtZX0pKTtcbiAgICB9XG5cbiAgICBfZ2V0VGVtcGxhdGUoKSB7XG4gICAgICByZXR1cm4gZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcbiAgICB9XG5cbiAgICBfaGFuZGxlTGlrZSgpIHtcbiAgICAgIHRoaXMuX2lzTGlrZWQgXG4gICAgICAgID8gdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpIFxuICAgICAgICA6IHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKVxuICAgIH1cblxuICAgIGlzTGlrZWQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5faXNMaWtlZDtcbiAgICB9XG5cbiAgICBkZWxldGVDYXJkKCkge1xuICAgICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcbiAgICAgIHRoaXMuX2VsZW1lbnQgPSBudWxsO1xuICAgIH1cblxuICAgIGdlbmVyYXRlQ2FyZCgpIHtcbiAgICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xuXG4gICAgICBjb25zdCBjYXJkSW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XG4gICAgICBjYXJkSW1hZ2Uuc3JjID0gdGhpcy5fbGluaztcbiAgICAgIGNhcmRJbWFnZS5hbHQgPSB0aGlzLl9uYW1lO1xuXG4gICAgICBjb25zdCBjYXJkVGl0bGUgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIik7XG4gICAgICBjYXJkVGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuXG4gICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICAgICAgdGhpcy5faGFuZGxlTGlrZSgpO1xuXG4gICAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcbiAgICB9XG5cbiAgICBnZXRDYXJkSWQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fY2FyZElkO1xuICAgIH1cbiAgfVxuXG5leHBvcnQgZGVmYXVsdCBDYXJkOyIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICAgIGNvbnN0cnVjdG9yKGNvbmZpZywgZm9ybUVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IGNvbmZpZy5pbnB1dFNlbGVjdG9yO1xuICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IGNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcbiAgICAgICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xuICAgICAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBjb25maWcuaW5wdXRFcnJvckNsYXNzO1xuICAgICAgICB0aGlzLl9lcnJvckNsYXNzID0gY29uZmlnLmVycm9yQ2xhc3M7XG5cbiAgICAgICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKTtcbiAgICB9XG5cbiAgICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYClcbiAgICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICAgICAgZXJyb3JNZXNzYWdlRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcbiAgICAgICAgZXJyb3JNZXNzYWdlRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICAgIH1cblxuICAgIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKVxuICAgICAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgICAgICBlcnJvck1lc3NhZ2VFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcbiAgICAgICAgZXJyb3JNZXNzYWdlRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICAgIH1cblxuICAgIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XG4gICAgICAgIGlmKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgICAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBfaGFzSW52YWxpZElucHV0KCkge1xuICAgICAgICByZXR1cm4gIXRoaXMuX2lucHV0RWxlbWVudHMuZXZlcnkoKGlucHV0RWxlbWVudCkgPT4gaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKTtcbiAgICB9XG5cbiAgICBkaXNhYmxlQnV0dG9uKCkge1xuICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBfZW5hYmxlQnV0dG9uKCkge1xuICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gICAgfVxuXG4gICAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xuICAgICAgICBpZih0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xuICAgICAgICAgICAgdGhpcy5kaXNhYmxlQnV0dG9uKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9lbmFibGVCdXR0b24oKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgdGhpcy5faW5wdXRFbGVtZW50cyA9IFsuLi50aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXTtcbiAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG5cbiAgICAgICAgdGhpcy5faW5wdXRFbGVtZW50cy5mb3JFYWNoKGlucHV0RWxlbWVudCA9PiB7XG4gICAgICAgICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XG4gICAgICAgICAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICAgICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGUpID0+IHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHRoaXMuZGlzYWJsZUJ1dHRvbigpO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpXG4gICAgfVxuXG4gICAgcmVzZXRWYWxpZGF0aW9uKCkge1xuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuXG4gICAgICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudClcbiAgICAgICAgfSk7XG4gICAgfVxuXG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gICAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yIH0pIHtcbiAgICAgICAgdGhpcy5fcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICAgICAgICB0aGlzLl9jbG9zZUJ1dHRvbiA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9fY2xvc2UnKTtcbiAgICB9XG5cbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZ0KSA9PiB7XG4gICAgICAgICAgICBpZiAoZXZ0LnRhcmdldCA9PT0gZXZ0LmN1cnJlbnRUYXJnZXQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuX2Nsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5jbG9zZSgpKTtcbiAgICB9XG5cbiAgICBvcGVuKCkge1xuICAgICAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKCdtb2RhbF9vcGVuZWQnKTtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgICB9XG5cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZSgnbW9kYWxfb3BlbmVkJyk7XG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gICAgfVxuXG4gICAgX2hhbmRsZUVzY0Nsb3NlID0gKGV2dCkgPT4ge1xuICAgICAgICBpZihldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICB9XG59IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCwgbG9hZGluZ1RleHQgPSBcIlNhdmluZy4uLlwiKSB7XG4gICAgICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcbiAgICAgICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9fZm9ybScpO1xuICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2J1dHRvbicpO1xuICAgICAgICB0aGlzLl9mb3JtSW5wdXRzID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvckFsbCgnaW5wdXQnKTtcbiAgICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XG4gICAgICAgIHRoaXMuX2J1dHRvblRleHQgPSB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQ7XG4gICAgICAgIHRoaXMuX2xvYWRpbmdUZXh0ID0gbG9hZGluZ1RleHQ7XG4gICAgfVxuXG4gICAgc2hvd0xvYWRpbmcoKSB7XG4gICAgICAgIHRoaXMuX2J1dHRvblRleHQgPSB0aGlzLl9sb2FkaW5nVGV4dDtcbiAgICB9XG5cbiAgICBoaWRlTG9hZGluZygpIHtcbiAgICAgICAgdGhpcy5fYnV0dG9uVGV4dCA9IHRoaXMuX2J1dHRvblRleHQ7XG4gICAgfVxuXG4gICAgX2dldElucHV0VmFsdWVzKCkge1xuICAgICAgICBjb25zdCBpbnB1dE9iamVjdCA9IHt9O1xuXG4gICAgICAgIHRoaXMuX2Zvcm1JbnB1dHMuZm9yRWFjaChpbnB1dCA9PiB7XG4gICAgICAgICAgICBpbnB1dE9iamVjdFtpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgICAgICB9KVxuXG4gICAgICAgIHJldHVybiBpbnB1dE9iamVjdDtcbiAgICB9XG5cbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgICAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xuICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLl9mb3JtLnJlc2V0KClcbiAgICAgICAgc3VwZXIuY2xvc2UoKTsgICAgICAgIFxuICAgIH1cbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjYXJkU2VsZWN0b3IpIHtcbiAgICAgICAgdGhpcy5faXRlbXMgPSBpdGVtcztcbiAgICAgICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICAgICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihjYXJkU2VsZWN0b3IpO1xuICAgIH1cblxuICAgIHJlbmRlckl0ZW1zKCkge1xuICAgICAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgICAgIHRoaXMuX2NhcmRTZWxlY3Rvci5wcmVwZW5kKGVsZW1lbnQpO1xuICAgIH1cbn0iLCJpbXBvcnQgeyBmb3JtVmFsaWRhdGlvbkNvbmZpZywgaW5pdGlhbENhcmRzLCBzZWxlY3RvcnMgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgU3R5bGVzIGZyb20gXCIuL2luZGV4LmNzc1wiO1xuXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhDb25maXJtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm0uanNcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGkuanNcIjtcblxuY29uc3QgZWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19lZGl0LWJ1dHRvbicpO1xuY29uc3QgYWRkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2FkZC1idXR0b24nKTtcblxuY29uc3QgYWRkTmV3Q2FyZEZvcm0gPSBkb2N1bWVudC5mb3Jtc1snY2FyZC1mb3JtJ107XG5jb25zdCBwcm9maWxlRWRpdEZvcm0gPSBkb2N1bWVudC5mb3Jtc1sncHJvZmlsZS1mb3JtJ107XG5cbmNvbnN0IHByb2ZpbGVOYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcHJvZmlsZS1pbnB1dC1uYW1lJyk7XG5jb25zdCBwcm9maWxlRGVzY3JpcHRpb25JbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwcm9maWxlLWlucHV0LWRlc2NyaXB0aW9uJyk7XG5cbi8vQVBJIFxuY29uc3QgYXBpID0gbmV3IEFwaSh7XG4gICAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MVwiLFxuICAgIGhlYWRlcnM6IHtcbiAgICAgIGF1dGhvcml6YXRpb246IFwiMTc0MTk2ZDYtNDViZC00OTBhLWJjMGUtMzliMDc1NGM3ZGE5XCIsXG4gICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICB9LFxufSk7XG5cbmxldCBzZWN0aW9uO1xuXG5Qcm9taXNlLmFsbChbYXBpLmZldGNoVXNlckluZm8oKSwgYXBpLmdldEluaXRpYWxDYXJkcygpXSlcbiAgICAudGhlbigoW3VzZXJEYXRhLCBjYXJkc10pID0+IHtcbiAgICAgICAgY29uc29sZS5sb2codXNlckRhdGEpO1xuICAgICAgICB1c2VySW5mby5zZXRVc2VySW5mbyh1c2VyRGF0YS5uYW1lLCB1c2VyRGF0YS5hYm91dCk7XG4gICAgICAgIHVzZXJJbmZvLnNldEF2YXRhckltYWdlKHVzZXJEYXRhLmF2YXRhcik7XG4gICAgICAgIHNlY3Rpb24gPSBuZXcgU2VjdGlvbihcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpdGVtczogY2FyZHMsXG4gICAgICAgICAgICAgICAgcmVuZGVyZXI6IChkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhcmRFbCA9IHJlbmRlckNhcmQoZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIGNhcmRTZWN0aW9uLmFkZEl0ZW0oY2FyZEVsKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNlbGVjdG9ycy5jYXJkc0xpc3RcbiAgICAgICAgKTtcbiAgICAgICAgc2VjdGlvbi5yZW5kZXJJdGVtcygpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICB9KTtcblxuLy9yZW5kZXJpbmcgY2FyZFxuY29uc3QgcmVuZGVyQ2FyZCA9IChkYXRhKSA9PiB7XG4gICAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKGRhdGEsIGhhbmRsZUltYWdlQ2xpY2ssIGhhbmRsZURlbGV0ZSwgc2VsZWN0b3JzLmNhcmRUZW1wbGF0ZSwgc2V0SXNMaWtlZCk7XG5cbiAgICByZXR1cm4gY2FyZC5nZW5lcmF0ZUNhcmQoKTtcbn07XG5cbmNvbnN0IGhhbmRsZUltYWdlQ2xpY2sgPSAoaW1hZ2VEYXRhKSA9PiB7XG4gICAgcG9wdXBJbWFnZS5vcGVuKGltYWdlRGF0YSlcbn1cblxuY29uc3Qgc2V0SXNMaWtlZCA9IChjYXJkKSA9PiB7XG4gICAgY2FyZC5pc0xpa2VkKClcbiAgICAgICAgPyBhcGkuZGVsZXRlTGlrZShjYXJkLmdldENhcmRJZCgpKVxuICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICAgICAgICAgIGNhcmQuc2V0SXNMaWtlZChmYWxzZSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICAgICAgICB9KVxuICAgICAgICA6IGFwaS5hZGRMaWtlKGNhcmQuZ2V0Q2FyZElkKCkpXG4gICAgICAgICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgICAgICAgICAgY2FyZC5zZXRJc0xpa2VkKHRydWUpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgICAgICAgfSlcbn1cblxuLy9Vc2VySW5mb1xuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oXG4gICAgc2VsZWN0b3JzLnByb2ZpbGVUaXRsZSwgXG4gICAgc2VsZWN0b3JzLnByb2ZpbGVEZXNjcmlwdGlvbiwgXG4gICAgc2VsZWN0b3JzLnByb2ZpbGVBdmF0YXIsXG4pO1xuXG4vLyB2YWxpZGF0aW9uXG5jb25zdCBmb3JtVmFsaWRhdG9ycyA9IHt9O1xuXG5jb25zdCBlbmFibGVWYWxpZGF0aW9uID0gKGZvcm1WYWxpZGF0aW9uQ29uZmlnKSA9PiB7XG4gICAgY29uc3QgZm9ybUxpc3QgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoZm9ybVZhbGlkYXRpb25Db25maWcuZm9ybVNlbGVjdG9yKSk7XG5cbiAgICBmb3JtTGlzdC5mb3JFYWNoKChmb3JtRWxlbWVudCkgPT4ge1xuICAgICAgIGNvbnN0IHZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGZvcm1WYWxpZGF0aW9uQ29uZmlnLCBmb3JtRWxlbWVudCk7XG4gICAgICAgY29uc3QgZm9ybU5hbWUgPSBmb3JtRWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpOyBcblxuICAgICAgIGZvcm1WYWxpZGF0b3JzW2Zvcm1OYW1lXSA9IHZhbGlkYXRvcjtcbiAgICAgICB2YWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuICAgIH0pO1xufVxuXG5lbmFibGVWYWxpZGF0aW9uKGZvcm1WYWxpZGF0aW9uQ29uZmlnKTtcblxuLy8gQWRkaW5nIE5ldyBDYXJkIEZvcm1cbmNvbnN0IGhhbmRsZUFkZENhcmRTdWJtaXQgPSAoZGF0YSkgPT4ge1xuICAgIGFkZENhcmRGb3JtLnNob3dMb2FkaW5nKCk7XG4gICAgY29uc3QgeyBuYW1lLCBsaW5rIH0gPSBkYXRhO1xuICAgIHJldHVybiBhcGkuYWRkTmV3Q2FyZChuYW1lLCBsaW5rKVxuICAgICAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY2FyZEVsID0gcmVuZGVyQ2FyZChkYXRhKTtcbiAgICAgICAgICAgIHNlY3Rpb24uYWRkSXRlbShjYXJkRWwpO1xuICAgICAgICAgICAgYWRkQ2FyZEZvcm0uY2xvc2UoKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycilcbiAgICAgICAgfSlcbiAgICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICAgICAgYWRkQ2FyZEZvcm0uaGlkZUxvYWRpbmcoKTtcbiAgICAgICAgfSk7XG59XG5cbmNvbnN0IGFkZENhcmRGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0oc2VsZWN0b3JzLmFkZEZvcm1Qb3B1cCwgaGFuZGxlQWRkQ2FyZFN1Ym1pdCk7XG5cbmFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBmb3JtVmFsaWRhdG9yc1thZGROZXdDYXJkRm9ybS5nZXRBdHRyaWJ1dGUoJ25hbWUnKV0ucmVzZXRWYWxpZGF0aW9uKCk7XG4gICAgYWRkQ2FyZEZvcm0ub3BlbigpO1xufSlcblxuLy9FZGl0IFByb2ZpbGUgRm9ybVxuY29uc3QgaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQgPSAoeyB0aXRsZSwgZGVzY3JpcHRpb24gfSkgPT4ge1xuICAgIGVkaXRQcm9maWxlTW9kYWwuc2hvd0xvYWRpbmcoKTtcbiAgICByZXR1cm4gYXBpLmVkaXRQcm9maWxlKHRpdGxlLCBkZXNjcmlwdGlvbilcbiAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgdXNlckluZm8uc2V0VXNlckluZm8oeyBuYW1lOiB0aXRsZSwgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uIH0pO1xuICAgICAgICAgICAgZWRpdFByb2ZpbGVNb2RhbC5jbG9zZSgpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgICB9KVxuICAgICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgICAgICBlZGl0UHJvZmlsZU1vZGFsLmhpZGVMb2FkaW5nKCk7XG4gICAgICAgIH0pO1xufVxuXG5jb25zdCBlZGl0UHJvZmlsZU1vZGFsID0gbmV3IFBvcHVwV2l0aEZvcm0oc2VsZWN0b3JzLmVkaXRGb3JtUG9wdXAsIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KTtcbmVkaXRQcm9maWxlTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuZWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBjb25zdCB7IG5hbWUsIGRlc2NyaXB0aW9uIH0gPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xuICAgIHByb2ZpbGVOYW1lSW5wdXQudmFsdWUgPSBuYW1lO1xuICAgIHByb2ZpbGVEZXNjcmlwdGlvbklucHV0LnZhbHVlID0gZGVzY3JpcHRpb247XG4gICAgZm9ybVZhbGlkYXRvcnNbcHJvZmlsZUVkaXRGb3JtLmdldEF0dHJpYnV0ZSgnbmFtZScpXS5kaXNhYmxlQnV0dG9uKCk7XG4gICAgZWRpdFByb2ZpbGVNb2RhbC5vcGVuKCk7XG59KVxuXG4vL1BvcHVwV2l0aEltYWdlXG5jb25zdCBwb3B1cEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKHNlbGVjdG9ycy5wcmV2aWV3UG9wdXApO1xucG9wdXBJbWFnZS5jbG9zZSgpO1xuXG4vL0NoYW5naW5nIGF2YXRhclxuXG5jb25zdCB1cGRhdGVBdmF0YXJNb2RhbCA9IG5ldyBQb3B1cFdpdGhGb3JtKHNlbGVjdG9ycy5jaGFuZ2VBdmF0YXJQb3B1cCwgaGFuZGxlVXBkYXRlQXZhdGFyKTtcbnVwZGF0ZUF2YXRhck1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IGhhbmRsZVVwZGF0ZUF2YXRhciA9ICh7IGxpbmsgfSkgPT4ge1xuICAgIHVwZGF0ZUF2YXRhck1vZGFsLnNob3dMb2FkaW5nKCk7XG4gICAgcmV0dXJuIGFwaS51cGRhdGVBdmF0YXIobGluaylcbiAgICAgICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgICAgIHVzZXJJbmZvLnNldEF2YXRhckltYWdlKGRhdGEuYXZhdGFyKTtcbiAgICAgICAgICAgIHVwZGF0ZUF2YXRhck1vZGFsLmNsb3NlKCk7XG4gICAgICAgICAgICB1cGRhdGVBdmF0YXJNb2RhbC5yZXNldCgpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgICB9KVxuICAgICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgICAgICB1cGRhdGVBdmF0YXJNb2RhbC5oaWRlTG9hZGluZygpO1xuICAgICAgICB9KVxufVxuXG5zZWxlY3RvcnMudXBkYXRlQXZhdGFyQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIGZvcm1WYWxpZGF0b3JzW3NlbGVjdG9ycy5hdmF0YXJGb3JtLmdldEF0dHJpYnV0ZSgnbmFtZScpXS5yZXNldFZhbGlkYXRpb24oKTtcbiAgICB1cGRhdGVBdmF0YXJNb2RhbC5vcGVuKCk7XG59KVxuXG4vL0NvbmZpcm0gZGVsZXRlIG1vZGFsXG5cbmNvbnN0IGNvbmZpcm1EZWxldGVNb2RhbCA9IG5ldyBQb3B1cFdpdGhDb25maXJtKHNlbGVjdG9ycy5jb25maXJtRGVsZXRlTW9kYWwsIFxuICAgIChjYXJkKSA9PiB7aGFuZGxlRGVsZXRlKGNhcmQpfSk7XG5cbmNvbmZpcm1EZWxldGVNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBoYW5kbGVEZWxldGUgPSAoY2FyZCkgPT4ge1xuICAgIGNvbmZpcm1EZWxldGVNb2RhbC5vcGVuKCgpID0+IHtcbiAgICAgICAgY29uZmlybURlbGV0ZU1vZGFsLnNob3dMb2FkaW5nKCk7XG4gICAgICAgIGFwaS5kZWxldGVDYXJkKGNhcmQuZ2V0Q2FyZElkKCkpXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgY2FyZC5kZWxldGVDYXJkKCk7XG4gICAgICAgICAgICAgICAgY29uZmlybURlbGV0ZU1vZGFsLmNsb3NlKCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycihlcnIpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25maXJtRGVsZXRlTW9kYWwuaGlkZUxvYWRpbmcoKTtcbiAgICAgICAgICAgIH0pXG4gICAgfSlcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xuICAgIGNvbnN0cnVjdG9yKHsgYmFzZVVybCwgaGVhZGVycyB9KSB7XG4gICAgICAgIHRoaXMuX3VybCA9IGJhc2VVcmw7XG4gICAgICAgIHRoaXMuX2hlYWRlcnMgPSBoZWFkZXJzO1xuICAgICAgICB0aGlzLl9hdXRob3JpemF0aW9uID0gaGVhZGVycy5hdXRob3JpemF0aW9uO1xuICAgIH1cblxuICAgIF9jaGVja1Jlc3BvbnNlKHJlcykge1xuICAgICAgICBpZihyZXMub2spIHtcbiAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3IgJHtyZXMuc3RhdHVzfWApO1xuICAgIH1cblxuICAgIGdldEluaXRpYWxDYXJkcygpIHtcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHNgLCB7XG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICAgIH1cbiAgICAgIFxuICAgIGZldGNoVXNlckluZm8oKSB7XG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L3VzZXJzL21lYCwge1xuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XG4gICAgfVxuXG4gICAgZWRpdFByb2ZpbGUoeyBuYW1lLCBkZXNjcmlwdGlvbiB9KSB7XG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L3VzZXJzL21lYCwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBcbiAgICAgICAgICAgICAgICBuYW1lOiBuYW1lLCBcbiAgICAgICAgICAgICAgICBhYm91dDogZGVzY3JpcHRpb24sIFxuICAgICAgICAgICAgfSksXG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICAgIH1cblxuICAgIGVkaXRQcm9maWxlQXZhdGFyKHsgbGluayB9KSB7XG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgXG4gICAgICAgICAgICAgICAgYXZhdGFyOiBsaW5rLFxuICAgICAgICAgICAgfSksXG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICAgIH1cblxuICAgIGFkZE5ld0NhcmQoeyBjYXJkTmFtZSwgY2FyZExpbmsgfSkge1xuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkc2AsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBcbiAgICAgICAgICAgICAgICBuYW1lOiBjYXJkTmFtZSwgXG4gICAgICAgICAgICAgICAgbGluazogY2FyZExpbmssXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XG4gICAgfVxuXG4gICAgZGVsZXRlQ2FyZChjYXJkSWQpIHtcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHMvJHtjYXJkSWR9YCwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XG4gICAgfVxuXG4gICAgYWRkTGlrZShjYXJkSWQpIHtcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHMvbGlrZXMvJHtjYXJkSWR9YCwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBVVFwiLFxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XG4gICAgfVxuXG4gICAgZGVsZXRlTGlrZShjYXJkSWQpIHtcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XG4gICAgfVxuICB9IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICAgIGNvbnN0cnVjdG9yKG5hbWVFbCwgZGVzY3JpcHRpb25FbCwgYXZhdGFyRWwpIHtcbiAgICAgICAgdGhpcy5fbmFtZUVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lRWwpO1xuICAgICAgICB0aGlzLl9kZXNjcmlwdGlvbkVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihkZXNjcmlwdGlvbkVsKTtcbiAgICAgICAgdGhpcy5fbGluayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYXZhdGFyRWwpO1xuICAgIH1cblxuICAgIGdldFVzZXJJbmZvKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbmFtZTogdGhpcy5fbmFtZUVsLnRleHRDb250ZW50LFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IHRoaXMuX2Rlc2NyaXB0aW9uRWwudGV4dENvbnRlbnQsXG4gICAgICAgICAgICBhdmF0YXI6IHRoaXMuX2xpbmsuc3JjLFxuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2V0VXNlckluZm8obmFtZSwgZGVzY3JpcHRpb24pIHtcbiAgICAgICAgdGhpcy5fbmFtZUVsLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICAgICAgdGhpcy5fZGVzY3JpcHRpb25FbC50ZXh0Q29udGVudCA9IGRlc2NyaXB0aW9uO1xuICAgIH1cblxuICAgIHNldEF2YXRhckltYWdlKGxpbmspIHtcbiAgICAgICAgdGhpcy5fbGluay5zcmMgPSBsaW5rO1xuICAgIH1cbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgICAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XG4gICAgICAgIHRoaXMuX21vZGFsTmFtZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9fbmFtZScpO1xuICAgICAgICB0aGlzLl9tb2RhbEltYWdlID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLm1vZGFsX19pbWFnZScpO1xuXG4gICAgICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgfVxuXG4gICAgb3BlbihpbWFnZURhdGEpIHtcbiAgICAgICAgdGhpcy5fbW9kYWxOYW1lLnRleHRDb250ZW50ID0gaW1hZ2VEYXRhLm5hbWU7XG4gICAgICAgIHRoaXMuX21vZGFsSW1hZ2UuYWx0ID0gaW1hZ2VEYXRhLm5hbWU7XG4gICAgICAgIHRoaXMuX21vZGFsSW1hZ2Uuc3JjID0gaW1hZ2VEYXRhLmxpbms7XG5cbiAgICAgICAgc3VwZXIub3BlbigpO1xuICAgIH1cbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoQ29uZmlybSBleHRlbmRzIFBvcHVwIHtcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVEZWxldGUsIGxvYWRpbmdCdXR0b25UZXh0ID0gXCJEZWxldGluZy4uLlwiKSB7XG4gICAgICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcbiAgICAgICAgdGhpcy5faGFuZGxlRGVsZXRlID0gaGFuZGxlRGVsZXRlO1xuICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19idXR0b25cIik7XG4gICAgICAgIHRoaXMuX2xvYWRpbmdCdXR0b25UZXh0ID0gbG9hZGluZ0J1dHRvblRleHQ7XG4gICAgfVxuXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2dCkgPT4ge1xuICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBpZiAodGhpcy5faGFuZGxlRGVsZXRlQ2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9oYW5kbGVEZWxldGVDYWxsYmFjaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBvcGVuKGhhbmRsZURlbGV0ZUNhbGxiYWNrKSB7XG4gICAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNhbGxiYWNrID0gaGFuZGxlRGVsZXRlQ2FsbGJhY2s7XG4gICAgICAgIHN1cGVyLm9wZW4oKTtcbiAgICB9XG5cbiAgICBzaG93TG9hZGluZygpIHtcbiAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gdGhpcy5fbG9hZGluZ0J1dHRvblRleHQ7XG4gICAgICB9XG4gICAgXG4gICAgaGlkZUxvYWRpbmcoKSB7XG4gICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudDtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJtIiwibyIsIm9iaiIsInByb3AiLCJPYmplY3QiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJwIiwiYiIsImRvY3VtZW50IiwiYmFzZVVSSSIsInNlbGYiLCJsb2NhdGlvbiIsImhyZWYiLCJVUkwiLCJzZWxlY3RvcnMiLCJjYXJkc0xpc3QiLCJjYXJkVGVtcGxhdGUiLCJwcmV2aWV3UG9wdXAiLCJlZGl0Rm9ybVBvcHVwIiwiYWRkRm9ybVBvcHVwIiwicHJvZmlsZVRpdGxlIiwicHJvZmlsZURlc2NyaXB0aW9uIiwicHJvZmlsZUF2YXRhciIsImZvcm1Nb2RhbENvbnRhaW5lciIsImltYWdlTW9kYWxDb250YWluZXIiLCJmb3JtSW5wdXROYW1lIiwiZm9ybUlucHV0RGVzY3JpcHRpb24iLCJjaGFuZ2VBdmF0YXJQb3B1cCIsImF2YXRhckZvcm0iLCJ1cGRhdGVBdmF0YXJCdXR0b24iLCJjb25maXJtRGVsZXRlTW9kYWwiLCJjb25zdHJ1Y3RvciIsImRhdGEiLCJoYW5kbGVJbWFnZUNsaWNrIiwiaGFuZGxlRGVsZXRlIiwiY2FyZFNlbGVjdG9yIiwic2V0SXNMaWtlZCIsInRoaXMiLCJfbmFtZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJfY2FyZElkIiwiX2lkIiwiX2lzTGlrZWQiLCJpc0xpa2VkIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX2hhbmRsZURlbGV0ZSIsIl9zZXRJc0xpa2VkIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2xpa2VCdXR0b24iLCJfZWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJhZGRFdmVudExpc3RlbmVyIiwiX2ltYWdlTW9kYWwiLCJfZ2V0VGVtcGxhdGUiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2hhbmRsZUxpa2UiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJkZWxldGVDYXJkIiwiZ2VuZXJhdGVDYXJkIiwiY2FyZEltYWdlIiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJnZXRDYXJkSWQiLCJGb3JtVmFsaWRhdG9yIiwiY29uZmlnIiwiZm9ybUVsZW1lbnQiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfZm9ybUVsZW1lbnQiLCJfaW5wdXRMaXN0IiwicXVlcnlTZWxlY3RvckFsbCIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWxlbWVudCIsImVycm9yTWVzc2FnZUVsZW1lbnQiLCJpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hpZGVJbnB1dEVycm9yIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGFzSW52YWxpZElucHV0IiwiX2lucHV0RWxlbWVudHMiLCJldmVyeSIsImRpc2FibGVCdXR0b24iLCJfc3VibWl0QnV0dG9uIiwiZGlzYWJsZWQiLCJfZW5hYmxlQnV0dG9uIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiZm9yRWFjaCIsImVuYWJsZVZhbGlkYXRpb24iLCJlIiwicHJldmVudERlZmF1bHQiLCJyZXNldFZhbGlkYXRpb24iLCJQb3B1cCIsIl9yZWYiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwIiwiX2Nsb3NlQnV0dG9uIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJldnQiLCJ0YXJnZXQiLCJjdXJyZW50VGFyZ2V0IiwiY2xvc2UiLCJvcGVuIiwiX2hhbmRsZUVzY0Nsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImtleSIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0IiwibG9hZGluZ1RleHQiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJzdXBlciIsIl9mb3JtIiwiX2Zvcm1JbnB1dHMiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9idXR0b25UZXh0IiwiX2xvYWRpbmdUZXh0Iiwic2hvd0xvYWRpbmciLCJoaWRlTG9hZGluZyIsIl9nZXRJbnB1dFZhbHVlcyIsImlucHV0T2JqZWN0IiwiaW5wdXQiLCJ2YWx1ZSIsInJlc2V0IiwiU2VjdGlvbiIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJyZW5kZXJJdGVtcyIsIml0ZW0iLCJhZGRJdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJlZGl0QnV0dG9uIiwiYWRkQnV0dG9uIiwiYWRkTmV3Q2FyZEZvcm0iLCJmb3JtcyIsInByb2ZpbGVFZGl0Rm9ybSIsInByb2ZpbGVOYW1lSW5wdXQiLCJwcm9maWxlRGVzY3JpcHRpb25JbnB1dCIsImFwaSIsImJhc2VVcmwiLCJoZWFkZXJzIiwiX3VybCIsIl9oZWFkZXJzIiwiX2F1dGhvcml6YXRpb24iLCJhdXRob3JpemF0aW9uIiwiX2NoZWNrUmVzcG9uc2UiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiZ2V0SW5pdGlhbENhcmRzIiwiZmV0Y2giLCJ0aGVuIiwiZmV0Y2hVc2VySW5mbyIsImVkaXRQcm9maWxlIiwiX3JlZjIiLCJkZXNjcmlwdGlvbiIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiYWJvdXQiLCJlZGl0UHJvZmlsZUF2YXRhciIsIl9yZWYzIiwiYXZhdGFyIiwiYWRkTmV3Q2FyZCIsIl9yZWY0IiwiY2FyZE5hbWUiLCJjYXJkTGluayIsImNhcmRJZCIsImFkZExpa2UiLCJkZWxldGVMaWtlIiwic2VjdGlvbiIsImFsbCIsInVzZXJEYXRhIiwiY2FyZHMiLCJjb25zb2xlIiwibG9nIiwidXNlckluZm8iLCJzZXRVc2VySW5mbyIsInNldEF2YXRhckltYWdlIiwiY2FyZEVsIiwicmVuZGVyQ2FyZCIsImNhcmRTZWN0aW9uIiwiY2F0Y2giLCJlcnIiLCJDYXJkIiwiaW1hZ2VEYXRhIiwicG9wdXBJbWFnZSIsImNhcmQiLCJlcnJvciIsIm5hbWVFbCIsImRlc2NyaXB0aW9uRWwiLCJhdmF0YXJFbCIsIl9uYW1lRWwiLCJfZGVzY3JpcHRpb25FbCIsImdldFVzZXJJbmZvIiwiZm9ybVZhbGlkYXRvcnMiLCJmb3JtVmFsaWRhdGlvbkNvbmZpZyIsImZvcm1TZWxlY3RvciIsIkFycmF5IiwiZnJvbSIsInZhbGlkYXRvciIsImZvcm1OYW1lIiwiZ2V0QXR0cmlidXRlIiwiYWRkQ2FyZEZvcm0iLCJmaW5hbGx5IiwiZWRpdFByb2ZpbGVNb2RhbCIsInRpdGxlIiwiX21vZGFsTmFtZSIsIl9tb2RhbEltYWdlIiwidXBkYXRlQXZhdGFyTW9kYWwiLCJoYW5kbGVVcGRhdGVBdmF0YXIiLCJ1cGRhdGVBdmF0YXIiLCJsb2FkaW5nQnV0dG9uVGV4dCIsIl9sb2FkaW5nQnV0dG9uVGV4dCIsIl9oYW5kbGVEZWxldGVDYWxsYmFjayIsImhhbmRsZURlbGV0ZUNhbGxiYWNrIl0sInNvdXJjZVJvb3QiOiIifQ==