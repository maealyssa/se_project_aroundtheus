!function(){"use strict";var e={960:function(e,t,s){e.exports=s.p+"190142da37235e3079a8.jpg"},291:function(e,t,s){e.exports=s.p+"9aed7cb3f54c0faa1f9f.jpg"},822:function(e,t,s){e.exports=s.p+"0fb96793ab89da938a7d.jpg"},328:function(e,t,s){e.exports=s.p+"395d21149564d1293c88.jpg"},705:function(e,t,s){e.exports=s.p+"a22751dd8a0e22ceb5f6.jpg"},561:function(e,t,s){e.exports=s.p+"0df918d480d675e4708e.jpg"}},t={};function s(r){var i=t[r];if(void 0!==i)return i.exports;var n=t[r]={exports:{}};return e[r](n,n.exports,s),n.exports}s.m=e,s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s.b=document.baseURI||self.location.href,function(){new URL(s(291),s.b),new URL(s(705),s.b),new URL(s(822),s.b),new URL(s(328),s.b),new URL(s(960),s.b),new URL(s(561),s.b);const e={cardsList:".cards__list",cardTemplate:"#card-template",previewPopup:"#image-modal",editFormPopup:"#edit-modal",addFormPopup:"#add-modal",profileTitle:".profile__title",profileDescription:".profile__description",profileAvatar:".profile__avatar",formModalContainer:".modal__container",imageModalContainer:".modal__container-image",formInputName:"#profile-input-name",formInputDescription:"#profile-input-description",changeAvatarPopup:"#change-avatar-modal",avatarForm:"#avatar-form",confirmDeleteModal:"#confirm-delete-modal"};var t=class{constructor(e,t,s,r,i,n){this._name=e.name,this._link=e.link,this._cardId=e._id,this._likes=e.likes,this._cardSelector=t,this._handleImageClick=s,this._handleDelete=i,this._handleLikeCard=r,this._currentUserId=n,this._owner=e.owner._id}_setEventListeners(){this.likeButton=this._element.querySelector(".card__like-button"),this.likeButton.addEventListener("click",(()=>this._setIsLiked(this))),this._element.querySelector(".card__trash-button").addEventListener("click",(()=>this._handleDelete)),this._imageModal=this._element.querySelector(".card__image"),this._imageModal.addEventListener("click",(()=>this._handleImageClick({link:this._link,name:this._name})))}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}handleLike(){this.isLiked?this.likeButton.classList.add("card__like-button_active"):this.likeButton.classList.remove("card__like-button_active")}isLiked(){return this._likes.some((e=>e._cardId===this._currentUserId))}deleteCard(){this._element.remove(),this._element=null}generateCard(){this._element=this._getTemplate();const e=this._element.querySelector(".card__image");return e.src=this._link,e.alt=this._name,this._element.querySelector(".card__title").textContent=this._name,this._setEventListeners(),this.handleLike(),this._element}};class r{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=t,this._inputList=this._formElement.querySelectorAll(this._inputSelector)}_showInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_hasInvalidInput(){return!this._inputElements.every((e=>e.validity.valid))}disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}_enableButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_toggleButtonState(){this._hasInvalidInput()?this.disableButton():this._enableButton()}_setEventListeners(){this._inputElements=[...this._formElement.querySelectorAll(this._inputSelector)],this._submitButton=this._formElement.querySelector(this._submitButtonSelector),this._inputElements.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault(),this.disableButton()})),this._setEventListeners()}resetValidation(){this._toggleButtonState(),this._inputList.forEach((e=>{this._hideInputError(e)}))}}class i{constructor(e){let{popupSelector:t}=e;this._popup=document.querySelector(t),this._closeButton=this._popup.querySelector(".modal__close")}setEventListeners(){this._popup.addEventListener("click",(e=>{e.target===e.currentTarget&&this.close()})),this._closeButton.addEventListener("click",(()=>this.close()))}open(){this._popup.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popup.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose=e=>{"Escape"===e.key&&this.close()}}class n extends i{constructor(e,t){super({popupSelector:e}),this._form=this._popup.querySelector(".modal__form"),this._submitButton=this._popup.querySelector(".modal__button"),this._formInputs=this._popup.querySelectorAll("input"),this._handleFormSubmit=t,this._buttonText=this._submitButton.textContent}_getInputValues(){const e={};return this._formInputs.forEach((t=>{e[t.name]=t.value})),e}setEventListeners(){super.setEventListeners(),this._popup.addEventListener("submit",(()=>{this._handleFormSubmit(this._getInputValues())}))}renderLoading(e){this._submitButton.textContent=e?"Loading...":this._buttonText}close(){this._form.reset(),super.close()}}class o{constructor(e,t){let{items:s,renderer:r}=e;this._items=s,this._renderer=r,this._cardSelector=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._cardSelector.prepend(e)}}const a=document.querySelector(".profile__edit-button"),l=document.querySelector(".profile__add-button"),c=document.querySelector(".profile__avatar"),d=document.forms["card-form"],h=document.forms["profile-form"],u=new class{constructor(e){let{nameEl:t,descriptionEl:s,avatarEl:r}=e;this._nameEl=document.querySelector(t),this._descriptionEl=document.querySelector(s),this._link=document.querySelector(r)}getUserInfo(){return{name:this._nameEl.textContent,description:this._descriptionEl.textContent,avatar:this._link.src}}setUserInfo(e){let{name:t,description:s}=e;this._nameEl.textContent=t,this._descriptionEl.textContent=s}setAvatarImage(e){this._link.src=e}}({nameEl:e.profileTitle,descriptionEl:e.profileDescription,avatarEl:e.profileAvatar}),_=new class{constructor(e){let{baseUrl:t,headers:s}=e;this._url=t,this._headers=s,this._authorization=s.authorization}_checkResponse(e){return e.ok?e.json():Promise.reject(`Error ${e.status}`)}getInitialCards(){return fetch(`${this._url}/cards`,{headers:this._headers}).then(this._checkResponse)}fetchUserInfo(){return fetch(`${this._url}/users/me`,{headers:this._headers}).then(this._checkResponse)}editProfile(e){let{name:t,description:s}=e;return fetch(`${this._url}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:s})}).then(this._checkResponse)}editProfileAvatar(e){let{link:t}=e;return fetch(`${this._url}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:t})}).then(this._checkResponse)}addNewCard(e){let{cardName:t,cardLink:s}=e;return fetch(`${this._url}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:s})}).then(this._checkResponse)}deleteCard(e){return fetch(`${this._url}/cards/${e}`,{method:"DELETE",headers:this._headers}).then(this._checkResponse)}addLike(e){return fetch(`${this._url}/cards/${e}/likes`,{method:"PUT",headers:this._headers}).then(this._checkResponse)}deleteLike(e){return fetch(`${this._url}/cards/${e}/likes`,{method:"DELETE",headers:this._headers}).then(this._checkResponse)}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"174196d6-45bd-490a-bc0e-39b0754c7da9","Content-Type":"application/json"}});let p,m;Promise.all([_.fetchUserInfo(),_.getInitialCards()]).then((t=>{let[s,r]=t;m=s._id,u.setUserInfo({name:s.name,description:s.about}),u.setAvatarImage(s.avatar),p=new o({items:r,renderer:e=>{const t=b(e);p.addItem(t)}},e.cardsList),p.renderItems()})).catch((e=>{console.log(e)}));const f=e=>{S.open(e)},v=e=>{y.open(),y.setSubmitAction((()=>{y.renderLoading(!0),_.deleteCard(cardId).then((()=>{e.deleteCard(),y.close()})).catch((e=>{console.log(e)})).finally((()=>{y.renderLoading(!1)}))}))},E=e=>{e?_.removeLike(data).catch((e=>{console.log(e)})):_.addLike(data).catch((e=>{console.log(e)}))},b=e=>new t(e,f,E,v,m).generateCard(),L={};var g;g={inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible",formSelector:"form"},Array.from(document.querySelectorAll(g.formSelector)).forEach((e=>{const t=new r(g,e),s=e.getAttribute("name");L[s]=t,t.enableValidation()}));const k=new n(e.changeAvatarPopup,(e=>{k.renderLoading(!0),_.editProfileAvatar(e).then((e=>{u.setAvatarImage(e.avatar),k.close()})).catch((e=>{console.error(e)})).finally((()=>{k.renderLoading(!1)}))}));k.setEventListeners(),c.addEventListener("click",(()=>{k.open(),L[e.avatarForm.getAttribute("name")].resetValidation()}));const S=new class extends i{constructor(e){super({popupSelector:e}),this._modalName=this._popup.querySelector(".modal__name"),this._modalImage=this._popup.querySelector(".modal__image"),super.setEventListeners()}open(e){this._modalName.textContent=e.name,this._modalImage.alt=e.name,this._modalImage.src=e.link,super.open()}}(e.previewPopup);S.close();const y=new class extends i{constructor(e){super({popupSelector:e}),this._submitButton=this._popup.querySelector(".modal__button")}setEventListeners(){super.setEventListeners(),this._submitButton.addEventListener("submit",(e=>{e.preventDefault(),this._handleDeleteSubmit()}))}open(e){this._handleDeleteCallback=e,super.open()}setSubmitAction(e){this._handleDeleteSubmit=e}}(e.confirmDeleteModal,(e=>{v(e)}));y.setEventListeners();const I=new n(e.editFormPopup,(e=>{I.renderLoading(!0),_.editProfile(e).then((()=>{u.setUserInfo({name:e.name,description:e.description}),I.close()})).catch((e=>{console.error(e)})).finally((()=>{I.renderLoading(!1)}))}));I.setEventListeners(),a.addEventListener("click",(()=>{const{name:t,description:s}=u.getUserInfo();e.formInputName.value=t,e.formInputDescription.value=s,L[h.getAttribute("name")].resetValidation(),I.open()}));const C=new n(e.addFormPopup,(e=>{C.renderLoading(!0),_.addNewCard(e).then((e=>{const t=b(e);p.addItem(t),C.close()})).catch((e=>{console.log(e)})).finally((()=>{C.renderLoading(!1)}))}));C.setEventListeners(),l.addEventListener("click",(()=>{L[d.getAttribute("name")].resetValidation(),C.open()}))}()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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dHJpcGxldGVuL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3RyaXBsZXRlbi93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3RyaXBsZXRlbi93ZWJwYWNrL3J1bnRpbWUvcHVibGljUGF0aCIsIndlYnBhY2s6Ly90cmlwbGV0ZW4vd2VicGFjay9ydW50aW1lL2pzb25wIGNodW5rIGxvYWRpbmciLCJ3ZWJwYWNrOi8vdHJpcGxldGVuLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly90cmlwbGV0ZW4vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3RyaXBsZXRlbi8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vdHJpcGxldGVuLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vdHJpcGxldGVuLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly90cmlwbGV0ZW4vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3RyaXBsZXRlbi8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly90cmlwbGV0ZW4vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly90cmlwbGV0ZW4vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vdHJpcGxldGVuLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vdHJpcGxldGVuLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuLy8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbl9fd2VicGFja19yZXF1aXJlX18ubSA9IF9fd2VicGFja19tb2R1bGVzX187XG5cbiIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iaiwgcHJvcCkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCk7IH0iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiOyIsIl9fd2VicGFja19yZXF1aXJlX18uYiA9IGRvY3VtZW50LmJhc2VVUkkgfHwgc2VsZi5sb2NhdGlvbi5ocmVmO1xuXG4vLyBvYmplY3QgdG8gc3RvcmUgbG9hZGVkIGFuZCBsb2FkaW5nIGNodW5rc1xuLy8gdW5kZWZpbmVkID0gY2h1bmsgbm90IGxvYWRlZCwgbnVsbCA9IGNodW5rIHByZWxvYWRlZC9wcmVmZXRjaGVkXG4vLyBbcmVzb2x2ZSwgcmVqZWN0LCBQcm9taXNlXSA9IGNodW5rIGxvYWRpbmcsIDAgPSBjaHVuayBsb2FkZWRcbnZhciBpbnN0YWxsZWRDaHVua3MgPSB7XG5cdDE3OTogMFxufTtcblxuLy8gbm8gY2h1bmsgb24gZGVtYW5kIGxvYWRpbmdcblxuLy8gbm8gcHJlZmV0Y2hpbmdcblxuLy8gbm8gcHJlbG9hZGVkXG5cbi8vIG5vIEhNUlxuXG4vLyBubyBITVIgbWFuaWZlc3RcblxuLy8gbm8gb24gY2h1bmtzIGxvYWRlZFxuXG4vLyBubyBqc29ucCBmdW5jdGlvbiIsImNvbnN0IGxhZ29EaUJyYWllc0ltYWdlID0gbmV3IFVSTChcIi4uL2ltYWdlcy9sYWdvLmpwZ1wiLCBpbXBvcnQubWV0YS51cmwpO1xuY29uc3QgdmFub2lzZU5hdGlvbmFsUGFya0ltYWdlID0gbmV3IFVSTChcIi4uL2ltYWdlcy92YW5vaXNlLmpwZ1wiLCBpbXBvcnQubWV0YS51cmwpO1xuY29uc3QgbGFrZUxvdWlzZUltYWdlID0gbmV3IFVSTChcIi4uL2ltYWdlcy9sYWtlLWxvdWlzZS5qcGdcIiwgaW1wb3J0Lm1ldGEudXJsKTtcbmNvbnN0IGxhdGVtYXJJbWFnZSA9IG5ldyBVUkwoXCIuLi9pbWFnZXMvbGF0ZW1hci5qcGdcIiwgaW1wb3J0Lm1ldGEudXJsKTtcbmNvbnN0IGJhbGRNb3VudGFpbnNJbWFnZSA9IG5ldyBVUkwoXCIuLi9pbWFnZXMvYmFsZC1tb3VudGFpbnMuanBnXCIsIGltcG9ydC5tZXRhLnVybCk7XG5jb25zdCB5b3NlbWl0ZVZhbGxleUltYWdlID0gbmV3IFVSTChcIi4uL2ltYWdlcy95b3NlbWl0ZS5qcGdcIiwgaW1wb3J0Lm1ldGEudXJsKTtcblxuZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAgICB7XG4gICAgICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcbiAgICAgICAgbGluazogbGFnb0RpQnJhaWVzSW1hZ2VcbiAgICB9LFxuICAgIHtcbiAgICAgICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcbiAgICAgICAgbGluazogdmFub2lzZU5hdGlvbmFsUGFya0ltYWdlXG4gICAgfSxcbiAgICB7XG4gICAgICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcbiAgICAgICAgbGluazogbGFrZUxvdWlzZUltYWdlXG4gICAgfSxcbiAgICB7XG4gICAgICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxuICAgICAgICBsaW5rOiBsYXRlbWFySW1hZ2VcbiAgICB9LFxuICAgIHtcbiAgICAgICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxuICAgICAgICBsaW5rOiBiYWxkTW91bnRhaW5zSW1hZ2VcbiAgICB9LFxuICAgIHtcbiAgICAgICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcbiAgICAgICAgbGluazogeW9zZW1pdGVWYWxsZXlJbWFnZVxuICAgIH1cbl07XG5cbmV4cG9ydCBjb25zdCBmb3JtVmFsaWRhdGlvbkNvbmZpZyA9IHtcbiAgICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9faW5wdXRcIixcbiAgICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2J1dHRvblwiLFxuICAgIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX2J1dHRvbl9kaXNhYmxlZFwiLFxuICAgIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxuICAgIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcbiAgICBmb3JtU2VsZWN0b3I6IFwiZm9ybVwiLFxufTtcblxuZXhwb3J0IGNvbnN0IHNlbGVjdG9ycyA9IHtcbiAgICBjYXJkc0xpc3Q6ICcuY2FyZHNfX2xpc3QnLFxuICAgIGNhcmRUZW1wbGF0ZTogJyNjYXJkLXRlbXBsYXRlJyxcbiAgICBwcmV2aWV3UG9wdXA6ICcjaW1hZ2UtbW9kYWwnLFxuICAgIGVkaXRGb3JtUG9wdXA6ICcjZWRpdC1tb2RhbCcsXG4gICAgYWRkRm9ybVBvcHVwOiAnI2FkZC1tb2RhbCcsXG4gICAgcHJvZmlsZVRpdGxlOiAnLnByb2ZpbGVfX3RpdGxlJyxcbiAgICBwcm9maWxlRGVzY3JpcHRpb246ICcucHJvZmlsZV9fZGVzY3JpcHRpb24nLFxuICAgIHByb2ZpbGVBdmF0YXI6ICcucHJvZmlsZV9fYXZhdGFyJyxcbiAgICBmb3JtTW9kYWxDb250YWluZXI6ICcubW9kYWxfX2NvbnRhaW5lcicsXG4gICAgaW1hZ2VNb2RhbENvbnRhaW5lcjogJy5tb2RhbF9fY29udGFpbmVyLWltYWdlJyxcbiAgICBmb3JtSW5wdXROYW1lOiAnI3Byb2ZpbGUtaW5wdXQtbmFtZScsXG4gICAgZm9ybUlucHV0RGVzY3JpcHRpb246ICcjcHJvZmlsZS1pbnB1dC1kZXNjcmlwdGlvbicsXG4gICAgY2hhbmdlQXZhdGFyUG9wdXA6IFwiI2NoYW5nZS1hdmF0YXItbW9kYWxcIixcbiAgICBhdmF0YXJGb3JtOiBcIiNhdmF0YXItZm9ybVwiLFxuICAgIGNvbmZpcm1EZWxldGVNb2RhbDogXCIjY29uZmlybS1kZWxldGUtbW9kYWxcIixcbn07XG4iLCJjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoZGF0YSwgY2FyZFNlbGVjdG9yLCBoYW5kbGVJbWFnZUNsaWNrLCBoYW5kbGVMaWtlQ2FyZCwgaGFuZGxlRGVsZXRlLCBjdXJyZW50VXNlcklkKSB7XG4gICAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xuICAgICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcbiAgICAgIHRoaXMuX2NhcmRJZCA9IGRhdGEuX2lkO1xuICAgICAgdGhpcy5fbGlrZXMgPSBkYXRhLmxpa2VzO1xuXG4gICAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XG4gICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcbiAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZSA9IGhhbmRsZURlbGV0ZTtcbiAgICAgIHRoaXMuX2hhbmRsZUxpa2VDYXJkID0gaGFuZGxlTGlrZUNhcmQ7XG4gICAgICB0aGlzLl9jdXJyZW50VXNlcklkID0gY3VycmVudFVzZXJJZDtcbiAgICAgIHRoaXMuX293bmVyID0gZGF0YS5vd25lci5faWQ7XG4gICAgfVxuICAgIFxuICAgIF9zZXRFdmVudExpc3RlbmVycygpIHtcblxuICAgICAgLy9saWtlIGJ1dHRvblxuICAgICAgdGhpcy5saWtlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpO1xuICAgICAgdGhpcy5saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5fc2V0SXNMaWtlZCh0aGlzKSk7XG5cbiAgICAgIC8vdHJhc2ggYnV0dG9uXG4gICAgICBjb25zdCB0cmFzaEJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX3RyYXNoLWJ1dHRvbicpO1xuICAgICAgdHJhc2hCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLl9oYW5kbGVEZWxldGUpO1xuXG4gICAgICAvL2ltYWdlIG1vZGFsIGNsaWNrXG4gICAgICB0aGlzLl9pbWFnZU1vZGFsID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9faW1hZ2UnKTtcbiAgICAgIHRoaXMuX2ltYWdlTW9kYWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHtsaW5rOiB0aGlzLl9saW5rLCBuYW1lOiB0aGlzLl9uYW1lfSkpO1xuICAgIH1cblxuICAgIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICAgIHJldHVybiBkb2N1bWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xuICAgIH1cblxuICAgIGhhbmRsZUxpa2UoKSB7XG4gICAgICBpZih0aGlzLmlzTGlrZWQpIHtcbiAgICAgICAgdGhpcy5saWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIilcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMubGlrZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpXG4gICAgICB9XG4gICAgfVxuXG4gICAgaXNMaWtlZCgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9saWtlcy5zb21lKChsaWtlKSA9PiBsaWtlLl9jYXJkSWQgPT09IHRoaXMuX2N1cnJlbnRVc2VySWQpO1xuICAgIH1cblxuICAgIGRlbGV0ZUNhcmQoKSB7XG4gICAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xuICAgICAgdGhpcy5fZWxlbWVudCA9IG51bGw7XG4gICAgfVxuXG4gICAgZ2VuZXJhdGVDYXJkKCkge1xuICAgICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XG5cbiAgICAgIGNvbnN0IGNhcmRJbWFnZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcbiAgICAgIGNhcmRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xuICAgICAgY2FyZEltYWdlLmFsdCA9IHRoaXMuX25hbWU7XG5cbiAgICAgIGNvbnN0IGNhcmRUaXRsZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKTtcbiAgICAgIGNhcmRUaXRsZS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG5cbiAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgICB0aGlzLmhhbmRsZUxpa2UoKTtcblxuICAgICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XG4gICAgfVxuICB9XG5cbmV4cG9ydCBkZWZhdWx0IENhcmQ7IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gICAgY29uc3RydWN0b3IoY29uZmlnLCBmb3JtRWxlbWVudCkge1xuICAgICAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gY29uZmlnLmlucHV0U2VsZWN0b3I7XG4gICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuICAgICAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3M7XG4gICAgICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IGNvbmZpZy5pbnB1dEVycm9yQ2xhc3M7XG4gICAgICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBjb25maWcuZXJyb3JDbGFzcztcblxuICAgICAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xuICAgICAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpO1xuICAgIH1cblxuICAgIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKVxuICAgICAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgICAgICBlcnJvck1lc3NhZ2VFbGVtZW50LnRleHRDb250ZW50ID0gaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlO1xuICAgICAgICBlcnJvck1lc3NhZ2VFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XG4gICAgfVxuXG4gICAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2VFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApXG4gICAgICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgICAgIGVycm9yTWVzc2FnZUVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xuICAgICAgICBlcnJvck1lc3NhZ2VFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XG4gICAgfVxuXG4gICAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcbiAgICAgICAgaWYoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9oYXNJbnZhbGlkSW5wdXQoKSB7XG4gICAgICAgIHJldHVybiAhdGhpcy5faW5wdXRFbGVtZW50cy5ldmVyeSgoaW5wdXRFbGVtZW50KSA9PiBpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpO1xuICAgIH1cblxuICAgIGRpc2FibGVCdXR0b24oKSB7XG4gICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIF9lbmFibGVCdXR0b24oKSB7XG4gICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XG4gICAgICAgIGlmKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XG4gICAgICAgICAgICB0aGlzLmRpc2FibGVCdXR0b24oKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2VuYWJsZUJ1dHRvbigpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICB0aGlzLl9pbnB1dEVsZW1lbnRzID0gWy4uLnRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcildO1xuICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcblxuICAgICAgICB0aGlzLl9pbnB1dEVsZW1lbnRzLmZvckVhY2goaW5wdXRFbGVtZW50ID0+IHtcbiAgICAgICAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgICAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZSkgPT4ge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdGhpcy5kaXNhYmxlQnV0dG9uKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKClcbiAgICB9XG5cbiAgICByZXNldFZhbGlkYXRpb24oKSB7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG5cbiAgICAgICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KVxuICAgICAgICB9KTtcbiAgICB9XG5cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IgfSkge1xuICAgICAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gICAgICAgIHRoaXMuX2Nsb3NlQnV0dG9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLm1vZGFsX19jbG9zZScpO1xuICAgIH1cblxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQpID0+IHtcbiAgICAgICAgICAgIGlmIChldnQudGFyZ2V0ID09PSBldnQuY3VycmVudFRhcmdldCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5fY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmNsb3NlKCkpO1xuICAgIH1cblxuICAgIG9wZW4oKSB7XG4gICAgICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoJ21vZGFsX29wZW5lZCcpO1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICAgIH1cblxuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKCdtb2RhbF9vcGVuZWQnKTtcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgICB9XG5cbiAgICBfaGFuZGxlRXNjQ2xvc2UgPSAoZXZ0KSA9PiB7XG4gICAgICAgIGlmKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfVxuICAgIH1cbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XG4gICAgICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcbiAgICAgICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9fZm9ybScpO1xuICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2J1dHRvbicpO1xuICAgICAgICB0aGlzLl9mb3JtSW5wdXRzID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvckFsbCgnaW5wdXQnKTtcbiAgICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XG4gICAgICAgIHRoaXMuX2J1dHRvblRleHQgPSB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQ7XG4gICAgfVxuXG4gICAgX2dldElucHV0VmFsdWVzKCkge1xuICAgICAgICBjb25zdCBpbnB1dE9iamVjdCA9IHt9O1xuXG4gICAgICAgIHRoaXMuX2Zvcm1JbnB1dHMuZm9yRWFjaChpbnB1dCA9PiB7XG4gICAgICAgICAgICBpbnB1dE9iamVjdFtpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gaW5wdXRPYmplY3Q7XG4gICAgfVxuXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgICAgICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmVuZGVyTG9hZGluZyhpc0xvYWRpbmcpIHtcbiAgICAgICAgaWYoaXNMb2FkaW5nKSB7XG4gICAgICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBcIkxvYWRpbmcuLi5cIjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IHRoaXMuX2J1dHRvblRleHQ7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy5fZm9ybS5yZXNldCgpXG4gICAgICAgIHN1cGVyLmNsb3NlKCk7ICAgICAgICBcbiAgICB9XG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gICAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY2FyZFNlbGVjdG9yKSB7XG4gICAgICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XG4gICAgICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY2FyZFNlbGVjdG9yKTtcbiAgICB9XG5cbiAgICByZW5kZXJJdGVtcygpIHtcbiAgICAgICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgICAgIHRoaXMuX2NhcmRTZWxlY3Rvci5wcmVwZW5kKGVsZW1lbnQpO1xuICAgIH1cbn0iLCJpbXBvcnQgeyBmb3JtVmFsaWRhdGlvbkNvbmZpZywgaW5pdGlhbENhcmRzLCBzZWxlY3RvcnMgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgU3R5bGVzIGZyb20gXCIuL2luZGV4LmNzc1wiO1xuXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhDb25maXJtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm0uanNcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGkuanNcIjtcblxuY29uc3QgZWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19lZGl0LWJ1dHRvbicpO1xuY29uc3QgYWRkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2FkZC1idXR0b24nKTtcbmNvbnN0IHByb2ZpbGVBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYXZhdGFyJyk7XG5cbmNvbnN0IGFkZE5ld0NhcmRGb3JtID0gZG9jdW1lbnQuZm9ybXNbJ2NhcmQtZm9ybSddO1xuY29uc3QgcHJvZmlsZUVkaXRGb3JtID0gZG9jdW1lbnQuZm9ybXNbJ3Byb2ZpbGUtZm9ybSddO1xuXG4vL1VzZXJJbmZvXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XG4gICAgbmFtZUVsOiBzZWxlY3RvcnMucHJvZmlsZVRpdGxlLCBcbiAgICBkZXNjcmlwdGlvbkVsOiBzZWxlY3RvcnMucHJvZmlsZURlc2NyaXB0aW9uLCBcbiAgICBhdmF0YXJFbDogc2VsZWN0b3JzLnByb2ZpbGVBdmF0YXIsXG59KTtcblxuLy9BUEkgXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcbiAgICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxXCIsXG4gICAgaGVhZGVyczoge1xuICAgICAgYXV0aG9yaXphdGlvbjogXCIxNzQxOTZkNi00NWJkLTQ5MGEtYmMwZS0zOWIwNzU0YzdkYTlcIixcbiAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgIH0sXG59KTtcblxubGV0IHNlY3Rpb247XG5sZXQgY3VycmVudFVzZXJJZDtcblxuUHJvbWlzZS5hbGwoW2FwaS5mZXRjaFVzZXJJbmZvKCksIGFwaS5nZXRJbml0aWFsQ2FyZHMoKV0pXG4gICAgLnRoZW4oKFt1c2VyRGF0YSwgY2FyZHNdKSA9PiB7XG4gICAgICAgIGN1cnJlbnRVc2VySWQgPSB1c2VyRGF0YS5faWQ7XG4gICAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHtcbiAgICAgICAgICAgIG5hbWU6IHVzZXJEYXRhLm5hbWUsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogdXNlckRhdGEuYWJvdXQsXG4gICAgICAgIH0pO1xuICAgICAgICB1c2VySW5mby5zZXRBdmF0YXJJbWFnZSh1c2VyRGF0YS5hdmF0YXIpO1xuICAgICAgICBzZWN0aW9uID0gbmV3IFNlY3Rpb24oXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaXRlbXM6IGNhcmRzLFxuICAgICAgICAgICAgICAgIHJlbmRlcmVyOiAoZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjYXJkID0gcmVuZGVyQ2FyZChkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgc2VjdGlvbi5hZGRJdGVtKGNhcmQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZWxlY3RvcnMuY2FyZHNMaXN0XG4gICAgICAgICk7XG4gICAgICAgIHNlY3Rpb24ucmVuZGVySXRlbXMoKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgfSk7XG5cbi8vcmVuZGVyaW5nIGNhcmQgaGFuZGxlcnNcbmNvbnN0IGhhbmRsZUltYWdlQ2xpY2sgPSAoaW1hZ2VEYXRhKSA9PiB7XG4gICAgcG9wdXBJbWFnZS5vcGVuKGltYWdlRGF0YSlcbn1cblxuY29uc3QgaGFuZGxlRGVsZXRlID0gKGNhcmQpID0+IHtcbiAgICBjb25maXJtRGVsZXRlTW9kYWwub3BlbigpO1xuICAgIGNvbmZpcm1EZWxldGVNb2RhbC5zZXRTdWJtaXRBY3Rpb24oKCkgPT4ge1xuICAgICAgICBjb25maXJtRGVsZXRlTW9kYWwucmVuZGVyTG9hZGluZyh0cnVlKTtcbiAgICAgICAgYXBpLmRlbGV0ZUNhcmQoY2FyZElkKVxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNhcmQuZGVsZXRlQ2FyZCgpO1xuICAgICAgICAgICAgICAgIGNvbmZpcm1EZWxldGVNb2RhbC5jbG9zZSgpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uZmlybURlbGV0ZU1vZGFsLnJlbmRlckxvYWRpbmcoZmFsc2UpO1xuICAgICAgICAgICAgfSlcbiAgICB9KVxufVxuXG5jb25zdCBoYW5kbGVMaWtlQ2FyZCA9IChyZW1vdmVMaWtlKSA9PiB7XG4gICAgaWYocmVtb3ZlTGlrZSkge1xuICAgICAgICBhcGkucmVtb3ZlTGlrZShkYXRhKVxuICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgICBhcGkuYWRkTGlrZShkYXRhKVxuICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgICAgfSk7XG4gICAgfVxufVxuXG5jb25zdCByZW5kZXJDYXJkID0gKGRhdGEpID0+IHtcbiAgICBjb25zdCBjYXJkID0gbmV3IENhcmQoZGF0YSwgaGFuZGxlSW1hZ2VDbGljaywgaGFuZGxlTGlrZUNhcmQsIGhhbmRsZURlbGV0ZSwgY3VycmVudFVzZXJJZCwpO1xuXG4gICAgcmV0dXJuIGNhcmQuZ2VuZXJhdGVDYXJkKCk7XG59O1xuXG4vLyB2YWxpZGF0aW9uXG5jb25zdCBmb3JtVmFsaWRhdG9ycyA9IHt9O1xuXG5jb25zdCBlbmFibGVWYWxpZGF0aW9uID0gKGZvcm1WYWxpZGF0aW9uQ29uZmlnKSA9PiB7XG4gICAgY29uc3QgZm9ybUxpc3QgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoZm9ybVZhbGlkYXRpb25Db25maWcuZm9ybVNlbGVjdG9yKSk7XG5cbiAgICBmb3JtTGlzdC5mb3JFYWNoKChmb3JtRWxlbWVudCkgPT4ge1xuICAgICAgIGNvbnN0IHZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGZvcm1WYWxpZGF0aW9uQ29uZmlnLCBmb3JtRWxlbWVudCk7XG4gICAgICAgY29uc3QgZm9ybU5hbWUgPSBmb3JtRWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpOyBcblxuICAgICAgIGZvcm1WYWxpZGF0b3JzW2Zvcm1OYW1lXSA9IHZhbGlkYXRvcjtcbiAgICAgICB2YWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuICAgIH0pO1xufVxuXG5lbmFibGVWYWxpZGF0aW9uKGZvcm1WYWxpZGF0aW9uQ29uZmlnKTtcblxuLy8gQWRkaW5nIE5ldyBDYXJkIEZvcm0gaGFuZGxlclxuY29uc3QgaGFuZGxlQWRkQ2FyZFN1Ym1pdCA9IChkYXRhKSA9PiB7XG4gICAgYWRkQ2FyZEZvcm0ucmVuZGVyTG9hZGluZyh0cnVlKTtcbiAgICBhcGkuYWRkTmV3Q2FyZChkYXRhKVxuICAgICAgICAudGhlbigoY2FyZERhdGEpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNhcmRFbCA9IHJlbmRlckNhcmQoY2FyZERhdGEpO1xuICAgICAgICAgICAgc2VjdGlvbi5hZGRJdGVtKGNhcmRFbCk7XG4gICAgICAgICAgICBhZGRDYXJkRm9ybS5jbG9zZSgpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKVxuICAgICAgICB9KVxuICAgICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgICAgICBhZGRDYXJkRm9ybS5yZW5kZXJMb2FkaW5nKGZhbHNlKTtcbiAgICAgICAgfSk7XG59XG5cbi8vRWRpdCBQcm9maWxlIEZvcm0gaGFuZGxlclxuY29uc3QgaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQgPSAoaW5wdXQpID0+IHtcbiAgICBlZGl0UHJvZmlsZU1vZGFsLnJlbmRlckxvYWRpbmcodHJ1ZSk7XG4gICAgYXBpLmVkaXRQcm9maWxlKGlucHV0KVxuICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICB1c2VySW5mby5zZXRVc2VySW5mbyh7XG4gICAgICAgICAgICAgICAgbmFtZTogaW5wdXQubmFtZSxcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogaW5wdXQuZGVzY3JpcHRpb24sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGVkaXRQcm9maWxlTW9kYWwuY2xvc2UoKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICAgICAgZWRpdFByb2ZpbGVNb2RhbC5yZW5kZXJMb2FkaW5nKGZhbHNlKTtcbiAgICAgICAgfSk7XG59XG5cbmNvbnN0IG9wZW5Qcm9maWxlTW9kYWwgPSAoKSA9PiB7XG4gICAgY29uc3QgeyBuYW1lLCBkZXNjcmlwdGlvbiB9ID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcbiAgICBzZWxlY3RvcnMuZm9ybUlucHV0TmFtZS52YWx1ZSA9IG5hbWU7XG4gICAgc2VsZWN0b3JzLmZvcm1JbnB1dERlc2NyaXB0aW9uLnZhbHVlID0gZGVzY3JpcHRpb247XG4gICAgZm9ybVZhbGlkYXRvcnNbcHJvZmlsZUVkaXRGb3JtLmdldEF0dHJpYnV0ZSgnbmFtZScpXS5yZXNldFZhbGlkYXRpb24oKTtcbiAgICBlZGl0UHJvZmlsZU1vZGFsLm9wZW4oKTtcbn1cblxuLy9DaGFuZ2luZyBhdmF0YXIgaGVscGVyXG5jb25zdCBoYW5kbGVVcGRhdGVBdmF0YXIgPSAoaW5wdXQpID0+IHtcbiAgICB1cGRhdGVBdmF0YXJNb2RhbC5yZW5kZXJMb2FkaW5nKHRydWUpO1xuICAgIGFwaS5lZGl0UHJvZmlsZUF2YXRhcihpbnB1dClcbiAgICAgICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgICAgIHVzZXJJbmZvLnNldEF2YXRhckltYWdlKGRhdGEuYXZhdGFyKTtcbiAgICAgICAgICAgIHVwZGF0ZUF2YXRhck1vZGFsLmNsb3NlKCk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICAgIH0pXG4gICAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgICAgIHVwZGF0ZUF2YXRhck1vZGFsLnJlbmRlckxvYWRpbmcoZmFsc2UpO1xuICAgICAgICB9KVxufVxuXG4vL2NoYW5nZSBhdmF0YXJcbmNvbnN0IHVwZGF0ZUF2YXRhck1vZGFsID0gbmV3IFBvcHVwV2l0aEZvcm0oc2VsZWN0b3JzLmNoYW5nZUF2YXRhclBvcHVwLCBoYW5kbGVVcGRhdGVBdmF0YXIpO1xudXBkYXRlQXZhdGFyTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxucHJvZmlsZUF2YXRhci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICB1cGRhdGVBdmF0YXJNb2RhbC5vcGVuKCk7XG4gICAgZm9ybVZhbGlkYXRvcnNbc2VsZWN0b3JzLmF2YXRhckZvcm0uZ2V0QXR0cmlidXRlKCduYW1lJyldLnJlc2V0VmFsaWRhdGlvbigpO1xufSlcblxuLy9Qb3B1cFdpdGhJbWFnZVxuY29uc3QgcG9wdXBJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZShzZWxlY3RvcnMucHJldmlld1BvcHVwKTtcbnBvcHVwSW1hZ2UuY2xvc2UoKTtcblxuLy9kZWxldGUgbW9kYWxcbmNvbnN0IGNvbmZpcm1EZWxldGVNb2RhbCA9IG5ldyBQb3B1cFdpdGhDb25maXJtKHNlbGVjdG9ycy5jb25maXJtRGVsZXRlTW9kYWwsIFxuICAgIChjYXJkKSA9PiB7aGFuZGxlRGVsZXRlKGNhcmQpfSk7XG5jb25maXJtRGVsZXRlTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy9lZGl0IHByb2ZpbGVcbmNvbnN0IGVkaXRQcm9maWxlTW9kYWwgPSBuZXcgUG9wdXBXaXRoRm9ybShzZWxlY3RvcnMuZWRpdEZvcm1Qb3B1cCwgaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQpO1xuZWRpdFByb2ZpbGVNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5lZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb3BlblByb2ZpbGVNb2RhbClcblxuLy9hZGQgbmV3IGNhcmRcbmNvbnN0IGFkZENhcmRGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0oc2VsZWN0b3JzLmFkZEZvcm1Qb3B1cCwgaGFuZGxlQWRkQ2FyZFN1Ym1pdCk7XG5hZGRDYXJkRm9ybS5zZXRFdmVudExpc3RlbmVycygpO1xuXG5hZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgZm9ybVZhbGlkYXRvcnNbYWRkTmV3Q2FyZEZvcm0uZ2V0QXR0cmlidXRlKCduYW1lJyldLnJlc2V0VmFsaWRhdGlvbigpO1xuICAgIGFkZENhcmRGb3JtLm9wZW4oKTtcbn0pIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICAgIGNvbnN0cnVjdG9yKHsgbmFtZUVsLCBkZXNjcmlwdGlvbkVsLCBhdmF0YXJFbCB9KSB7XG4gICAgICAgIHRoaXMuX25hbWVFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZUVsKTtcbiAgICAgICAgdGhpcy5fZGVzY3JpcHRpb25FbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZGVzY3JpcHRpb25FbCk7XG4gICAgICAgIHRoaXMuX2xpbmsgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGF2YXRhckVsKTtcbiAgICB9XG5cbiAgICBnZXRVc2VySW5mbygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG5hbWU6IHRoaXMuX25hbWVFbC50ZXh0Q29udGVudCxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLl9kZXNjcmlwdGlvbkVsLnRleHRDb250ZW50LFxuICAgICAgICAgICAgYXZhdGFyOiB0aGlzLl9saW5rLnNyYyxcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNldFVzZXJJbmZvKHsgbmFtZSwgZGVzY3JpcHRpb24gfSkge1xuICAgICAgICB0aGlzLl9uYW1lRWwudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgICAgICB0aGlzLl9kZXNjcmlwdGlvbkVsLnRleHRDb250ZW50ID0gZGVzY3JpcHRpb247XG4gICAgfVxuXG4gICAgc2V0QXZhdGFySW1hZ2UobGluaykge1xuICAgICAgICB0aGlzLl9saW5rLnNyYyA9IGxpbms7XG4gICAgfVxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XG4gICAgY29uc3RydWN0b3IoeyBiYXNlVXJsLCBoZWFkZXJzIH0pIHtcbiAgICAgICAgdGhpcy5fdXJsID0gYmFzZVVybDtcbiAgICAgICAgdGhpcy5faGVhZGVycyA9IGhlYWRlcnM7XG4gICAgICAgIHRoaXMuX2F1dGhvcml6YXRpb24gPSBoZWFkZXJzLmF1dGhvcml6YXRpb247XG4gICAgfVxuXG4gICAgX2NoZWNrUmVzcG9uc2UocmVzKSB7XG4gICAgICAgIGlmKHJlcy5vaykge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvciAke3Jlcy5zdGF0dXN9YCk7XG4gICAgfVxuXG4gICAgZ2V0SW5pdGlhbENhcmRzKCkge1xuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkc2AsIHtcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XG4gICAgfVxuICAgICAgXG4gICAgZmV0Y2hVc2VySW5mbygpIHtcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vdXNlcnMvbWVgLCB7XG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgICB9KVxuICAgICAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgICB9XG5cbiAgICBlZGl0UHJvZmlsZSh7IG5hbWUsIGRlc2NyaXB0aW9uIH0pIHtcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vdXNlcnMvbWVgLCB7XG4gICAgICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgYWJvdXQ6IGRlc2NyaXB0aW9uLFxuICAgICAgICAgIH0pLFxuICAgICAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICAgICAgfVxuXG4gICAgZWRpdFByb2ZpbGVBdmF0YXIoeyBsaW5rIH0pIHtcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBcbiAgICAgICAgICAgICAgICBhdmF0YXI6IGxpbmssXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XG4gICAgfVxuXG4gICAgYWRkTmV3Q2FyZCh7IGNhcmROYW1lLCBjYXJkTGluayB9KSB7XG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzYCwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IFxuICAgICAgICAgICAgICAgIG5hbWU6IGNhcmROYW1lLCBcbiAgICAgICAgICAgICAgICBsaW5rOiBjYXJkTGluayxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICB9KVxuICAgICAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgICB9XG5cbiAgICBkZWxldGVDYXJkKGNhcmRJZCkge1xuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkcy8ke2NhcmRJZH1gLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgICB9KVxuICAgICAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgICB9XG5cbiAgICBhZGRMaWtlKGNhcmRJZCkge1xuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiUFVUXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgICB9KVxuICAgICAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgICB9XG5cbiAgICBkZWxldGVMaWtlKGNhcmRJZCkge1xuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgICB9KVxuICAgICAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgICB9XG4gIH0iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgICAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XG4gICAgICAgIHRoaXMuX21vZGFsTmFtZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9fbmFtZScpO1xuICAgICAgICB0aGlzLl9tb2RhbEltYWdlID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLm1vZGFsX19pbWFnZScpO1xuXG4gICAgICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgfVxuXG4gICAgb3BlbihpbWFnZURhdGEpIHtcbiAgICAgICAgdGhpcy5fbW9kYWxOYW1lLnRleHRDb250ZW50ID0gaW1hZ2VEYXRhLm5hbWU7XG4gICAgICAgIHRoaXMuX21vZGFsSW1hZ2UuYWx0ID0gaW1hZ2VEYXRhLm5hbWU7XG4gICAgICAgIHRoaXMuX21vZGFsSW1hZ2Uuc3JjID0gaW1hZ2VEYXRhLmxpbms7XG5cbiAgICAgICAgc3VwZXIub3BlbigpO1xuICAgIH1cbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoQ29uZmlybSBleHRlbmRzIFBvcHVwIHtcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcbiAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fYnV0dG9uXCIpO1xuICAgIH1cblxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuXG4gICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XG4gICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZVN1Ym1pdCgpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBvcGVuKGhhbmRsZURlbGV0ZUNhbGxiYWNrKSB7XG4gICAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNhbGxiYWNrID0gaGFuZGxlRGVsZXRlQ2FsbGJhY2s7XG4gICAgICAgIHN1cGVyLm9wZW4oKTtcbiAgICB9XG5cbiAgICBzZXRTdWJtaXRBY3Rpb24oYWN0aW9uKSB7XG4gICAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZVN1Ym1pdCA9IGFjdGlvbjtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJtIiwibyIsIm9iaiIsInByb3AiLCJPYmplY3QiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJwIiwiYiIsImRvY3VtZW50IiwiYmFzZVVSSSIsInNlbGYiLCJsb2NhdGlvbiIsImhyZWYiLCJVUkwiLCJzZWxlY3RvcnMiLCJjYXJkc0xpc3QiLCJjYXJkVGVtcGxhdGUiLCJwcmV2aWV3UG9wdXAiLCJlZGl0Rm9ybVBvcHVwIiwiYWRkRm9ybVBvcHVwIiwicHJvZmlsZVRpdGxlIiwicHJvZmlsZURlc2NyaXB0aW9uIiwicHJvZmlsZUF2YXRhciIsImZvcm1Nb2RhbENvbnRhaW5lciIsImltYWdlTW9kYWxDb250YWluZXIiLCJmb3JtSW5wdXROYW1lIiwiZm9ybUlucHV0RGVzY3JpcHRpb24iLCJjaGFuZ2VBdmF0YXJQb3B1cCIsImF2YXRhckZvcm0iLCJjb25maXJtRGVsZXRlTW9kYWwiLCJjb25zdHJ1Y3RvciIsImRhdGEiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwiaGFuZGxlTGlrZUNhcmQiLCJoYW5kbGVEZWxldGUiLCJjdXJyZW50VXNlcklkIiwidGhpcyIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9jYXJkSWQiLCJfaWQiLCJfbGlrZXMiLCJsaWtlcyIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlSW1hZ2VDbGljayIsIl9oYW5kbGVEZWxldGUiLCJfaGFuZGxlTGlrZUNhcmQiLCJfY3VycmVudFVzZXJJZCIsIl9vd25lciIsIm93bmVyIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwibGlrZUJ1dHRvbiIsIl9lbGVtZW50IiwicXVlcnlTZWxlY3RvciIsImFkZEV2ZW50TGlzdGVuZXIiLCJfc2V0SXNMaWtlZCIsIl9pbWFnZU1vZGFsIiwiX2dldFRlbXBsYXRlIiwiY29udGVudCIsImNsb25lTm9kZSIsImhhbmRsZUxpa2UiLCJpc0xpa2VkIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwic29tZSIsImxpa2UiLCJkZWxldGVDYXJkIiwiZ2VuZXJhdGVDYXJkIiwiY2FyZEltYWdlIiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJGb3JtVmFsaWRhdG9yIiwiY29uZmlnIiwiZm9ybUVsZW1lbnQiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfZm9ybUVsZW1lbnQiLCJfaW5wdXRMaXN0IiwicXVlcnlTZWxlY3RvckFsbCIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWxlbWVudCIsImVycm9yTWVzc2FnZUVsZW1lbnQiLCJpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hpZGVJbnB1dEVycm9yIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGFzSW52YWxpZElucHV0IiwiX2lucHV0RWxlbWVudHMiLCJldmVyeSIsImRpc2FibGVCdXR0b24iLCJfc3VibWl0QnV0dG9uIiwiZGlzYWJsZWQiLCJfZW5hYmxlQnV0dG9uIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiZm9yRWFjaCIsImVuYWJsZVZhbGlkYXRpb24iLCJlIiwicHJldmVudERlZmF1bHQiLCJyZXNldFZhbGlkYXRpb24iLCJQb3B1cCIsIl9yZWYiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwIiwiX2Nsb3NlQnV0dG9uIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJldnQiLCJ0YXJnZXQiLCJjdXJyZW50VGFyZ2V0IiwiY2xvc2UiLCJvcGVuIiwiX2hhbmRsZUVzY0Nsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImtleSIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfZm9ybSIsIl9mb3JtSW5wdXRzIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfYnV0dG9uVGV4dCIsIl9nZXRJbnB1dFZhbHVlcyIsImlucHV0T2JqZWN0IiwiaW5wdXQiLCJ2YWx1ZSIsInJlbmRlckxvYWRpbmciLCJpc0xvYWRpbmciLCJyZXNldCIsIlNlY3Rpb24iLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwicmVuZGVySXRlbXMiLCJpdGVtIiwiYWRkSXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwiZWRpdEJ1dHRvbiIsImFkZEJ1dHRvbiIsImFkZE5ld0NhcmRGb3JtIiwiZm9ybXMiLCJwcm9maWxlRWRpdEZvcm0iLCJ1c2VySW5mbyIsIm5hbWVFbCIsImRlc2NyaXB0aW9uRWwiLCJhdmF0YXJFbCIsIl9uYW1lRWwiLCJfZGVzY3JpcHRpb25FbCIsImdldFVzZXJJbmZvIiwiZGVzY3JpcHRpb24iLCJhdmF0YXIiLCJzZXRVc2VySW5mbyIsIl9yZWYyIiwic2V0QXZhdGFySW1hZ2UiLCJhcGkiLCJiYXNlVXJsIiwiaGVhZGVycyIsIl91cmwiLCJfaGVhZGVycyIsIl9hdXRob3JpemF0aW9uIiwiYXV0aG9yaXphdGlvbiIsIl9jaGVja1Jlc3BvbnNlIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImdldEluaXRpYWxDYXJkcyIsImZldGNoIiwidGhlbiIsImZldGNoVXNlckluZm8iLCJlZGl0UHJvZmlsZSIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiYWJvdXQiLCJlZGl0UHJvZmlsZUF2YXRhciIsIl9yZWYzIiwiYWRkTmV3Q2FyZCIsIl9yZWY0IiwiY2FyZE5hbWUiLCJjYXJkTGluayIsImNhcmRJZCIsImFkZExpa2UiLCJkZWxldGVMaWtlIiwic2VjdGlvbiIsImFsbCIsInVzZXJEYXRhIiwiY2FyZHMiLCJjYXJkIiwicmVuZGVyQ2FyZCIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImxvZyIsImltYWdlRGF0YSIsInBvcHVwSW1hZ2UiLCJzZXRTdWJtaXRBY3Rpb24iLCJmaW5hbGx5IiwicmVtb3ZlTGlrZSIsIkNhcmQiLCJmb3JtVmFsaWRhdG9ycyIsImZvcm1WYWxpZGF0aW9uQ29uZmlnIiwiZm9ybVNlbGVjdG9yIiwiQXJyYXkiLCJmcm9tIiwidmFsaWRhdG9yIiwiZm9ybU5hbWUiLCJnZXRBdHRyaWJ1dGUiLCJ1cGRhdGVBdmF0YXJNb2RhbCIsImVycm9yIiwiX21vZGFsTmFtZSIsIl9tb2RhbEltYWdlIiwiX2hhbmRsZURlbGV0ZVN1Ym1pdCIsImhhbmRsZURlbGV0ZUNhbGxiYWNrIiwiX2hhbmRsZURlbGV0ZUNhbGxiYWNrIiwiYWN0aW9uIiwiZWRpdFByb2ZpbGVNb2RhbCIsIm9wZW5Qcm9maWxlTW9kYWwiLCJhZGRDYXJkRm9ybSIsImNhcmREYXRhIiwiY2FyZEVsIl0sInNvdXJjZVJvb3QiOiIifQ==